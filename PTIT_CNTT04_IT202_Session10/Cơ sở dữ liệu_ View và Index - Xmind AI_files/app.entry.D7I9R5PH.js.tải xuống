const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["vendor-fw-icon.COS-Fadx.css","vendor-mathjax.DLN0TBKE.css","use-tracking.Bn5_BzOZ.css","theme-preview-module-00614174.DAHx9Q3S.css","tailwind.SzvkyT9k.css","vanakit-override-less.CHZjioyG.css","generator-embed.BI-84oIc.css","markdown-editor.CvQ6-JTw.css","opml-editor.BORrTMi7.css","docx-editor.xl97FPGa.css","textbundle-editor.BDeeg0wW.css","ellipsis-loading.JHndXLp9.css","new-base-input.kW5u--ou.css","login.Cxd6HDoy.css","index.DNNEuNV2.css","complete-information.DTl3nmE8.css","common.PALmmDLF.css","skeleton-animation.3ejBb0jX.css","app-home.bjLXCIff.css","index.DOuOVtHs.css","zoom-control.udDV1KlV.css","sheet-bar.Cj2qM93M.css","branch-only-bar.DKm_Zk9N.css","loading.T2Y1G6nX.css","panel-frame.D9UzdIkU.css","ai-wiki-panel.CyCRLcsO.css","ai-cutout-panel.DgXtqlJg.css","base-topic-locator.Cld7OjmI.css","notes.C9H0qzbG.css","equation.gOIQRtTS.css","information.CEvEMrqC.css","ai-bar.Bh5pxway.css","index.DdOh1N5l.css","vendor-gantt.CB3v9wFF.css","menu-popover.BYweiX8v.css","bottom-bar.CHpY9BxK.css","input.CB30kUYH.css","editor-view.C7ApNZq-.css","brainstorm.BqpEZPVY.css","editor.DyIismqt.css","readonly-notes.C4ofyUy0.css","embed-view.DWP51Wih.css","header.DpSJ2nOs.css","index.Fk-9TLTd.css","container.CGJu60cZ.css","ai-button.D9C7ioSG.css","checkbox.DHtaGaJX.css","image-container.DXgbSsJY.css","select.BmrzqOBl.css","textarea.DWUIgd_Q.css","toggle.DPK2Ya_E.css","tab.BKljtN1p.css","draggable-list.DqCY60JK.css","radio.tSUFdhWM.css","slider-input.BNvuVfbV.css","tile-button.YnE8t1d8.css","switcher.8-ynKeS8.css","free-trial-push.C97X4p8O.css","annual-discount-push.BMT-SOSk.css","new-number-input.-Rpf9M5T.css","new-cloud-drive-item-skeleton-animation.Bn4daH-v.css","upgrade-gradient-button.Be49Iu2O.css","base-modal-dialog.CD9tzUeD.css","web-video.C_vy7kTI.css","master-ai-loading.lsmKAIkz.css"])))=>i.map(i=>d[i]);
import{aG as Tt,w as Ma,aW as Ee,bp as En,K as Qt,g as Xe,bq as rt,br as vn,bs as An,U as yn,_ as c,bt as In,$ as d,z as Cn,d as bn,u as Dn,E as Ht,bu as Ge,A as Ua,ae as Tn,a$ as Sn,q as nt,v as Rn,D as Jt,bv as st,b6 as Pn,H as ct,bw as On,bx as Fn,by as xn,bz as St,bA as Ln,b9 as kn,Z as lt,Y as ut,bB as Nn,L as Vn,a0 as Bn}from"./vendor-fw-icon.chunk.Bi60zEkT.js";import{c as Mn,a as Un,u as Fe,q as qn,j as Hn,i as $n,L as Wn,l as Xn,b as Gn,r as jn}from"./use-tracking.chunk.B6H-_4bz.js";/* empty css                           */import"./theme-preview-module-00614174.chunk.B19t77zL.js";/* empty css                                    */import{g as ea,d as G,E as y,a3 as me,w as ge,C as Ae,L as $t,o as M,F as te,a as x,a0 as Rt,a1 as Pt,B,I as Z,P as ue,V as zn,p as Kn,s as O,u as qa,c as z,N as _e,U as Yn,J as ce,D as he,a5 as Zn,O as Ha,Q as ne,M as $,X as Ot,Y as Qn,a2 as je,W as ta}from"./svg-2025-recap-share-title-logo.chunk.taI-7L0l.js";import{s as Jn}from"./vendor-manifests.chunk.CR07QKZk.js";import{c1 as aa,bH as J,U as ze,k as T,h as P,a0 as Ft,cO as eo,aY as I,O as f,aK as Wt,cP as K,cQ as le,bt as to,cR as Xt,N as j,ca as na,al as Gt,cE as ao,a4 as Le,e as H,G as Ke,cS as no,c6 as D,cc as $a,w as oo,cT as io,v as ro,H as Y,cU as so,S as co,aF as dt,f as xt,aG as lo,aI as oe,bp as Wa,bL as Ye,aO as Lt,R as oa,F as ae,cV as pt,aq as ia,b7 as uo,b8 as po,b_ as ho,cW as mo,b1 as fo,bS as _o,X as go,cA as ra,cB as sa,a as wo,ab as Ze,ai as Xa,aN as Pe,ci as ht,ch as Eo,a1 as Ne,bi as mt,bh as vo,bj as Ao,t as Ga,j as ee,o as yo,E as Io,B as Co,cX as pe,m as bo,c as Do,bo as To}from"./vendor-mathjax.chunk.DhpPXkUG.js";import{m as ot}from"./vendor-crypto-js.chunk.z_BzH-3X.js";import{_ as So}from"./vendor-pdf-lib.chunk.-bP12LyQ.js";import{m as Ve}from"./vendor-@zoom/appssdk.chunk.CJ8RFtQ9.js";import{J as Ro}from"./vendor-jszip.chunk.Ch1XBDKQ.js";import{i as Qe}from"./detect-browser.chunk.DWkGb0UA.js";import{u as Po}from"./use-page-meta.chunk.BkfwLMIa.js";import{makeMarkdownV3TextAsDocumentImporter as Oo}from"./markdown_v3.chunk.B9tFfc5D.js";import{i as Fo}from"./vendor-sentry.chunk.84U1s2Xa.js";import{u as xo}from"./use-statsig.chunk.izdDxrVJ.js";import{r as Lo}from"./json-codes-json.chunk.DLPRfND6.js";import{r as ko}from"./json-supportedLocales-json.chunk.3RMy_jEh.js";import{_ as No}from"./close.vue_vue_type_script_setup_true_lang.chunk.DAA24AZx.js";import"./vendor-lodash.chunk.CWHsW1U1.js";import"./svg-download-dark.chunk.CtAOTeG0.js";import"./svg-download-light.chunk.CzqYcDmI.js";import"./svg-error.chunk.B69xxAZo.js";import"./svg-loading-dark.chunk.1vGQhbR5.js";import"./svg-loading-light.chunk.BGLfxiJz.js";import"./svg-success.chunk.Cyq85HdI.js";import"./svg-warning.chunk.CTEGBpRS.js";import"./svg-upload-dark.chunk.S7ygM6yV.js";import"./svg-upload-light.chunk.DiBtZMu1.js";import"./svg-information-light.chunk.iMiHWg6v.js";import"./svg-information-dark.chunk.DVEax3Gt.js";import"./svg-blank.chunk.BTJHLXwr.js";import"./svg-popover-arrow.chunk.C1VTcGCz.js";import"./vendor-axios.chunk.B4NsHOBl.js";import"./vendor-jsencrypt.chunk.hk8pJeGz.js";import"./json-colorthemes-json.chunk.DzTQUN21.js";import"./json-colorthemegroup-json.chunk.CuO_f-if.js";import"./json-smartcolorthemeorderlist-json.chunk.CW_BiVoV.js";import"./json-sd-skeletonthemegroup-json.chunk.DL-qRBLp.js";import"./json-sd-skeletonthemes-json.chunk.1KQ_hBmv.js";import"./json-sd-skeletonthemepreviews-json.chunk.qO4Rn-Pa.js";import"./json-sd-colorfulskeletonthemepreviews-json.chunk.Bdv1UgD8.js";import"./json-freeskeletongroup-json.chunk.DWCS8jBc.js";import"./json-viewer-json.chunk.BenLo46R.js";import"./json-illustrations-group-json.chunk.CaOL7IX6.js";import"./json-marker-group-json.chunk.D-1E6Hs8.js";import"./json-sticker-group-json.chunk.DMvLG33l.js";import"./json-templates-json.chunk.CD84UOmh.js";import"./json-color-theme-json.chunk.BiIDezO-.js";import"./json-skeleton-theme-json.chunk.YmJZlYuN.js";import"./json-marker-json.chunk.DGGi-Bh-.js";import"./vendor-ice-cream-pancake.chunk.0jdYj1PU.js";import"./json-fonts-json.chunk.51WmRQur.js";import"./json-illustrations-json.chunk.BbOK9yb8.js";import"./json-markers-json.chunk.CyngR8Y5.js";import"./json-stickers-json.chunk.D1jC-0dX.js";import"./json-algorithms-json.chunk.BSV22uPX.js";import"./json-list-json.chunk.CLGm0Jnl.js";import"./json-primes-json.chunk.CNlWC2nI.js";import"./json-package-json.chunk.BYMFjqaL.js";import"./json-aesid-json.chunk.BdPIDDR6.js";import"./json-curves-json.chunk.CTRf6I_o.js";import"./json-Courier-Bold.compressed-json.chunk.Bsv0lhq4.js";import"./json-Courier-BoldOblique.compressed-json.chunk.CLjtBqQq.js";import"./json-Courier-Oblique.compressed-json.chunk.CYpN13AN.js";import"./json-Courier.compressed-json.chunk.BhaIs7W0.js";import"./json-Helvetica-Bold.compressed-json.chunk.DNQLHaOF.js";import"./json-Helvetica-BoldOblique.compressed-json.chunk.DzOcsOKV.js";import"./json-Helvetica-Oblique.compressed-json.chunk.Bq0GzTGa.js";import"./json-Helvetica.compressed-json.chunk.C2k7st4w.js";import"./json-Times-Bold.compressed-json.chunk.C8sdSd_O.js";import"./json-Times-BoldItalic.compressed-json.chunk.GUSezV1Z.js";import"./json-Times-Italic.compressed-json.chunk.B_b8Como.js";import"./json-Times-Roman.compressed-json.chunk.D3GyzXte.js";import"./json-Symbol.compressed-json.chunk.BpZ5BnTy.js";import"./json-ZapfDingbats.compressed-json.chunk.DqxrWUFg.js";import"./json-all-encodings.compressed-json.chunk.DHCirVd1.js";import"./xmind-converter.chunk.CmhY2ukp.js";import"./xmind-relationship.chunk.BVHMiM_9.js";import"./utils.chunk.BrAwcjAn.js";import"./constant.chunk.2GZxMXpd.js";import"./xmind-image.chunk.T6oSY4AC.js";const Vo=o=>["owner","admin"].includes(o==null?void 0:o.role),ca={isManagementRole:Vo};typeof window<"u"?window.helpers=ca:typeof ea<"u"&&(ea.helpers=ca);class jt{setupServices(e){if(!e.router||!e.storage||!e.action)throw new aa;this.storage=e.storage,this.router=e.router,this.action=e.action,this.services=e}getService(e){const t=this.services[e];if(!t)throw new aa([e]);return t}getRouterService(){return this.getService("router")}getStorageService(){return this.getService("storage")}getActionServices(){return this.getService("action")}}let Bo=class extends jt{constructor(e){super(),this.storageNamespace={state:"state"},this.formatPanelRecentFontKey="formatPanelRecentFontKey",this.formatPanelRecentColorThemeKey="recentColorThemeList",this.formatPanelRecentlyUsedColorsKey="formatPanelRecentlyUsedColors",this.recentInviteEmailsKey="recentInviteEmails",this.storageNamespace.state=(e==null?void 0:e.namespace.state)||this.storageNamespace.state,this.stateStorageHandler=J.createInstance({name:this.storageNamespace.state})}async setFormatPanelRecentFonts(e){await this.stateStorageHandler.setItem(this.formatPanelRecentFontKey,JSON.parse(JSON.stringify(e)))}async getFormatPanelRecentFonts(){return await this.stateStorageHandler.getItem(this.formatPanelRecentFontKey)||[]}async getAllRecentColorThemeIds(){return await this.stateStorageHandler.getItem(this.formatPanelRecentColorThemeKey)||[]}async setNewRecentColorThemeIds(e){const t=[...new Set(e.concat(await this.getAllRecentColorThemeIds()))].slice(0,6);return await this.stateStorageHandler.setItem(this.formatPanelRecentColorThemeKey,JSON.parse(JSON.stringify(t))),JSON.parse(JSON.stringify(t))}async getFormatPanelRecentlyUsedColors(){return await this.stateStorageHandler.getItem(this.formatPanelRecentlyUsedColorsKey)||[]}async addFormatPanelRecentlyUsedColors(e){if(!e)return;const t=await this.getFormatPanelRecentlyUsedColors(),a=[e].concat(t.filter(n=>n!==e)).slice(0,9);await this.stateStorageHandler.setItem(this.formatPanelRecentlyUsedColorsKey,JSON.parse(JSON.stringify(a)))}async getRecentInviteEmails(){return await this.stateStorageHandler.getItem(this.recentInviteEmailsKey)||[]}async addRecentInviteEmails(e){if(!e||e.length===0)return;const t=e.map(i=>i.trim().toLowerCase()),a=await this.getRecentInviteEmails(),n=[...t,...a.filter(i=>!t.includes(i))].slice(0,10);await this.stateStorageHandler.setItem(this.recentInviteEmailsKey,JSON.parse(JSON.stringify(n)))}};/*!
MIT License

Copyright (c) 2018 Arturas Molcanovas <a.molcanovas@gmail.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*/function Mo(o,e){o=o||[],e=e||{};try{return new Blob(o,e)}catch(i){if(i.name!=="TypeError")throw i;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,a=new t,n=0;n<o.length;n+=1)a.append(o[n]);return a.getBlob(e.type)}}var la=/^~~local_forage_type~([^~]+)~/,kt=9,ua=kt+4,da=Object.prototype.toString;function ja(o){var e=o.length*.75,t=o.length;o[o.length-1]==="="&&(e--,o[o.length-2]==="="&&e--);for(var a=new ArrayBuffer(e),n=new Uint8Array(a),i=0,s=0;i<t;i+=4){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(o[i]),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(o[i+1]),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(o[i+2]),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(o[i+3]);n[s++]=l<<2|r>>4,n[s++]=(r&15)<<4|p>>2,n[s++]=(p&3)<<6|u&63}return a}function Nt(o){for(var e=new Uint8Array(o),t="",a=0;a<e.length;a+=3)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e[a]>>2],t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e[a]&3)<<4|e[a+1]>>4],t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e[a+1]&15)<<2|e[a+2]>>6],t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e[a+2]&63];return e.length%3===2?t=t.substring(0,t.length-1)+"=":e.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Uo(o,e){var t="";if(o&&(t=da.call(o)),o&&(t==="[object ArrayBuffer]"||o.buffer&&da.call(o.buffer)==="[object ArrayBuffer]")){var a=void 0,n="__lfsc__:";o instanceof ArrayBuffer?(a=o,n+="arbf"):(a=o.buffer,t==="[object Int8Array]"?n+="si08":t==="[object Uint8Array]"?n+="ui08":t==="[object Uint8ClampedArray]"?n+="uic8":t==="[object Int16Array]"?n+="si16":t==="[object Uint16Array]"?n+="ur16":t==="[object Int32Array]"?n+="si32":t==="[object Uint32Array]"?n+="ui32":t==="[object Float32Array]"?n+="fl32":t==="[object Float64Array]"?n+="fl64":e(new Error("Failed to get type for BinaryArray"))),e(n+Nt(a))}else if(t==="[object Blob]"){var i=new FileReader;i.onload=function(){var s="~~local_forage_type~"+o.type+"~"+Nt(this.result);e("__lfsc__:blob"+s)},i.readAsArrayBuffer(o)}else try{e(JSON.stringify(o))}catch(s){console.error("Couldn't convert value into a JSON string: ",o),e(null,s)}}function qo(o){if(o.substring(0,kt)!=="__lfsc__:")return JSON.parse(o);var e=o.substring(ua),t=o.substring(kt,ua),a;if(t==="blob"&&la.test(e)){var n=e.match(la);a=n[1],e=e.substring(n[0].length)}var i=ja(e);switch(t){case"arbf":return i;case"blob":return Mo([i],{type:a});case"si08":return new Int8Array(i);case"ui08":return new Uint8Array(i);case"uic8":return new Uint8ClampedArray(i);case"si16":return new Int16Array(i);case"ur16":return new Uint16Array(i);case"si32":return new Int32Array(i);case"ui32":return new Uint32Array(i);case"fl32":return new Float32Array(i);case"fl64":return new Float64Array(i);default:throw new Error("Unkown type: "+t)}}function za(o){var e,t;if(o===null||typeof o!="object"||"isActiveClone"in o)return o;var a=o instanceof Date?new Date(o):o.constructor();try{for(var n=So(Object.keys(o)),i=n.next();!i.done;i=n.next()){var s=i.value;Object.prototype.hasOwnProperty.call(o,s)&&(o.isActiveClone=null,a[s]=za(o[s]),delete o.isActiveClone)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return a}function Ka(o,e){return(o.name||e.name)+"/"+(o.storeName||e.storeName)+"/"}function de(o,e){e&&o.then(function(t){e(null,t)},function(t){e(t)})}function Ho(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function $o(o,e){var t=this;if(e=Ho.apply(this,arguments),o=typeof o!="function"&&o||{},!o.name){var a=this.config();o.name=o.name||a.name,o.storeName=o.storeName||a.storeName}var n;return o.name?n=new Promise(function(i){o.storeName?i(Ka(o,t._defaultConfig)):i(o.name+"/")}):n=Promise.reject("Invalid arguments"),{promise:n,callback:e}}function zt(o){return typeof o!="string"&&(console.warn(o+" used as a key, but it is not a string."),o=String(o)),o}var Wo={bufferToString:Nt,deserialize:qo,serialize:Uo,stringToBuffer:ja};/*!
MIT License

Copyright (c) 2018 Arturas Molcanovas <a.molcanovas@gmail.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*/var Vt="localforage-driver-memory",Be={},Ya=function(){function o(e){this.kp=e,this.data={}}return o.resolve=function(e){return Be[e]||(Be[e]=new o(e)),Be[e]},o.prototype.clear=function(){this.data={}},o.prototype.drop=function(){this.clear(),delete Be[this.kp]},o.prototype.get=function(e){return this.data[e]},o.prototype.key=function(e){return this.keys()[e]},o.prototype.keys=function(){return Object.keys(this.data)},o.prototype.rm=function(e){delete this.data[e]},o.prototype.set=function(e,t){this.data[e]=t},o}();function Xo(o){var e=o?za(o):{},t=Ka(e,this._defaultConfig),a=Ya.resolve(t);return this._dbInfo=e,this._dbInfo.serializer=Wo,this._dbInfo.keyPrefix=t,this._dbInfo.mStore=a,Promise.resolve()}function Go(o){var e=this,t=this.ready().then(function(){e._dbInfo.mStore.clear()});return de(t,o),t}function jo(o,e){var t=$o.apply(this,arguments),a=t.promise,n=t.callback,i=a.then(function(s){Ya.resolve(s).drop()});return de(i,n),a}function zo(o,e){var t=this;o=zt(o);var a=this.ready().then(function(){var n=t._dbInfo.mStore.get(o);return n==null?null:t._dbInfo.serializer.deserialize(n)});return de(a,e),a}function Ko(o,e){var t=this,a=this.ready().then(function(){for(var n=t._dbInfo.mStore,i=n.keys(),s=0;s<i.length;s++){var l=n.get(i[s]);if(l&&(l=t._dbInfo.serializer.deserialize(l)),l=o(l,i[s],s+1),l!==void 0)return l}});return de(a,e),a}function Yo(o,e){var t=this,a=this.ready().then(function(){var n;try{n=t._dbInfo.mStore.key(o),n===void 0&&(n=null)}catch{n=null}return n});return de(a,e),a}function Zo(o){var e=this,t=this.ready().then(function(){return e._dbInfo.mStore.keys()});return de(t,o),t}function Qo(o){var e=this.keys().then(function(t){return t.length});return de(e,o),e}function Jo(o,e){var t=this;o=zt(o);var a=this.ready().then(function(){t._dbInfo.mStore.rm(o)});return de(a,e),a}function ei(o,e,t){var a=this;o=zt(o);var n=this.ready().then(function(){e===void 0&&(e=null);var i=e;return new Promise(function(s,l){a._dbInfo.serializer.serialize(e,function(r,p){if(p)l(p);else try{a._dbInfo.mStore.set(o,r),s(i)}catch(u){l(u)}})})});return de(n,t),n}var ti=!0;const ai=Object.freeze(Object.defineProperty({__proto__:null,_driver:Vt,_initStorage:Xo,_support:ti,clear:Go,dropInstance:jo,getItem:zo,iterate:Ko,key:Yo,keys:Zo,length:Qo,removeItem:Jo,setItem:ei},Symbol.toStringTag,{value:"Module"})),pa=o=>`CacheMeta#${o}`,ha=o=>`CacheFileHandle#${o}`,we=o=>`CacheRecord#${o}`,ft=(o,e)=>`CacheData#${o}#${e}`,ye=(o,e)=>`XAPData#${o}#${ot(e)}`,fe=o=>`XAPRecords#${o}`,_t=(o,e)=>`Tag#${o}#${e}`;class ni{constructor(e){this.MAXIMUM_CACHE_VERSIONS=1,this.storageNamespace={mapCache:"map-cache"},this.addToMapCacheActionQueue=Tt(),this.addToXAPCacheActionQueue=Tt(),this.memoryMapCache={},e&&e.namespace&&(this.storageNamespace.mapCache=e.namespace.mapCache||this.storageNamespace.mapCache),this.mapCacheStorageHandlerPromise=(async()=>{const t=J.supports(J.INDEXEDDB)||J.supports(J.WEBSQL),a=[J.INDEXEDDB,J.WEBSQL];t||(await J.defineDriver(ai),await J.setDriver(Vt),a.push(Vt));try{await J.ready()}catch(n){logger.error(n)}return J.createInstance({name:this.storageNamespace.mapCache,driver:a})})()}async mapCacheSetItem(e,t,a){const{isAllowSetPersistence:n=!0}=a||{};return n?await(await this.mapCacheStorageHandlerPromise).setItem(e,t):(this.memoryMapCache[e]=t,t)}async mapCacheGetItem(e){const a=await(await this.mapCacheStorageHandlerPromise).getItem(e);return this.memoryMapCache[e]||a}async mapCacheRemoveItem(e){await(await this.mapCacheStorageHandlerPromise).removeItem(e),delete this.memoryMapCache[e]}async getCachedMapMeta(e){return this.addToMapCacheActionQueue(async()=>e?await this.mapCacheGetItem(pa(e)):null)}async setCachedMapMeta(e,t){return this.addToMapCacheActionQueue(async()=>{if(!e||!t)return null;await this.mapCacheSetItem(pa(e),JSON.parse(JSON.stringify(t)))})}async listAllCachedMapRecords(){return this.addToMapCacheActionQueue(async()=>{const t=(await(await this.mapCacheStorageHandlerPromise).keys()).filter(a=>a.startsWith("CacheRecord#"));return await Promise.all(t.map(a=>this.mapCacheGetItem(a).then(n=>n||[])))})}async listCachedMapRecords(e){return this.addToMapCacheActionQueue(async()=>e?await this.mapCacheGetItem(we(e)):null)}async updateCacheRecords(e,t,a){return this.addToMapCacheActionQueue(async()=>{if(!e)return;const n=await this.mapCacheStorageHandlerPromise,i=we(e),s=await n.getItem(i),l=s.findIndex(r=>r.versionId===t);l!==-1&&(s.splice(l,1,JSON.parse(JSON.stringify(a))),await this.mapCacheSetItem(i,s))})}async setCachedMap(e,t,a){await this.addToMapCacheActionQueue(async()=>{if(!t||!e)return null;const n=ot(ze()).toString(),i=ft(e,n),s=we(e),l=!(t instanceof Blob)&&!(t instanceof ArrayBuffer)&&t&&typeof t=="object"?JSON.parse(JSON.stringify(t)):t;await this.mapCacheSetItem(i,l,a);const r={cacheId:e,versionId:n,lastModified:Date.now(),lastUsed:Date.now()},p=await this.mapCacheGetItem(s)||[];await this.mapCacheSetItem(s,[r].concat(p),a),await this.autoCleanMapCache(e)})}async hasCachedMap(e){return await this.addToMapCacheActionQueue(async()=>(await this.mapCacheGetItem(we(e))||[]).length>0)}async autoCleanMapCache(e,t){const a=we(e),n=await this.mapCacheGetItem(a);if(!n)return;const i=[];for(let s=this.MAXIMUM_CACHE_VERSIONS;s<=n.length-1;s++)i.push(n[s].versionId);await Promise.all(i.map(s=>this.mapCacheRemoveItem(ft(e,s)))),await this.mapCacheSetItem(a,n.filter(({versionId:s})=>!i.includes(s)),t)}async getCachedMap(e,t){return await this.addToMapCacheActionQueue(async()=>{if(!e)return null;const a=await this.mapCacheGetItem(we(e))||[],n=t?a.find(t):a[0];return n?await this.mapCacheGetItem(ft(e,n.versionId)):null})}async removeCacheMap(e){return await this.addToMapCacheActionQueue(async()=>{if(!e)return null;const a=(await(await this.mapCacheStorageHandlerPromise).keys()).filter(n=>n.includes(e));await Promise.all(a.map(n=>this.mapCacheRemoveItem(n)))})}async getCachedXAP(e,t){return this.addToXAPCacheActionQueue(async()=>!e||!t?null:await this.mapCacheGetItem(ye(e,t)))}async setCachedXAP(e,t,a,n){return this.addToXAPCacheActionQueue(async()=>{if(!e||!t||!a)return null;await this.mapCacheSetItem(ye(e,t),a,n);const i=await this.mapCacheGetItem(fe(e))||[],s=i.findIndex(r=>r.xapURL===t);s!==-1&&i.splice(s,1);const l={xapURL:t};return await this.mapCacheSetItem(fe(e),[l].concat(i),n),null})}async removeCachedXAP(e,t){return this.addToXAPCacheActionQueue(async()=>{if(!e||!t)return null;const n=await(await this.mapCacheStorageHandlerPromise).getItem(fe(e))||[],i=n.findIndex(s=>s.xapURL===t);return n.splice(i,1),await this.mapCacheSetItem(fe(e),n),await this.mapCacheRemoveItem(ye(e,t)),null})}async listCachedXAP(e){return await this.addToXAPCacheActionQueue(async()=>{if(!e)return null;const t=await this.mapCacheGetItem(fe(e));return t?await Promise.all(t.map(async a=>({xapURL:a.xapURL,data:await this.mapCacheGetItem(ye(e,a.xapURL))}))):null})}async setTag(e,t,a){return this.addToXAPCacheActionQueue(async()=>{typeof a=="string"?await this.mapCacheSetItem(_t(e,t),a):await this.mapCacheRemoveItem(_t(e,t))})}async getTag(e,t){return this.addToXAPCacheActionQueue(async()=>await this.mapCacheGetItem(_t(e,t)))}async removeAllCacheXAP(e){return this.addToXAPCacheActionQueue(async()=>{if(!e)return null;const t=await this.mapCacheGetItem(fe(e));t&&await Promise.all([this.mapCacheRemoveItem(fe(e)),...t.map(({xapURL:a})=>this.mapCacheRemoveItem(ye(e,a)))])})}async getFileHandle(e){return(await this.mapCacheStorageHandlerPromise).getItem(ha(e))}async setFileHandle(e,t){await(await this.mapCacheStorageHandlerPromise).setItem(ha(e),t)}}const oi=1e3*60*60*4,ii=()=>Ma(8),U=class U{constructor(e){this.isWillKeepAlive=!0,this.lastTimerId=void 0;const{cacheId:t=ot(ze()).toString().slice(0,6),isWillKeepAlive:a=!0}=e||{};if(U.caches[t])throw new Error("Map Cache Instance of the cacheId has been created. uses MapCache.use([cacheId]) to retrieve it.");this.cacheId=t,this.isWillKeepAlive=a,U.caches[t]=this,this.autoKeepAlive()}static use(e){return e&&this.caches[e]?this.caches[e]:e?new U({cacheId:e}):new U({cacheId:e??ii()})}static async cleanExpires(){var n;const t=(await this.storage.listAllCachedMapRecords()).filter(i=>i.length&&i[0].lastUsed+oi<Date.now());t.length;const a=new Set;for(const i of t)for(const s of i){const l=await this.storage.getCachedMapMeta(s.cacheId);((n=l==null?void 0:l.extension)==null?void 0:n.name)!=="xmind-sharing"&&(a.add(s.cacheId),await Promise.all([this.storage.removeCacheMap(s.cacheId),this.storage.removeAllCacheXAP(s.cacheId)]))}a.size&&logger.log(a.size+" local cache cleaned !",a)}autoKeepAlive(){this.isWillKeepAlive&&(window.clearTimeout(this.lastTimerId),this.lastTimerId=setTimeout(async()=>{await this.keepAlive(),this.autoKeepAlive()},3e3))}async keepAlive(){const e=await U.storage.listCachedMapRecords(this.cacheId);if(!e)return;const t=e[0];t.lastUsed=Date.now(),await U.storage.updateCacheRecords(this.cacheId,t.versionId,t)}async update(e){e.meta&&await U.storage.setCachedMapMeta(this.cacheId,e.meta),e.file&&await U.storage.setCachedMap(this.cacheId,e.file)}async getFile(){return U.storage.getCachedMap(this.cacheId)}async hasFile(){return U.storage.hasCachedMap(this.cacheId)}async getMeta(){return U.storage.getCachedMapMeta(this.cacheId)}async getXAP(e){const{xapURL:t}=e,a=t.replace(/^xap:/i,"");return await U.storage.getCachedXAP(this.cacheId,a)}async setXAP(e){const{data:t,xapURL:a,isEncrypted:n}=e,i=a.replace(/^xap:/i,"");return await U.storage.setCachedXAP(this.cacheId,i,t,{isAllowSetPersistence:!n}),a}async getTag(e){return await U.storage.getTag(this.cacheId,e)}async setTag(e,t){await U.storage.setTag(this.cacheId,e,t)}async listXAP(){return(await U.storage.listCachedXAP(this.cacheId)||[]).reduce((e,t)=>(e[t.xapURL]=t.data,e),{})}async getFileHandle(){return U.storage.getFileHandle(this.cacheId)}async setFileHandle(e){return U.storage.setFileHandle(this.cacheId,e)}};U.storage=new ni,U.caches={};let Je=U;var ri={NODE_ENV:"production",MODE:"production",DEPLOY_ENV:"production",SNOWBIRD_VERSION:"0.5.7",SNOWBIRD_RESOURCE_VERSION:"0.0.2",VIEWER_KIT_VERSION:"1.10.10",DOCUMENT_KIT_VERSION:"1.7.6",SNOWMONSTER_VERSION:"@xmindltd/snowmonster-1.2.0-flatwhite.202511302233",BUILT_VERSION:"2026-01-07T10:27:01.356Z",BUILT_RELEASE_MODE:"test",SNOWBIRD_RESOURCE_URL:"snowbird-resource/0.0.2",PUBLIC_URL:"/",FLATWHITE_OAUTH_GOOGLE_APP_SCOPED_CLIENT_ID:"1005176877528-hfiduc51fqg8p7bivkbqqd9iiddq29sj.apps.googleusercontent.com",FLATWHITE_OAUTH_DROPBOX_APP_SCOPED_CLIENT_ID:"i1lwirzaxps3roo",FLATWHITE_OAUTH_ONEDRIVE_APP_SCOPED_CLIENT_ID:"aa23ca5d-bbe2-4240-856e-7c359f8c93e2",FLATWHITE_OAUTH_DROPBOX_CLIENT_ID:"3g5qm3ahijwjkh4",FLATWHITE_OAUTH_ONEDRIVE_CLIENT_ID:"aa23ca5d-bbe2-4240-856e-7c359f8c93e2",FLATWHITE_OAUTH_GOOGLE_CLIENT_ID:"550120331944-h8a96vi0ek4ka595vt89b1osv1kaf9kg.apps.googleusercontent.com",FLATWHITE_HOCUSPOCUS_SERVER_URL:"",STRIPE_PUBLIC_KEY:"pk_live_51LXcXIJqSx8ABpt8UnJszM3rcmal4rVSJuEXEAlQo0iSbo5xVbxJnROujuT9BaI3wbWhWJCzH7lRYmjGFZq0QQDt00oZ2dzcDp",STRIPE_PUBLIC_KEY_XMIND_PRO:"pk_live_QGIYsKfxf8HwfftPKCtxyUxE",GOOGLE_LOGIN_CLIENT_ID:"550120331944-h8a96vi0ek4ka595vt89b1osv1kaf9kg.apps.googleusercontent.com",APPLE_LOGIN_CLIENT_ID:"net.xmind.thirdparty.sign.in",RESPONSE_SIGN_PUBLIC_KEY:"-----ORTVA EFN CHOYVP XRL-----ZVVOPtXPNDRNm8raQtqGkytpZ+r0Y7bhRtiNQFOUmfVzIIel/m76Xn3kDeUYk1RubjM9Bo5doeJSvmnbyYIZgpcizyFgN4YpOC006Rkul0yeAYSvS0qBRFW8nJIf072vzJTRuzxjtUZiASyXRTVRcoHIeHZIbDfwfZekMK9DDSc/zniDBdRnMGd8rnXk6C2FLDNdOgdTvDu/slgd8wvy1vHgi6cTCKrj6ObRiJ0/qiTWiZChds8zEScEjQZJ3GtAeB0UEn8HQbX/UEerkkArdh8u3dVc+w5/VwhUMkyEkLAKOjeBv5oWplNjxDQxRUv8xxrkyUXjtKgqXcv9BOOom1fAAO3Sljs9MDVQNDNO-----RAQ EFN CHOYVP XRL-----",DOMAIN_NAME:"app.xmind.com",REGION:"global",XMIND_APP_ENDPOINT:"https://xmind.app",IS_HARMONY_RUNTIME:"0",DEV_MOCK_MAIN_API_ENDPOINT:"",ASSETS_PREFIX:"/assets",MIXPANEL_PROJECT_TOKEN:"08a129b7f0b9ca269482195db09123a2",MIXPANEL_PROJECT_TOKEN_CN:"8d11a72b258c5f39f588fe7327f7dc00",ZOOM_APP_AUTHORIZATION_URL:"https://zoom.us/oauth/authorize?response_type=code&client_id=pRqofyZfQSO0ziKOhSDENg&redirect_uri=https://app.xmind.com/api/integration/zoom/oauth-redirect",FORCE_FRONTEND_LOG:"0"};class si extends jt{constructor(){super(),this.lastRoute=null,this.scheduleAsyncQueue=Tt(),this.openLoginDialog=async e=>{const{isClosable:t=!1,reloadPage:a=!1}=e??{};Ee({auth:""});const n=a?async()=>(window.location.reload(),await new Promise(s=>setTimeout(s,5e3)),!0):void 0;return!!await T().services.action.dialog.openLoginDialog({isClosable:t,afterLogin:n})},this.vueRouter=Mn({history:Un(),routes:[],scrollBehavior(e,t,a){if((e==null?void 0:e.name)!==(t==null?void 0:t.name))return a||{top:0}}})}async initRoutes(){this.vueRouter.afterEach((e,t)=>{logger.log("after router enter",e,t);const a=(Array.isArray(e.params.lang)?e.params.lang[0]:e.params.lang)||"";if(a&&e.fullPath.startsWith(`/${a}`)){const n=e.fullPath.replace(`/${a}`,"");window.history.replaceState({},"",n||"/")}En(),ci({url:new URL(e.path,`https://${ri.DOMAIN_NAME}`).toString()}),this.lastRoute={...t}})}checkUrlLanguageParam(e,t,a){if((Array.isArray(e.params.lang)?e.params.lang[0]:e.params.lang)||""){a();return}const i=Qt(Xe())??"";i?a({name:e.name,params:{lang:i},replace:!0}):a()}async validateSession(e){const{isShowLoginDialog:t,isForce:a,isGotoMainSiteLoginPage:n,isReloadAfterLogin:i=!0}=e??{},s=async l=>{if(l instanceof Ft&&n){const r=`${vn}/signin?next=${encodeURIComponent(window.location.href)}&is_enforce=true`;window.location.href=r}l instanceof Ft||l instanceof eo?(logger.warn("Account authorization failed"),P().clearLoginState(),t&&await this.openLoginDialog({reloadPage:i,isClosable:!1})):logger.error(l)};try{await P().validateAccount({isForce:a,retry:3}),await P().requestAccountProfile({isForce:a,retry:3})}catch(l){await s(l)}}async gotoLogin(e){return this.scheduleAsyncQueue(async()=>{await this.vueRouter.push({name:"login",query:{next:encodeURIComponent(e)}}).catch(t=>logger.error(t))})}async gotoHome(e){return this.scheduleAsyncQueue(async()=>{await(e?this.vueRouter.replace:this.vueRouter.push)({name:"home"}).catch(a=>logger.error(a))})}async go(e){return this.scheduleAsyncQueue(async()=>{await this.vueRouter.push({name:e}).catch(t=>logger.error(t))})}async gotoEditor(e){return this.scheduleAsyncQueue(async()=>{const a=await Je.use(e.cacheId).getMeta(),n=rt();a!=null&&a.isTemporary?await this.vueRouter.push({name:"local",params:{cacheId:e.cacheId}}):await this.vueRouter.push({name:"cloud-drive",params:{cacheId:e.cacheId}}),Ee(n)})}async gotoEditorNext(e){return this.scheduleAsyncQueue(async()=>{const a=await Je.use(e.cacheId).getMeta(),n=rt();a!=null&&a.isTemporary?e.replaceRoute?await this.vueRouter.replace({name:"editor-next-local",params:{cacheId:e.cacheId}}):await this.vueRouter.push({name:"editor-next-local",params:{cacheId:e.cacheId}}):e.replaceRoute?await this.vueRouter.replace({name:"editor-next-cloud-drive",params:{cacheId:e.cacheId}}):await this.vueRouter.push({name:"editor-next-cloud-drive",params:{cacheId:e.cacheId}}),Ee(n)})}async gotoXmindDriveEditor(e){return this.scheduleAsyncQueue(async()=>{const t=rt();await(e!=null&&e.isReplaceRoute?this.vueRouter.replace:this.vueRouter.push)({name:"editor-next-xmind-drive",params:{fileId:e.fileId}}),Ee({...e.isRemoveQuery?{}:t,auth:""})})}async gotoBrainstormingFile(e){return null}async replaceToEditorNextShare(){this.vueRouter.currentRoute.value.name!=="editor-next-share"&&await this.vueRouter.replace({params:{...this.vueRouter.currentRoute.value.params},query:{...this.vueRouter.currentRoute.value.query},hash:this.vueRouter.currentRoute.value.hash,name:"editor-next-share"})}async replaceToEditorNextXmindDrive(){this.vueRouter.currentRoute.value.name!=="editor-next-xmind-drive"&&await this.vueRouter.replace({params:{...this.vueRouter.currentRoute.value.params},query:{...this.vueRouter.currentRoute.value.query},hash:this.vueRouter.currentRoute.value.hash,name:"editor-next-xmind-drive"})}openTermsOfServices(){window.location.href="/terms-of-services"}openPrivacyPolicy(){window.location.href="/privacy-policy"}openFAQ(){window.location.href="/faq"}openPricing(e="_self"){window.open("/pricing",e)}openLandingPage(e){const t=An,a=window.location.search,n=a?`${t}${a}}`:t;e?window.location.replace(n):window.location.href=n}ready(){return this.vueRouter.isReady()}backAndReplace(){var e;this.vueRouter.replace({path:((e=this.lastRoute)==null?void 0:e.fullPath)??"/"})}tryReplaceLangPath(){const e=this.vueRouter.currentRoute.value,t=Qt(Xe());this.vueRouter.replace({name:e.name,params:{lang:t}})}changeHomeSectionPath(e){var l,r,p;const{isKeepQuery:t=!0}=e,a=e.isReplaceRoute?this.vueRouter.replace:this.vueRouter.push,{section:n,pathMatch:i}=((l=this.vueRouter.currentRoute.value)==null?void 0:l.params)??{},s=Array.isArray(i)?i:i?[i]:[];if(!(n===e.section&&s.join("/")===e.paths.join("/"))){if(e.isNewTab){const u=this.vueRouter.resolve({name:"home-sections",params:{section:e.section,pathMatch:e.paths},query:t?((r=this.vueRouter.currentRoute.value)==null?void 0:r.query)??{}:{},hash:e.hash}).href;window.open(u,"_blank");return}a({name:"home-sections",params:{section:e.section,pathMatch:(e==null?void 0:e.paths)??[]},query:t?((p=this.vueRouter.currentRoute.value)==null?void 0:p.query)??{}:{},hash:e.hash})}}}function ci(o){const{url:e}=o,t=document.querySelector('link[rel="canonical"]');if(t)t.setAttribute("href",e);else{const a=document.createElement("link");a.rel="canonical",a.href=e,document.head.appendChild(a)}}class li extends I{}class ui extends I{}class di extends I{}class pi extends I{}class hi extends I{}class xe extends I{}class re extends I{}class Za extends I{}class mi extends I{}class X extends I{constructor(e,t){super(e),this.limit=t}}class fi extends I{}const _i=async o=>{const e=await Ro.loadAsync(o);return Object.keys(e.files).forEach(t=>{t.startsWith("__MACOSX")&&e.remove(t)}),await e.generateAsync({type:"blob"})},gi=async function(o){const{file:e,filename:t,password:a,parentFolderId:n,derivedFileId:i,onUploadProgress:s,signal:l,accessMode:r,teamId:p}=o,u=new FormData,g=decodeURIComponent(t);r&&u.append("accessMode",r),a&&u.append("password",a),u.append("parentFolderId",n||""),u.append("teamId",p||""),i&&u.append("derivedFileId",i);const w=await _i(e);u.append(g,w,g);const v=await this.request.put("/api/drive/file",u,{signal:l,onUploadProgress:C=>{s==null||s(C)}});if(!v)throw new f;if(v.status>=500)throw new Error("Server error");if(v.data==="free_user_files_amount_exceed_limit")throw new X("Exceed files limit",null);if(v.status===402&&v.data.message==="exceed_files_limit")throw new X("Exceed files limit",v.data.limit);if(v.status>=400)switch(!0){case v.data==="unsupported_access_mode":throw new li("Unsupported access mode");case v.data==="file_corrupted":throw new ui("File corrupted");case v.data==="file_encrypted":throw new di("File encrypted");case v.data==="file_attachment_too_large":case v.data==="file_map_content_too_large":throw new pi("File attachment too large");case v.data==="insufficient_space":throw new xe("Insufficient space");case v.data==="incorrect_password":throw new mi("Incorrect password");case v.data==="image_file_too_large":throw new hi("File image resource too large");default:throw new re("Create file error")}if(v.isCanceled)return null;const{metadata:A}=v.data;if(!A)throw new re("Create file error");return{metadata:A}},wi=async function(o){const{templatePath:e,filename:t,parentFolderId:a,signal:n,teamId:i}=o,s=await this.request.post("/api/drive/new-file",{templatePath:e,filename:t,parentFolderId:a,teamId:i,lang:Xe()},{signal:n});if(!s)throw new f;if(s.status>=500)throw new Error("Server error");if(s.data==="free_user_files_amount_exceed_limit")throw new X("Exceed files limit",null);if(s.status===402&&s.data.message==="exceed_files_limit")throw new X("Exceed files limit",s.data.limit);if(s.status>=400)switch(!0){case s.data==="insufficient_space":throw new xe("Insufficient space");default:throw new re("Create file error")}if(s.isCanceled)throw new Za;const{metadata:l}=s.data;if(!l)throw new re("Create file error");return{metadata:l}},Ei=async function(o){const{templateId:e,templateGroupId:t,filename:a,parentFolderId:n,signal:i,teamId:s,host:l,path:r,lang:p}=o,u=await this.request.post("/api/drive/new-file-from-template",{templateId:e,templateGroupId:t,filename:a,parentFolderId:n,teamId:s,host:l,path:r,lang:p},{signal:i});if(!u)throw new f;if(u.status>=500)throw new Error("Server error");if(u.status===401)throw new fi("Insufficient authority");if(u.data==="free_user_files_amount_exceed_limit")throw new X("Exceed files limit",null);if(u.status===402&&u.data.message==="exceed_files_limit")throw new X("Exceed files limit",u.data.limit);if(u.status>=400)switch(!0){case u.data==="insufficient_space":throw new xe("Insufficient space");default:throw new re("Create file error")}if(u.isCanceled)throw new Za;const{metadata:g}=u.data;if(!g)throw new re("Create file error");return{metadata:g}};class vi{constructor(e){this.request=new Wt({endpoint:(e==null?void 0:e.endpoint)||"",authToken:(e==null?void 0:e.authToken)||"",imRef:e==null?void 0:e.imRef})}async getSlackAccountConnection(e){const t=await this.request.post("/api/integration/slack/connection",e);if(!t)throw new f;return t.data}async createSlackAccountConnection(e){const{slackUserId:t,appId:a,teamId:n}=e,i=await this.request.put("/api/integration/slack/connection",{slackUserId:t,appId:a,teamId:n});if(!i)throw new f;return i.data}async getChurnkeyUserHash(e){const t=await this.request.post("/api/integration/churnkey",{customerId:e});if(!t)throw new f;if(t.status===400)throw new K;if(t.status>=500)throw new le;if(t.status!==200&&t.status!==304)throw new Error("Get churnkey user hash failed");const{userHash:a}=await t.data;return a}async handleZoomLoginSuccessRedirect(e){const{appContext:t}=e,a=await this.request.post("/api/integration/zoom/login-success-redirect",{appContext:t});if(!a)throw new f;const{redirectUrl:n}=await a.data;return n}async fetchXmindTokenForZoomApp(e){const{zoomCtx:t,refId:a}=e,n=await this.request.post("/api/integration/zoom/xmind-token",{zoomCtx:t,refId:a});if(!n)throw new f;const{xmindToken:i}=await n.data;return i}async listSlackTeammates(e){const{teamId:t}=e,a=await this.request.post("/api/integration/slack/teammates",{teamId:t});if(!a)throw new f;if(a.status===400&&a.data==="no_connection_found")throw new to;const{teammates:n}=await a.data;return n}async getSlackOAuthUrl(){const e=await this.request.get("/api/integration/slack/oauth_url");if(!e)throw new f;if(e.status===200){const{url:t}=await e.data;return t}}async getChatgptAppGeneratedContent({id:e}){const t=await this.request.get(`/api/integration/chatgpt-generated-content/${e}`);if(!t)throw new f;if(t.status===200){const{teamId:a,fileId:n,markdown:i,skeleton:s}=await t.data;return{teamId:a,fileId:n,markdown:i,skeleton:s}}}async moveChatgptAppGeneratedContent({id:e,title:t,contentJSON:a}){const n=await this.request.post(`/api/integration/chatgpt-generated-content/${e}`,{title:t,content:a});if(!n)throw new f;if(n.status===402&&n.data.message==="exceed_files_limit")throw new X("Exceed files limit",n.data.limit);if(n.status===200){const{fileId:i}=await n.data;return i}}}function et(){return new vi({authToken:P().authToken,imRef:Xt().getImpactConversionRef()})}const Ie=()=>({configure:async()=>{try{if(logger.log("Configuring Zoom SDK: ",navigator.userAgent),!Qe())return;const n=await Ve.config({capabilities:["openUrl","getAppContext"]});logger.log("Zoom SDK config response:",n),window.embedInZoomApp=n.auth.status==="authorized"&&n.unsupportedApis.length===0}catch(n){logger.error("Failed to configure Zoom SDK: ",n)}},openLoginUrl:async()=>{try{const i=(await Ve.getAppContext()).context,s=await Ve.openUrl({url:`${window.location.origin}/login?zoom-ctx=${i}`});logger.log("Zoom SDK openUrl response:",s)}catch(n){logger.error("Failed to open login URL in Zoom SDK: ",n)}},handleLoginSuccessRedirect:async n=>{const{zoomAppContext:i}=n,s=await et().handleZoomLoginSuccessRedirect({appContext:i});window.location.href=s},fetchXmindTokenForZoomApp:async n=>{const{refId:i}=n,l=(await Ve.getAppContext()).context;return await et().fetchXmindTokenForZoomApp({zoomCtx:l,refId:i})}});class Ai extends si{constructor(){super(),this.globalRoute={name:"i18n",path:`/:lang(${yn.join("|")})?`,children:[{name:"xmind-ai",path:"",redirect:e=>{const{query:t}=e;if(P().isSignedIn)return{name:"home-sections",params:{section:"recents"},query:t};this.openLandingPage(!0)}},{name:"integration-markdown2png-claims",path:"/integrations/markdown2png-claims/:fileId([^/]+)",props:e=>({fileId:e.params.fileId}),beforeEnter:[async()=>(await this.validateSession({isShowLoginDialog:!0,isGotoMainSiteLoginPage:!1}),!0)],component:()=>c(()=>import("./index.chunk.CyvAPFyi.js"),__vite__mapDeps([0,1,2,3,4,5]))},{name:"integrations",path:"integrations",children:[null,{name:"ai-templates",path:"ai-templates",props:e=>({templateId:e.query.template,lang:e.query.lang}),beforeEnter:[()=>{var e;document.documentElement.style.setProperty("--uk-global-background","rgba(0, 0, 0, 0)"),j().setAppearance("default"),(e=window.parent)==null||e.postMessage({type:"loaded"},"*")}],component:()=>c(()=>import("./ai-templates.chunk.BFrEhymc.js"),__vite__mapDeps([0,1,2,3,4,5]))},{name:"ai-templates-generator",path:"ai-templates-generator",props:e=>({groupId:e.query.groupId,lang:e.query.lang}),beforeEnter:[()=>{var e;document.documentElement.style.setProperty("--uk-global-background","rgba(0, 0, 0, 0)"),j().setAppearance("default"),(e=window.parent)==null||e.postMessage({type:"loaded"},"*")}],component:()=>c(()=>import("./generator-embed.chunk.C01mP-i_.js"),__vite__mapDeps([0,1,2,6]))},{name:"converter",path:"converter",children:[{name:"markdown",path:"markdown/:taskId([^/]+)",props:e=>({taskId:e.params.taskId}),component:()=>c(()=>import("./markdown.chunk.BLI6uCvM.js"),__vite__mapDeps([0,1]))},{name:"markdown-editor",path:"markdown-editor/:taskId([^/]+)",props:e=>({taskId:e.params.taskId}),beforeEnter:[()=>{j().setAppearance("default")}],component:()=>c(()=>import("./markdown-editor.chunk.B6ETAyX8.js"),__vite__mapDeps([0,1,2,3,4,5,7]))},{name:"opml",path:"opml/:taskId([^/]+)",props:e=>({taskId:e.params.taskId}),component:()=>c(()=>import("./opml.chunk.LyZ34xQK.js"),__vite__mapDeps([0,1]))},{name:"opml-editor",path:"opml-editor/:taskId([^/]+)",props:e=>({taskId:e.params.taskId}),beforeEnter:[()=>{j().setAppearance("default")}],component:()=>c(()=>import("./opml-editor.chunk.TNkOr1qP.js"),__vite__mapDeps([0,1,2,3,4,5,8]))},{name:"docx",path:"docx/:taskId([^/]+)",props:e=>({taskId:e.params.taskId}),component:()=>c(()=>import("./docx.chunk.By2XOBzf.js"),__vite__mapDeps([0,1]))},{name:"docx-editor",path:"docx-editor/:taskId([^/]+)",props:e=>({taskId:e.params.taskId}),beforeEnter:[()=>{j().setAppearance("default")}],component:()=>c(()=>import("./docx-editor.chunk.CE-wiM-O.js"),__vite__mapDeps([0,1,2,3,4,5,9]))},{name:"textbundle",path:"textbundle/:taskId([^/]+)",props:e=>({taskId:e.params.taskId}),component:()=>c(()=>import("./textbundle.chunk.Y3hwkZuP.js"),__vite__mapDeps([0,1]))},{name:"textbundle-editor",path:"textbundle-editor/:taskId([^/]+)",props:e=>({taskId:e.params.taskId}),beforeEnter:[()=>{j().setAppearance("default")}],component:()=>c(()=>import("./textbundle-editor.chunk.C5t7PMxo.js"),__vite__mapDeps([0,1,2,3,4,5,10]))}]},{name:"uploader",path:"upload-file/:taskId([^/]+)",beforeEnter:[()=>{document.documentElement.style.setProperty("--uk-global-background","rgba(0, 0, 0, 0)"),j().setAppearance("default")},async()=>(await this.validateSession({isShowLoginDialog:!0,isGotoMainSiteLoginPage:!1,isReloadAfterLogin:!1}),!0)],props:e=>({taskId:e.params.taskId,lang:e.query.lang}),component:()=>c(()=>import("./uploader.chunk.C2C7wO3H.js"),__vite__mapDeps([0,1,2,3,4,5]))},{name:"slack",path:"slack",children:[{name:"connect",path:"connect",props:e=>({userId:e.query.uid,appId:e.query.aid,teamId:e.query.tid,redirectUrl:e.query.redirect_url}),component:()=>c(()=>import("./index.chunk.DO1gOxXH.js"),__vite__mapDeps([0,1,2,3,4,5]))}].filter(Boolean)},{name:"zoom",path:"zoom",children:[{name:"zoom-login-waiting",path:"login-waiting",component:()=>c(()=>import("./login-waiting.chunk.Dx59RVPh.js"),__vite__mapDeps([0,1,2,3,4,5]))}].filter(Boolean)},{name:"main-site-map-share",path:"map-share",props:e=>({shareId:e.query.share_id,mapifyShareId:e.query.mapify_share_id,filename:e.query.filename}),beforeEnter:[async()=>(await this.validateSession({isShowLoginDialog:!0,isGotoMainSiteLoginPage:!1}),!0)],component:()=>c(()=>import("./main-site-map-share.chunk.DPnJiPxH.js"),__vite__mapDeps([0,1,2,3,4,5]))}].filter(Boolean)},{name:"login",path:"login",beforeEnter:[async(e,t,a)=>{if(Qe())return await Ie().configure(),await Ie().openLoginUrl(),a({name:"zoom-login-waiting"});if(e.query.error==="account-region-unsupported"){const{toastActions:n}=await c(async()=>{const{toastActions:i}=await import("./vendor-mathjax.chunk.DhpPXkUG.js").then(s=>s.d4);return{toastActions:i}},__vite__mapDeps([0,1]));n.show({message:"暂不支持 Xmind 中国大陆账号登录，请注册 Xmind 全球账号。",topic:"failed"}),a({name:"login",replace:!0})}return a()},async(e,t,a)=>{if(P().isSignedIn){if(e.query["zoom-ctx"]){const n=e.query["zoom-ctx"];await Ie().handleLoginSuccessRedirect({zoomAppContext:n})}a({name:"home",replace:!0})}a()}],component:()=>c(()=>import("./index.chunk.BABAtd6J.js"),__vite__mapDeps([0,1,2,11,12,13,3,14,4,5]))},{name:"complete-information",path:"complete-information",component:()=>c(()=>import("./complete-information.chunk.BQQ2NuvX.js"),__vite__mapDeps([0,1,11,15]))},{name:"home",path:"home",redirect:e=>{const{query:t}=e;return{name:"home-sections",params:{section:"recents"},query:t}},children:[{name:"home-sections",path:`:section(${In.join("|")})/:pathMatch(.*)*`,beforeEnter:[async(e,t,a)=>{if(e.query["zoom-ref-id"]){const n=e.query["zoom-ref-id"];await Ie().configure();const i=await Ie().fetchXmindTokenForZoomApp({refId:n});return i&&await P().loginInZoomApp({xmindToken:i}),a({name:"home-sections",params:{section:"recents"}})}a()},()=>(this.validateSession({isShowLoginDialog:!0}),!0)],component:()=>c(()=>import("./app-home.chunk.BgHwOQmI.js").then(e=>e.r),__vite__mapDeps([0,1,2,16,3,4,5,17,18]))}]},{name:"whats-new",path:"xmind-ai-whats-new/:version([^/]+)",props:e=>({version:e.params.version}),component:()=>c(()=>import("./index.chunk.LwbHkRqU.js"),__vite__mapDeps([0]))},{name:"editor-next-cloud-drive",path:"cloud-drive/:cacheId([^/]+)",props:e=>({cacheId:e.params.cacheId}),beforeEnter:[()=>(this.validateSession({isShowLoginDialog:!0}),!0)],component:()=>c(()=>import("./index.chunk.CMQCJRbn.js").then(e=>e.i),__vite__mapDeps([0,1,2,19,20,3,21,4,5,16,22,23,24,25,26,27,28,29,30,31,32]))},{name:"editor-next-local",path:"local/:cacheId([^/]+)",props:e=>({cacheId:e.params.cacheId}),beforeEnter:[()=>(this.validateSession(),!0)],component:()=>c(()=>import("./index.chunk.CMQCJRbn.js").then(e=>e.i),__vite__mapDeps([0,1,2,19,20,3,21,4,5,16,22,23,24,25,26,27,28,29,30,31,32]))},{name:"editor-next-share",path:"share/:fileId([^/]{8})",props:e=>({fileId:e.params.fileId,sheetId:e.query["sheet-id"],threadId:e.query["thread-id"],actionId:e.query.action_id}),beforeEnter:[async(e,t,a)=>{const n=e.params.fileId;return na()?a({name:"editor-next-xmind-drive-embed",params:{fileId:n},query:e.query,replace:!0}):(e.query.invite?await this.validateSession({isShowLoginDialog:!0}):this.validateSession(),a())}],component:()=>c(()=>import("./editor-view.chunk.DxIEDkwD.js").then(e=>e.j),__vite__mapDeps([0,1,2,16,3,4,5,33,34,23,35,36,37]))},{name:"editor-next-xmind-drive",path:":fileId([^/]{8})",props:e=>({fileId:e.params.fileId,sheetId:e.query["sheet-id"],threadId:e.query["thread-id"],actionId:e.query.action_id}),beforeEnter:[async(e,t,a)=>{const n=e.params.fileId;return na()?a({name:"editor-next-xmind-drive-embed",params:{fileId:n},query:e.query,replace:!0}):(this.validateSession(),a())}],component:()=>c(()=>import("./editor-view.chunk.DxIEDkwD.js").then(e=>e.j),__vite__mapDeps([0,1,2,16,3,4,5,33,34,23,35,36,37]))},{name:"brainstorm",path:"brainstorm/:fileId([^/]+)",props:e=>({fileId:e.params.fileId}),beforeEnter:[async(e,t,a)=>{this.validateSession(),a()}],component:()=>c(()=>import("./brainstorm.chunk.CHNQESFG.js"),__vite__mapDeps([0,1,2,27,19,16,3,4,5,38]))},{name:"editor-next-xmind-drive-embed",path:"embed/:fileId([^/]+)",props:e=>({fileId:e.params.fileId,sheetId:e.query["sheet-id"]}),component:()=>c(()=>import("./embed-view.chunk.B2_C-PAY.js"),__vite__mapDeps([0,1,2,16,3,4,5,39,27,30,40,20,21,41]))},{name:"team-invite",path:"team_invite/:LinkKey([^/]+)",props:e=>({linkKey:e.params.LinkKey}),component:()=>c(()=>import("./team-invite.chunk.DVH9c2vT.js"),__vite__mapDeps([0,1,2,3,4,5]))},{name:"space-invite",path:"space_invite/:LinkKey([^/]+)",props:e=>({linkKey:e.params.LinkKey}),component:()=>c(()=>import("./space-invite.chunk.DhbZPlnP.js"),__vite__mapDeps([0,1,2,3,4,5]))},{name:"url-action",path:"action",component:()=>c(()=>import("./action.chunk.B_5z3gcX.js"),__vite__mapDeps([0,1,2,3,4,5]))},{name:"jumpto",path:"jumpto",children:[{name:"team",path:"team/:teamId([^/]+)",beforeEnter:[async()=>(await this.validateSession({isShowLoginDialog:!0,isGotoMainSiteLoginPage:!1}),!0)],component:()=>c(()=>import("./jumpto-team.chunk.CBNNhlv2.js"),__vite__mapDeps([0,1,2,3,4,5]))},{name:"jumpto-space",path:"space",props:e=>({teamId:e.query.teamid,spaceId:e.query.spaceid,type:e.query.type,userId:e.query.uid}),component:()=>c(()=>import("./jumpto-space.chunk.CD_zCjrH.js"),__vite__mapDeps([0,1]))},{name:"file",path:"file/:fileId([^/]+)",component:()=>c(()=>import("./jumpto-file.chunk.BSeOXdLu.js"),__vite__mapDeps([0,1,2,16,3,4,5]))},{name:"sso",path:"sso/:pathMatch(.*)*",component:()=>c(()=>import("./jumpto-sso.chunk.eN0hSEny.js"),__vite__mapDeps([0,1]))},{name:"chatgpt-generated-content",path:"chatgpt-generated-content/:id([^/]+)",beforeEnter:[async()=>(await this.validateSession({isShowLoginDialog:!0,isGotoMainSiteLoginPage:!1}),!0)],component:()=>c(()=>import("./jumpto-chatgpt-generated-content.chunk.DczFqHJ0.js"),__vite__mapDeps([0,1,2,3,4,5]))}]},{name:"oauth-consent",path:"oauth/consent",beforeEnter:[async()=>(await this.validateSession({isShowLoginDialog:!0,isGotoMainSiteLoginPage:!1}),!0)],component:()=>c(()=>import("./index.chunk.DRQC0NAO.js"),__vite__mapDeps([0,1]))},{name:"default",path:":pathMatch(.*)*",redirect:()=>({path:"/"})},{name:"payment",path:"buy/order",props:e=>({orderHash:e.query.no,version:e.query.version,duration:e.query.duration,tryItFree:e.query.tryItFree,xmindId:e.query.xmindId,coupon:e.query.coupon,teamId:e.query.teamId}),component:()=>c(()=>import("./index.chunk.bWQ0GtyK.js"),__vite__mapDeps([0,1,2,42,3,43,4,5]))}]}}async initRoutes(){super.initRoutes(),this.vueRouter.addRoute(this.globalRoute)}async gotoBrainstormingFile(e){await this.vueRouter.push({name:"brainstorm",params:{fileId:e.fileId}})}}class yi{constructor(){this.timer=setInterval(this.refresh.bind(this),100),this.notifications=G([]),document.readyState!=="loading"?this.initMountNotificationContainer():document.addEventListener("DOMContentLoaded",()=>{this.initMountNotificationContainer()})}initMountNotificationContainer(){const e=Gt(y(()=>c(()=>import("./container.chunk.DpWALp9S.js"),__vite__mapDeps([0,44]))),{propsData:{onHide:t=>{const{notification:a,isImmediate:n}=t;this.hide({id:a.id,isImmediate:n})},notifications:this.notifications}});if("app"in e)this.app=e.app;else throw new Error("Fail to initialize notification container.")}dispose(){var e;(e=this.app)==null||e.unmount(),window.clearInterval(this.timer)}refresh(){this.notifications.value.some(e=>e.expireTime&&e.expireTime<Date.now())&&(this.notifications.value=this.notifications.value.filter(e=>!(e.expireTime&&e.expireTime<Date.now())))}show(e){const t={id:Ma(),...e};return this.notifications.value.push(t),{id:t.id,hide:a=>{const n=this.notifications.value.findIndex(i=>i.id===t.id);n!==-1&&this.notifications.value.splice(n,1)}}}hide(e){const{id:t}=e,a=this.notifications.value.findIndex(n=>n.id===t);a!==-1&&this.notifications.value.splice(a,1)}}const ie=new yi,F=(o,e=5e3,t=!0)=>ie.show({type:"closable",params:{message:o,isClosable:t},expireTime:Date.now()+e}),se=(o,e=5e3,t=!0)=>ie.show({type:"closable",params:{message:o,isClosable:t},expireTime:Date.now()+e}),Ii={authSessionExpired(){return F("Current session expired!")},networkError(){return F("No Internet connection, please check your network settings.")},networkErrorReload(){return F("You are offline. Please try to reload this page.",Number.MAX_SAFE_INTEGER,!1)},listFileFailedError(o,e){return F(`List user file failed for ${e} - ${o}, please try again later.`,8e3)},renameFileFailed(){return F("Unable to rename the file.",8e3)},renameFileFailedTooManyRequest(){return F("too many attempts, please try again later.",8e3)},noMatchThirdPartyAccount(){return F("No match third-party account for current file!")},exportXMindFileFailed(){return F("Unable to export XMind file.")},thirdPartyAccountAccessDenied(o,e){return F(`Xmind.works can't connect with ${o} - ${e}, please remove and reconnect this account in Connected Account.`,Number.MAX_SAFE_INTEGER)},openFileFailed(){return F("This file failed to open.")},saveSucceed(){return se("Successful Saved")},saveNewFileSucceed(){return se("Successful Saved as a New File")},manuallySaveFileSucceed(){return se("Xmind.works auto-saves your work",3e3)},saveFileFailed(){return F("Failed to save. You can download this file into your device.")},layoutEngineVersionUpdated(){return se("The map style has been updated for your current version of Xmind.")},dropFileToOpenUnsupportedFileType(){return ie.show({type:"closable",params:{message:"Only supports uploading Xmind files.",isClosable:!0}})},iframeBlockedByBrowser(){return F("The popup authorization window is blocked by the browser, please retry after allow the popup window permission.",3e4)},noAccess(){return F("Unable to open the file because xmind.works cannot access this file.")},shareFileUploadFailed(){return F("Upload file failed.")},shareFileViewerWaitingWithFilename(o){const{filename:e,onOpen:t,onIgnore:a}=o,{hide:n}=ie.show({type:"two-options",params:{message:`${e}.xmind`,secondaryMessage:"Viewers are waiting to be approved.",button01Text:"Open",button01Action:()=>{t(),n()},button02Text:"Ignore",button02Action:()=>{a(),n()}}});return{hide:n}},shareFileViewerWaitingWithViewerAmount(o){const{viewerAmount:e,onOpen:t,onIgnore:a}=o,{hide:n}=ie.show({type:"two-options",params:{message:`${e} ${e===1?"viewer is":"viewers are"} waiting to be approved.`,button01Text:"Open",button01Action:()=>{t(),n()},button02Text:"Ignore",button02Action:()=>{a(),n()}}});return{hide:n}},sharingFileEditorAccessAvailable(o){const{onRequestEditorAccess:e}=o,{hide:t}=ie.show({type:"two-options",params:{message:'Click the "Edit" button to get editing permissions for the file.',button01Text:"Edit",button01Action:()=>{e(),t()},button02Text:"Ignore",button02Action:()=>{t()}}});return{hide:t}},show(o){const{timeout:e=5e3,message:t,isClosable:a=!0}=o,{hide:n}=ie.show({type:"closable",params:{message:t,isClosable:a},expireTime:Date.now()+e});return{hide:n}},showUploaderProgress(o){const{uploadingTasksCount:e,onOpenUploadDialog:t}=o,{hide:a}=ie.show({type:"two-options",params:{message:d("Uploading $1 to Xmind.works...",e>1?`${e} ${d("files")}`:d("1 file")),button01Text:d("Details"),button01Action:()=>{t()}}});return{hide:()=>a(!0)}},showUploadComplete(o){const{succeedTaskCount:e,totalTaskCount:t,onOpenUploadDialog:a}=o,n=t-e,i=d("Successfully uploaded $1 to Xmind.works.",`${e} ${e>1?d("files"):d("file")}`),s=n>0?d(" $1 upload failed.",`${n} ${n>1?d("files"):d("file")}`):"",{hide:l}=ie.show({type:"two-options",expireTime:Number.MAX_SAFE_INTEGER,params:{message:i+s,button01Text:d("Details"),button01Action:()=>{a()},button02Text:d("Close"),button02Action:()=>{l(!0)}}});return{hide:()=>l(!0)}},notifyCollaborativeOperationError(o,e){switch(o){case"mutateProperty:globalFontFamily":return F("You can't change global font when child topics are in editing mode.");case"mutateProperty:autoBalancedMapEnabled":case"mutateProperty:compactLayoutEnabled":case"mutateProperty:justifyTopicAlignmentEnabled":return F("You can't change map style when child topics are in editing mode.");case"mutateProperty:mainBranchFreePositioningEnabled":case"mutateProperty:floatingTopicFreePositioningEnabled":case"mutateProperty:topicOverlappingEnabled":return F("You can't change advanced layout when child topics are in editing mode.");case"mutate:changeSkeletonTheme":return F("You can't change skeleton when child topics are in editing mode.");case"mutate:updateStyle":case"mutate:updateStyleToSameLevel":return F("You can't update style when child topics are in editing mode.");case"mutateProperty:majorStructureClass":case"mutateProperty:minorStructureClass":return F("You can't change structure when child topics are in editing mode.");case"mutate:delete":case"mutate:deleteTopicNodeOnly":if(e.scope==="ancestor")return F("You can't delete parent topic when child topics are in editing mode.");if(e.scope==="connected")return F(`You can't delete ${e.targetTopicType} when related ${e.relatedTopicType} is in editing mode.`);break;case"cut":if(e.scope==="ancestor")return F("You can't cut parent topic when child topics are in editing mode.");if(e.scope==="connected")return F(`You can't cut ${e.targetTopicType} when related ${e.relatedTopicType} is in editing mode.`);break;case"mutateEditor:deleteSheet":return F("You can't delete sheet when child topics are in editing mode.");case"mutate:removeMarker":if(e.scope==="legend")return F("You can't delete marker when legend is in editing mode.");break;case"mutate:foldBranch":case"mutate:foldAllDescendantBranche":return F("You can't fold when child topics are in editing mode.")}},notifyCollaborativeOffline(o){const{onReload:e}=o,{hide:t}=ie.show({type:"two-options",params:{message:d("You're offline. Please try to switch networks and reload the page"),button01Text:d("Reload"),button01Action:()=>{e()},button02Text:d("Ignore"),button02Action:()=>{ao("ignore"),t()}}});return{hide:()=>t()}},collaborativeInvitationSent(){return se(d("Invitation sent"))},collaborativeInvitationSendError(){return F(d("Server error, please try again later."))},inviteLinkCopied(){return se(d("Invite link copied"))},collaborativeShareLinkCopied(){return se(d("Share link copied"))},collaborativePasswordSet(){return se(d("Password set"))},collaborativeConnectionRestored(){return se(d("Connection restored"))},driveInsufficientSpace(){return F(d("Failed. Your storage limit has been reached."))},snapshotRestoreFailureWhenCollaborativeEdit(){return F(d("You can't restore history version when topics are in editing mode."))}},Ci=y(()=>c(()=>import("./vendor-mathjax.chunk.DhpPXkUG.js").then(o=>o.d2),__vite__mapDeps([0,1]))),bi=y(()=>c(()=>import("./ai-button.chunk.CrXXMCNI.js"),__vite__mapDeps([0,1,45]))),Di=y(()=>c(()=>import("./badge.chunk.0--a_qAl.js"),[])),Ti=y(()=>c(()=>import("./checkbox.chunk.B5gnYGm3.js"),__vite__mapDeps([0,46]))),Si=y(()=>c(()=>import("./close.chunk.CZ7b7_Lg.js"),__vite__mapDeps([0,1]))),Ri=y(()=>c(()=>import("./vendor-mathjax.chunk.DhpPXkUG.js").then(o=>o.d1),__vite__mapDeps([0,1]))),Pi=y(()=>c(()=>import("./image-container.chunk.BwA-jRFy.js"),__vite__mapDeps([0,47]))),Oi=y(()=>c(()=>import("./input.chunk.Bm6kf-Q7.js"),__vite__mapDeps([0,36]))),Fi=y(()=>c(()=>import("./vendor-fw-icon.chunk.Bi60zEkT.js").then(o=>o.bQ),__vite__mapDeps([0]))),xi=y(()=>c(()=>import("./select.chunk.DtT3x5gN.js"),__vite__mapDeps([0,1,48]))),Li=y(()=>c(()=>import("./table.chunk.DBfAsZHx.js"),[])),ki=y(()=>c(()=>import("./textarea.chunk.C2wlDyX9.js"),__vite__mapDeps([0,49]))),Ni=y(()=>c(()=>import("./menu-button.chunk.12W7-Fxy.js"),__vite__mapDeps([0,1]))),Vi=y(()=>c(()=>import("./toggle.chunk.D42br6Zp.js"),__vite__mapDeps([0,50]))),Bi=y(()=>c(()=>import("./frame-bar.chunk.8j7-dLNo.js"),__vite__mapDeps([0]))),Mi=y(()=>c(()=>import("./tab.chunk.ZjPTeJk1.js"),__vite__mapDeps([0,1,51]))),Ui=y(()=>c(()=>import("./vendor-mathjax.chunk.DhpPXkUG.js").then(o=>o.d3),__vite__mapDeps([0,1]))),qi=y(()=>c(()=>import("./draggable-list.chunk.Bv36Jj5E.js"),__vite__mapDeps([0,1,52]))),Hi=y(()=>c(()=>import("./capsule.chunk.BQRyniMz.js"),__vite__mapDeps([0]))),$i=y(()=>c(()=>import("./radio.chunk.BJ-2HsIs.js"),__vite__mapDeps([0,53]))),Wi=y(()=>c(()=>import("./skeleton-animation.chunk.KZzcJBF2.js"),__vite__mapDeps([0,17]))),Xi=y(()=>c(()=>import("./slider-input.chunk.EqyyS4AO.js"),__vite__mapDeps([0,54]))),Gi=y(()=>c(()=>import("./responsive-wrapper.chunk.DyGpP_Nr.js"),__vite__mapDeps([0,1]))),ji=y(()=>c(()=>import("./svg-image.chunk.ByvEsIAM.js"),__vite__mapDeps([0,1]))),zi=y(()=>c(()=>import("./empty-user-profile-icon.chunk.Bosfib0K.js"),[])),Ki=y(()=>c(()=>import("./vendor-fw-icon.chunk.Bi60zEkT.js").then(o=>o.bP),__vite__mapDeps([0]))),Yi=y(()=>c(()=>import("./tile-button.chunk.Rlyc-X1t.js"),__vite__mapDeps([0,1,55]))),Zi=y(()=>c(()=>import("./checkbox-item.chunk.DP2wiTDR.js"),__vite__mapDeps([0,46,1]))),Qi=y(()=>c(()=>import("./switcher.chunk.CmzYF8g6.js"),__vite__mapDeps([0,56]))),Ji=y(()=>c(()=>import("./loading.chunk.D3-NEEzP.js"),__vite__mapDeps([0,1,23]))),er=y(()=>c(()=>import("./member-item.chunk.PFdB9lys.js"),[])),tr=y(()=>c(()=>import("./plan-badge.chunk.CN8A9qOb.js"),__vite__mapDeps([0]))),ar=y(()=>c(()=>import("./menu-icon-button.chunk.DRWOZRMi.js"),__vite__mapDeps([0,1]))),nr=y(()=>c(()=>import("./menu-popover.chunk.DRM23_VW.js").then(o=>o.m),__vite__mapDeps([0,1,34]))),or=y(()=>c(()=>import("./accordion.chunk.BymvOhE4.js"),__vite__mapDeps([0]))),Qa={install(o){o.component("FwButton",Ci),o.component("FwAiButton",bi),o.component("FwBadge",Di),o.component("FwCheckbox",Ti),o.component("FwClose",Si),o.component("FwDivider",Ri),o.component("FwImageContainer",Pi),o.component("FwInput",Oi),o.component("FwPopover",Fi),o.component("FwSelect",xi),o.component("FwTable",Li),o.component("FwTextarea",ki),o.component("FwMenuButton",Ni),o.component("FwToggle",Vi),o.component("FwFrameBar",Bi),o.component("FwTab",Mi),o.component("FwTooltip",Ui),o.component("FwDraggableList",qi),o.component("FwCapsule",Hi),o.component("FwRadio",$i),o.component("FwSkeletonAnimation",Wi),o.component("FwSliderInput",Xi),o.component("FwResponsiveWrapper",Gi),o.component("FwSvgImage",ji),o.component("FwEmptyUserProfileIcon",zi),o.component("FwIcon",Ki),o.component("FwTileButton",Yi),o.component("FwCheckboxItem",Zi),o.component("FwSwitcher",Qi),o.component("FwLoading",Ji),o.component("FwMemberItem",er),o.component("FwPlanBadge",tr),o.component("FwMenuIconButton",ar),o.component("FwMenuPopover",nr),o.component("FwAccordion",or)}};let Ce=null;const ke=(o,e)=>{Ce||(Ce=document.createElement("div"),Ce.classList.add("fw-overlay-container"),document.body.appendChild(Ce));const t=(e==null?void 0:e.container)||Ce,a=[...(e==null?void 0:e.plugins)||[],...e!=null&&e.isDisableGlobalComponents?[]:[Qa]];return Gt(o,{...e,container:t,plugins:a})},ir=async o=>{const e=y(()=>c(()=>import("./free-trial-push.chunk.SGFBcEaY.js"),__vite__mapDeps([0,1,2,3,57,4,5]))),{heading:t,title:a,image:n,bodyText:i,confirmText:s,triggeredBy:l,onFreeTrialClick:r,onManualClose:p}=o;await ke(e,{flags:[Le.PromiseHook],propsData:{heading:t,title:a,image:n,bodyText:i,confirmText:s,triggeredBy:l,onFreeTrialClick:r,onManualClose:p}})},rr=async o=>{const e=y(()=>c(()=>import("./annual-discount-push.chunk.C4pYkA1A.js"),__vite__mapDeps([0,1,2,58]))),{heading:t,bodyText:a,confirmText:n,onAnnualDiscountClick:i,onManualClose:s}=o;await ke(e,{flags:[Le.PromiseHook],propsData:{heading:t,bodyText:a,confirmText:n,onManualClose:s,onAnnualDiscountClick:i}})},Ja=Symbol("asyncActionLoader"),sr=()=>c(()=>import("./frame-actions.chunk.CFPznTrK.js"),__vite__mapDeps([0,1]));let gt=null;const cr=()=>(gt||(gt=sr()),gt),k=o=>()=>cr().then(e=>e[o]);class lr extends jt{constructor(){super(),this.isDisableDialogAction=!1,this.cloudDrive={uploadFileToCloud:this.defineServiceCreateAction(()=>c(()=>import("./save-to-cloud.chunk.BNV70nb-.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createSaveFileToCloudAction)),saveToCloudByManually:this.defineServiceCreateAction(()=>c(()=>import("./save-to-cloud.chunk.BNV70nb-.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createSaveToCloudByManuallyAction)),saveToCloudByAutomatically:this.defineServiceCreateAction(()=>c(()=>import("./save-to-cloud.chunk.BNV70nb-.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createSaveToCloudByAutomaticallyAction)),openByMeta:this.defineServiceCreateAction(()=>c(()=>import("./open-file.chunk.CS5CdZGp.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createOpenByMetaAction)),openEnclosingFolder:this.defineServiceCreateAction(()=>c(()=>import("./open-enclosing-folder.chunk.DQ-8xOgo.js"),__vite__mapDeps([0,1])).then(r=>r.createOpenEnclosingFolderAction)),rename:this.defineServiceCreateAction(()=>c(()=>import("./rename.chunk.DCMUe6if.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createRenameAction)),remove:this.defineServiceCreateAction(()=>c(()=>import("./remove.chunk.B98jov_8.js"),__vite__mapDeps([0,1])).then(r=>r.createCreateRemoveAction))},this.common={closeEditor:this.defineServiceCreateAction(()=>c(()=>import("./close-editor.chunk.DFLnsdZj.js"),__vite__mapDeps([0,1,2])).then(r=>r.createCloseEditorAction)),openHref:this.defineServiceCreateAction(()=>c(()=>import("./open-href.chunk.DspQNHJO.js"),__vite__mapDeps([0,1])).then(r=>r.createOpenHrefAction)),addLocalImage:this.defineServiceCreateAction(()=>c(()=>import("./add-local-image.chunk.BQ0zPUqn.js"),__vite__mapDeps([0,1])).then(r=>r.createAddLocalImageAction)),addLocalAttachment:this.defineServiceCreateAction(()=>c(()=>import("./add-local-attachment.chunk.BFH2B4xv.js"),__vite__mapDeps([0,1])).then(r=>r.createAddLocalAttachmentAction)),addEquation:this.defineServiceCreateAction(()=>c(()=>import("./add-equation.chunk.CdD3bE8q.js"),__vite__mapDeps([0,1])).then(r=>r.createAddEquationAction)),cloudStorageErrorHandler:this.defineCallableAction(()=>c(()=>import("./cloud-storage-error-handler.chunk.DGOBM5MM.js"),__vite__mapDeps([0,1])).then(r=>r.cloudStorageErrorHandler),!0),printPDF:this.defineServiceCreateAction(()=>c(()=>import("./print-pdf.chunk.DGG-xsZD.js"),__vite__mapDeps([0,1])).then(r=>r.createPrintPDFAction)),exportImage:this.defineServiceCreateAction(()=>c(()=>import("./export-image.chunk.DJ5ySg5m.js"),__vite__mapDeps([0,1])).then(r=>r.createExportImageAction)),toggleBranchOnly:this.defineServiceCreateAction(()=>c(()=>import("./toggle-branch-only.chunk.BG3b6QPd.js"),__vite__mapDeps([0,1])).then(r=>r.createToggleBranchOnlyAction)),openTopicLinkDialog:this.defineServiceCreateAction(()=>c(()=>import("./add-topic-link-dialog.chunk.DaYtTLDi.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createOpenTopicLinkDialogAction))},this.exportAs={exportSVG:this.defineServiceCreateAction(()=>c(()=>import("./export-svg.chunk.BxZBNbIs.js"),__vite__mapDeps([0,1])).then(r=>r.createExportSVGAction)),downloadSVG:this.defineServiceCreateAction(()=>c(()=>import("./download-svg.chunk.CpH-_aeF.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createDownloadSVGAction)),downloadImage:this.defineServiceCreateAction(()=>c(()=>import("./download-image.chunk.BaqJe39u.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createDownloadImageAction)),isSheetSplitAble:this.defineServiceCreateAction(()=>c(()=>import("./smart-split.chunk.C5Y825DE.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createSheetSplitAble)),exportMD:this.defineServiceCreateAction(()=>c(()=>import("./markdown.chunk.D4gknPEs.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createExportMDAction)),exportPDF:this.defineServiceCreateAction(()=>c(()=>import("./pdf.chunk.BXzLUYo3.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createExportPDFAction)),exportWord:this.defineServiceCreateAction(()=>c(()=>import("./word.chunk.Bil830Tv.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createExportWordAction)),exportExcel:this.defineServiceCreateAction(()=>c(()=>import("./excel.chunk.Cy_HSoqP.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createExportExcelAction)),exportPowerPoint:this.defineServiceCreateAction(()=>c(()=>import("./powerpoint.chunk.LZ7DIaIR.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createExportPowerPointAction)),exportOPML:this.defineServiceCreateAction(()=>c(()=>import("./opml.chunk.DJsjCIeP.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createExportOPMLAction)),exportTextBundle:this.defineServiceCreateAction(()=>c(()=>import("./textbundle.chunk.5MBe2cfQ.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createExportTextBundleAction)),exportTaskCSV:this.defineServiceCreateAction(()=>c(()=>import("./task-csv.chunk.DI2RJ9gI.js"),__vite__mapDeps([0,1,33,2,3,4,5])).then(r=>r.createExportTaskCSVAction)),exportTaskICS:this.defineServiceCreateAction(()=>c(()=>import("./export-ics.chunk.BRGVtRJ5.js"),__vite__mapDeps([0,1,33,2,3,4,5])).then(r=>r.createExportTaskICSAction))},this.ui={updateRightBarPanel:this.defineServiceCreateAction(k("createUpdateRightBarPanelAction")),toggleFormatPanel:this.defineServiceCreateAction(k("createToggleFormatPanelAction")),toggleIconPanelTab:this.defineServiceCreateAction(k("createToggleIconPanelAction")),toggleRightPanel:this.defineServiceCreateAction(k("createToggleRightPanelAction")),updateLeftBarPanel:this.defineServiceCreateAction(k("createUpdateLeftBarPanelAction")),toggleLeftPanel:this.defineServiceCreateAction(k("createToggleLeftPanelAction")),updateLeftBarPanelSearchMenu:this.defineServiceCreateAction(k("createUpdateLeftBarPanelSearchMenuAction")),updateLastColorThemeInfo:this.defineServiceCreateAction(k("createUpdateLastColorThemeInfoAction")),updateAIPanel:this.defineServiceCreateAction(k("createUpdateAIPanelAction")),openEquationPopover:this.defineServiceCreateAction(k("createOpenEquationPopoverAction")),openImagePopover:this.defineServiceCreateAction(k("createOpenImagePopoverAction")),openHyperlinkPopover:this.defineServiceCreateAction(k("createOpenHyperlinkPopoverAction")),openLabelPopover:this.defineServiceCreateAction(k("createOpenLabelPopoverAction")),openNotePopover:this.defineServiceCreateAction(k("createOpenNotePopoverAction")),openInformationPopover:this.defineServiceCreateAction(k("createOpenInformationPopoverAction")),openMarkerPopover:this.defineServiceCreateAction(k("createOpenMarkerPopoverAction")),openCommentThreadPreview:this.defineServiceCreateAction(k("createOpenCommentThreadPreviewAction")),openCommentThreadPopup:this.defineServiceCreateAction(k("createOpenCommentThreadPopupAction")),openGrowIdeasGenerateOnDemand:this.defineServiceCreateAction(k("createOpenGrowIdeasGenerateOnDemandAction")),openGrowProjectPlanOnDemand:this.defineServiceCreateAction(k("createOpenGrowProjectPlanOnDemandAction")),openOrganizeOnDemand:this.defineServiceCreateAction(k("createOpenOrganizeOnDemandAction")),setDownloadState:this.defineServiceCreateAction(k("createSetDownloadStateAction")),setCreatingState:this.defineServiceCreateAction(k("createSetCreatingStateAction")),setRestoringState:this.defineServiceCreateAction(k("createSetRestoringStateAction")),setLoadingLocalFileState:this.defineServiceCreateAction(k("createSetLoadingLocalFileStateAction")),openAudioBar:this.defineServiceCreateAction(k("createOpenAudioBarAction")),setNotesLinkBoxVisible:this.defineServiceCreateAction(k("createSetNotesLinkBoxVisibleAction")),openGridPopover:this.defineServiceCreateAction(k("createOpenGridPopoverAction")),notifications:Ii,toasts:H,openFreeTrialPush:ir,openAnnualDiscountPush:rr},this.account={refreshThirdPartyAccountAccess:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.refreshThirdPartyAccountAccess),!0),getThirdPartyAccountAccess:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.getThirdPartyAccountAccess),!0),renewAccessToken:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.renewAccessToken),!0),revokeThirdPartyAccount:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.revokeThirdPartyAccount),!0),gotoDropboxOAuth:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.gotoDropboxOAuth)),gotoDropboxScopedOAuth:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.gotoDropboxScopedOAuth)),gotoGoogleDriveOAuth:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.gotoGoogleDriveOAuth)),gotoGoogleDriveScopedOAuth:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.gotoGoogleDriveScopedOAuth)),gotoOnedriveOAuth:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.gotoOnedriveOAuth)),gotoOnedriveScopedOAuth:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.gotoOnedriveScopedOAuth)),deleteRecentFilesRecords:this.defineCallableAction(()=>c(()=>import("./account-actions.chunk.jqEO4dCS.js"),__vite__mapDeps([0,1])).then(r=>r.deleteRecentFilesRecords))},this.lowFrequencyDialog={openUploadConflictDialog:this.defineCallableAction(()=>c(()=>import("./upload-conflict-dialog.chunk.CvM34qaJ.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openUploadConflictDialog),!0),openCreateSharingFileDialog:this.defineCallableAction(()=>c(()=>import("./create-sharing-file-dialog.chunk.CReeE-9r.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openCreateSharingFileDialog),!0),openNonexistentCloudStorageDialog:this.defineCallableAction(()=>c(()=>import("./nonexistent-cloud-storage-dialog.chunk.AzpEgYMl.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openNonexistentCloudStorageDialog),!0),openPitchTrialDialog:this.defineCallableAction(()=>c(()=>import("./pitch-trial-dialog.chunk.BvAboZVO.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openPitchTrialDialog),!0),openAiAddonPaymentDialog:this.defineCallableAction(()=>c(()=>import("./ai-request-order-dialog.chunk.D13NVEBD.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openAiAddonPaymentDialog)),openTeamRenameDialog:this.defineCallableAction(()=>c(()=>import("./team-rename-dialog.chunk.BL7gR1R_.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openTeamRenameDialog),!0),openChangeTeamSeatsDialog:this.defineCallableAction(()=>c(()=>import("./change-team-seats.chunk.LYs_iokG.js"),__vite__mapDeps([0,1,11,59,2,3,4,5])).then(r=>r.openChangeTeamSeatsDialog),!0),openTeamOrSpaceDeleteDialog:this.defineCallableAction(()=>c(()=>import("./team-space-delete-dialog.chunk.B1OgnzW6.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openTeamOrSpaceDeleteDialog)),openTeamDeletionFeedbackDialog:this.defineCallableAction(()=>c(()=>import("./team-deletion-feedback-dialog.chunk.BEb9sKoO.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openTeamDeletionFeedbackDialog)),openTeamFeedbackSuccessDialog:this.defineCallableAction(()=>c(()=>import("./team-feedback-success-dialog.chunk.Bq43pUwA.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openTeamFeedbackSuccessDialog)),openDeleteSpaceWarningDialog:this.defineCallableAction(()=>c(()=>import("./delete-space-warning.chunk.reZX-CDl.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openDeleteSpaceWarningDialog)),openSmartSaverWeekDialog:this.defineCallableAction(()=>c(()=>import("./smart-save-week-dialog.chunk.CY6QKYW3.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openSmartSaveWeekDialog)),openReleaseNotesDialog:this.defineCallableAction(()=>c(()=>import("./release-notes-dialog.chunk.BnhTgfm-.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openReleaseNotesDialog),!0),openSaveDialog:this.defineCallableAction(()=>c(()=>import("./save-dialog.chunk.ONER69na.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openSaveDialog),!0),openShortcutDialog:this.defineCallableAction(()=>c(()=>import("./shortcut-dialog.chunk.Dg7yXfOJ.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openShortcutDialog),!0),openDownloadPNGErrorDialog:this.defineCallableAction(()=>c(()=>import("./download-png-error-dialog.chunk.Bi7zcEPB.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openDownloadPNGErrorDialog),!0),openTaskFeatureDialog:this.defineCallableAction(()=>c(()=>import("./task-feature-dialog.chunk.fp7k3ozW.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openTaskFeatureDialog)),openImageCropperDialog:this.defineCallableAction(()=>c(()=>import("./image-cropper.chunk.kKn-0vj-.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openImageCropperDialog)),openConnectDialog:this.defineCallableAction(()=>c(()=>import("./connect-dialog.chunk.C5IRELpt.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openConnectDialog),!0),openNewConnectDialog:this.defineCallableAction(()=>c(()=>import("./new-connect-dialog.chunk.C5dZJR1h.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openNewConnectDialog),!0),openConnectAccessTypeDialog:this.defineCallableAction(()=>c(()=>import("./connect-access-type-dialog.chunk.4jMg8qs0.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openConnectAccessTypeDialog),!0),openUploadFileLockedDialog:this.defineCallableAction(()=>c(()=>import("./upload-file-locked-dialog.chunk.kzTl0aJw.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openUploadFileLockedDialog),!0),openFeedbackDialog:this.defineCallableAction(()=>c(()=>import("./feedback-dialog.chunk.DdlTlg-t.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openFeedbackDialog)),openSmartSaverWinbackDialog:this.defineCallableAction(()=>c(()=>import("./smart-save-winback-dialog.chunk.DOAmHNG-.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openSmartSaveWinbackDialog)),openNewFileWithAITemplateDialog:this.defineCallableAction(()=>c(()=>import("./new-file-with-ai-template-dialog.chunk.Bc-7BR3a.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openNewFileWithAITemplateDialog))},this.homeDialog={openRenameDialog:this.defineCallableAction(()=>c(()=>import("./rename-dialog.chunk.DRdsr9zJ.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openRenameDialog),!0),openDriveImportFileDialog:this.defineCallableAction(()=>c(()=>import("./drive-import-dialog.chunk.Dz-n1Z-o.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openDriveImportFileDialog)),openImportFileDialog:this.defineCallableAction(()=>c(()=>import("./import-file-dialog.chunk.CPV-gKLJ.js"),__vite__mapDeps([0,1,2,16,3,4,5])).then(r=>r.openImportFileDialog),!0),openSharingAccessPasswordDialog:this.defineCallableAction(()=>c(()=>import("./access-password-sharing-file-dialog.chunk.BjHSSiQl.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openAccessPasswordSharingFileDialog),!0),openRenameSharingFileDialog:this.defineCallableAction(()=>c(()=>import("./rename-sharing-file-dialog.chunk.mkffx2oj.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openRenameSharingFileDialog),!0),openRetentionSurveyDialog:this.defineCallableAction(()=>c(()=>import("./retention-survey-dialog.chunk.BcSocetp.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openRetentionSurveyDialog)),openLimitPreReminderDialog:this.defineCallableAction(()=>c(()=>import("./limit-pre-reminder-dialog.chunk.DbpNLnRl.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openLimitPreReminderDialog)),openChooseATemplateDialog:this.defineCallableAction(()=>c(()=>import("./choose-a-template-dialog.chunk.DVuUB8gD.js"),__vite__mapDeps([0,1,2,16,3,4,5])).then(r=>r.openChooseATemplateDialog)),openWhatsNewDialog:this.defineCallableAction(()=>c(()=>import("./whats-new-dialog.chunk.B6xj9tYf.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openWhatsNewDialog)),openUserProfileDialog:this.defineCallableAction(()=>c(()=>import("./user-profile.chunk.D9SoX1Q3.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openUserProfileDialog)),openTeamProfileDialog:this.defineCallableAction(()=>c(()=>import("./team-profile.chunk.Ba92nK9R.js"),__vite__mapDeps([0,1,2,16,3,4,5])).then(r=>r.openTeamProfileDialog)),openPaymentDialog:this.defineCallableAction(()=>c(()=>import("./payment-dialog.chunk.C4IkkoMP.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openPaymentDialog)),openPlanUpgradePromptDialog:this.defineCallableAction(()=>c(()=>import("./plan-upgrade-prompt-dialog.chunk.CjSRuRj4.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openPlanUpgradePromptDialog)),openChangePaymentMethodDialog:this.defineCallableAction(()=>c(()=>import("./change-payment-method.chunk.DhmyUbBd.js"),__vite__mapDeps([0,1,2,36,48,3,4,5])).then(r=>r.openChangePaymentMethodDialog)),openConfirmInvoiceInformationDialog:this.defineCallableAction(()=>c(()=>import("./confirm-invoice-information-dialog.chunk.UcGNgLAZ.js"),__vite__mapDeps([0,1,60,36,2,3,4,5])).then(r=>r.openConfirmInvoiceInformationDialog)),openPaymentSuccessDialog:this.defineCallableAction(()=>c(()=>import("./payment-success-dialog.chunk.BEYYF1z0.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openPaymentSuccessDialog)),openPaymentQRCodeDialog:this.defineCallableAction(()=>c(()=>import("./payment-qr-code-dialog.chunk.Bglw0cSG.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openPaymentQRCodeDialog)),openNewTeamDialog:this.defineCallableAction(()=>c(()=>import("./new-team-dialog.chunk.D3-uCljG.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openNewTeamDialog)),openInviteToTeamDialog:this.defineCallableAction(()=>c(()=>import("./invite-to-team-dialog.chunk.D6Uxk3a6.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openInviteToTeamDialog)),openMyWorksProfileDialog:this.defineCallableAction(()=>c(()=>import("./my-works-profile-dialog.chunk.3KeS2l2L.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openMyWorksProfileDialog),!0),openMyWorksProfileDialogCN:this.defineCallableAction(()=>c(()=>import("./my-works-profile-dialog-cn.chunk.DXa7cTfb.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openMyWorksProfileDialogCN),!0),openPlanUpgradePromptDialogCN:this.defineCallableAction(()=>c(()=>import("./plan-upgrade-prompt-dialog-cn.chunk.CgKrGu7a.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openPlanUpgradePromptDialogCN),!0),openNewSpaceDialog:this.defineCallableAction(()=>c(()=>import("./new-space-dialog.chunk.C44bj9kQ.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openNewSpaceDialog)),openSpaceSettingsDialog:this.defineCallableAction(()=>c(()=>import("./space-settings.chunk.D0PmkmYJ.js"),__vite__mapDeps([0,1,2,16,3,4,5])).then(r=>r.openSpaceSettingsDialog)),openInviteSpaceMemberDialog:this.defineCallableAction(()=>c(()=>import("./invite-space-member-dialog.chunk.Co4JKKgj.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openInviteSpaceMemberDialog)),openFileReportDialog:this.defineCallableAction(()=>c(()=>import("./file-report-dialog.chunk.BiHgoo4Q.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openFileReportDialog),!0),openCopilotDialog:this.defineCallableAction(()=>c(()=>import("./copilot-dialog.chunk.DOhwah1T.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openCopilotDialog),!0),openUnsupportedRegionRemindDialog:this.defineCallableAction(()=>c(()=>import("./unsupported-region-remind-dialog.chunk.Do6VU-B0.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openUnsupportedRegionRemindDialog))},this.editorDialog={openRenameInEditorDialog:this.defineCallableAction(()=>c(()=>import("./rename-in-editor-dialog.chunk.COEt8d7L.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openRenameInEditorDialog),!0),openDownloadImageDialog:this.defineCallableAction(()=>c(()=>import("./download-image-dialog.chunk.BztOJiNN.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openDownloadImageDialog),!0),openExportPDFDialog:this.defineCallableAction(()=>c(()=>import("./export-pdf-dialog.chunk.BHaMa3Do.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openExportPDFDialog),!0),openExportImageSuccessDialog:this.defineCallableAction(()=>c(()=>import("./export-image-success-dialog.chunk.HxWsziWF.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openExportImageSuccessDialog)),openCreateSharingFileInEditorDialog:this.defineCallableAction(()=>c(()=>import("./create-sharing-file-in-editor-dialog.chunk.BW0r0To_.js"),__vite__mapDeps([0,1,2,16,3,4,5])).then(r=>r.openCreateSharingFileInEditorDialog),!0),openRenameSharingFileInEditorDialog:this.defineCallableAction(()=>c(()=>import("./rename-sharing-file-in-editor-dialog.chunk.baDZDXZr.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openRenameSharingFileInEditorDialog),!0),openCollaborateDialog:this.defineCallableAction(()=>c(()=>import("./collaborate-dialog.chunk.Cxay58ME.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openCollaborateDialog)),openSnapshotDialog:this.defineCallableAction(()=>c(()=>import("./snapshot-dialog.chunk.BoTfmPwD.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openSnapshotDialog)),openGeneratedMindmapReadyDialog:this.defineCallableAction(()=>c(()=>import("./generated-mindmap-ready-dialog.chunk.DtIf0zYG.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openGeneratedMindmapReadyDialog)),openFileCorruptedDialog:this.defineCallableAction(()=>c(()=>import("./file-corrupted-dialog.chunk.CSgcMElE.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openFileCorruptedDialog)),openAiDemandInputDialog:this.defineCallableAction(()=>c(()=>import("./ai-demand-input-dialog.chunk.CvBmsNwx.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openAiDemandInputDialog)),openImportImageDialog:this.defineCallableAction(()=>c(()=>import("./import-image-dialog.chunk.B8LIHqNE.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openImportImageDialog))},this.commonDialog={openLoginDialog:this.defineCallableAction(()=>c(()=>import("./login-dialog.chunk.Bx86exA0.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openLoginDialog),!0),openSelectAccountDialog:this.defineCallableAction(()=>c(()=>import("./select-dialog.chunk.C3RSRdMs.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openSelectAccountDialog),!0),openFilerPickerSaver:this.defineCallableAction(()=>c(()=>import("./file-picker-dialog.chunk.Qn-5-4Gv.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openFilerPickerSaver),!0),openUploadInsufficientSpace:this.defineCallableAction(()=>c(()=>import("./upload-insufficient-space-dialog.chunk.BpXTNKF_.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openUploadInsufficientSpace),!0),openEnterPasswordDialog:this.defineCallableAction(()=>c(()=>import("./enter-password-dialog.chunk.DeWC8bre.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openEnterPasswordDialog),!0),confirm:this.defineCallableAction(()=>c(()=>import("./confirm-dialog.chunk.B2oVxPDl.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.confirm)),openActivateDialog:this.defineCallableAction(()=>c(()=>import("./activate-dialog.chunk.BuQfPWQM.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.openActivateDialog))},this.dialog={...this.lowFrequencyDialog,...this.commonDialog,...this.homeDialog,...this.editorDialog},this.embed={newMapForEmbed:this.defineServiceCreateAction(()=>c(()=>import("./new-map.chunk.CGOmfNNi.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createNewMapAction)),openFileForEmbed:this.defineServiceCreateAction(()=>c(()=>import("./open-file.chunk.CgMkSNM0.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createOpenFileAction)),saveMapForEmbed:this.defineServiceCreateAction(()=>c(()=>import("./save-map.chunk.BurZtbkC.js"),__vite__mapDeps([0,1])).then(r=>r.createSaveMapAction)),closeEditorForEmbed:this.defineServiceCreateAction(()=>c(()=>import("./close-editor.chunk.CZrrSGK1.js"),__vite__mapDeps([0,1,2])).then(r=>r.createCloseEditorAction))},this.editorNext={newMap:this.defineServiceCreateAction(()=>c(()=>import("./new-map.chunk.CGmne5OJ.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createNewMapAction)),openLocalFile:this.defineServiceCreateAction(()=>c(()=>import("./local-file.chunk.wOE158s0.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createOpenLocalFileAction)),openByCacheId:this.defineServiceCreateAction(()=>c(()=>import("./open-map.chunk.kAY1TFuq.js"),__vite__mapDeps([0,1,2,61,62,3,4,5])).then(r=>r.createOpenByCacheIdAction)),openBySharingFileId:this.defineServiceCreateAction(()=>c(()=>import("./open-map.chunk.kAY1TFuq.js"),__vite__mapDeps([0,1,2,61,62,3,4,5])).then(r=>r.createOpenBySharingFileIdAction)),openByMeta:this.defineServiceCreateAction(()=>c(()=>import("./open-map.chunk.kAY1TFuq.js"),__vite__mapDeps([0,1,2,61,62,3,4,5])).then(r=>r.createOpenByMetaAction)),uploadFileToCloud:this.defineServiceCreateAction(()=>c(()=>import("./save-map.chunk.BKiFALKh.js"),__vite__mapDeps([0,1,61,2,3,4,5])).then(r=>r.createUploadFileToCloudAction)),saveToCloudByManually:this.defineServiceCreateAction(()=>c(()=>import("./save-map.chunk.BKiFALKh.js"),__vite__mapDeps([0,1,61,2,3,4,5])).then(r=>r.createSaveToCloudByManuallyAction)),saveToCloudByAutomatically:this.defineServiceCreateAction(()=>c(()=>import("./save-map.chunk.BKiFALKh.js"),__vite__mapDeps([0,1,61,2,3,4,5])).then(r=>r.createSaveToCloudByAutomaticallyAction)),download:this.defineServiceCreateAction(()=>c(()=>import("./download.chunk.D15Xw82K.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createDownloadAction)),downloadSharingFile:this.defineServiceCreateAction(()=>c(()=>import("./download.chunk.D15Xw82K.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createDownloadSharingAction)),rename:this.defineServiceCreateAction(()=>c(()=>import("./rename.chunk.vnYGknkL.js"),__vite__mapDeps([0,1,36,2,3,4,5])).then(r=>r.createRenameAction)),renameSharingFile:this.defineServiceCreateAction(()=>c(()=>import("./rename.chunk.vnYGknkL.js"),__vite__mapDeps([0,1,36,2,3,4,5])).then(r=>r.createRenameSharingFileAction)),saveLocal:this.defineServiceCreateAction(()=>c(()=>import("./local-file.chunk.wOE158s0.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createSaveLocalAction)),closeEditor:this.defineServiceCreateAction(()=>c(()=>import("./close-editor.chunk.DYN4DUNx.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createCloseEditorAction)),openSaveDialog:this.defineCallableAction(()=>c(()=>import("./save-map.chunk.BKiFALKh.js"),__vite__mapDeps([0,1,61,2,3,4,5])).then(r=>r.openSaveDialog),!0),openRenameSheetDialog:this.defineCallableAction(()=>c(()=>import("./rename.chunk.vnYGknkL.js"),__vite__mapDeps([0,1,36,2,3,4,5])).then(r=>r.openRenameSheetDialog),!0),updateFileFromCurrentEditor:this.defineServiceCreateAction(()=>c(()=>import("./upload-file.chunk.Cbfz5uqO.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createSharingFileAction)),copyFileToMyWorks:this.defineServiceCreateAction(()=>c(()=>import("./upload-file.chunk.Cbfz5uqO.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.createCopyFileToMyWorksAction)),openWebVideo:this.defineCallableAction(()=>c(()=>import("./web-video.chunk.CX0ZNiBD.js"),__vite__mapDeps([0,1,2,3,63,4,5])).then(r=>r.openWebVideo)),openGrowingIdeaRemindDialog:this.defineCallableAction(()=>c(()=>import("./growing-idea-remind.chunk.wRXw0EWo.js"),__vite__mapDeps([0,1,61,2,3,4,5])).then(r=>r.openGrowingIdeaRemindDialog),!0)};const e=ma(),t=e.assistantHandleCommand;this.appendBeforeHandler=e.appendAssistantHandler;const a=ma(),n=a.assistantHandleCommand;this.appendAfterHandler=a.appendAssistantHandler;const i=ur(),s=i.afterAllHandleCommand;this.appendAfterAllHandler=i.appendAfterAllHandler;const l={common:this.common,ui:this.ui,account:this.account,dialog:this.dialog,homeDialog:this.homeDialog,editorDialog:this.editorDialog};this.dialog=new Proxy(this.dialog,{get:(r,p)=>this.isDisableDialogAction?()=>Promise.resolve(!1):Reflect.get(r,p)});for(const r of Object.keys(l))for(const p of Object.keys(l[r])){const u=l[r][p];this[r][p]=new Proxy(u,{get(g,w,v){if(w==="execute"){const A=Reflect.get(g,w,v);return async(...C)=>{let m=null,h=await t(p,...C);return h!=="interruption"&&(m=h=await A(...C)),h!=="interruption"&&(h=await n(p,...C)),h!=="interruption"&&await s(p,...C),m}}return Reflect.get(g,w,v)}})}}preloadFrameUIAction(){return this.preloadActionGroup(this.ui)}preloadHomeDialogAction(){return this.preloadActionGroup(this.homeDialog)}preloadEditorDialogAction(){return this.preloadActionGroup(this.editorDialog)}preloadCommonDialogAction(){return this.preloadActionGroup(this.commonDialog)}preloadCommonAction(){return this.preloadActionGroup(this.common)}preloadEditorNextAction(){return this.preloadActionGroup(this.editorNext)}disableDialogAction(){this.isDisableDialogAction=!0}defineServiceCreateAction(e){return wt(async()=>(await e())(this))}defineCallableAction(e,t=!1){return t?wt(async()=>(await e()).bind(this),{callable:!0}):wt(e,{callable:!0})}async preloadActionGroup(e){const t=[];for(const a of Object.values(e)){const n=a?a[Ja]:void 0;typeof n=="function"&&t.push(n)}await Promise.all(t.map(a=>a()))}}function wt(o,e={}){let t=null,a=null;const n=!!e.callable,i=async()=>t||(a||(a=o().then(r=>(t=r,r))),a),s=n?function(){}:{},l={get(r,p){if(p===Ja)return i;if(!n&&p==="execute")return async(...u)=>(await i()).execute(...u);if(!n&&p==="isEnabled")return t?t.isEnabled??!1:(i(),!1);if(t){const u=Reflect.get(t,p);return typeof u=="function"?u.bind(t):u}}};return n&&(l.apply=(r,p,u)=>i().then(g=>g.apply(p,u))),new Proxy(s,l)}function ma(){const o={},e=(n,i)=>{const s=o[n];o[n]=async(...l)=>{const r=s&&await s(...l);return r||await i(...l)}},t=new Proxy(o,{get(n,i){const s=Reflect.get(n,i);return typeof s=="function"?s:()=>Promise.resolve()}});return{appendAssistantHandler:e,assistantHandleCommand:(n,...i)=>{const s=t[n];return s(n,i)}}}function ur(){const o={forAllCommands:null};return{appendAfterAllHandler:a=>{const n=o.forAllCommands;o.forAllCommands=async(...i)=>{const s=n&&await n(...i);return s||await a(...i)}},afterAllHandleCommand:(a,...n)=>{const i=o.forAllCommands;return i?i(a,n):Promise.resolve()}}}const dr=async()=>{const o=new Bo;let e;const t=new lr;e=new Ai;const a={storage:o,router:e,action:t};t.setupServices(a),o.setupServices(a),e.initRoutes(),T().addService("storage",o),T().addService("router",e),T().addService("action",t),Fe().setRouter(e.vueRouter);const{StorePlugin:n}=await c(async()=>{const{StorePlugin:s}=await import("./index.chunk.BLJpdoFj.js");return{StorePlugin:s}},__vite__mapDeps([0,1,2,33,16,3,4,5]));new n().setupServices(a)},Bt=Dn("master-loading");let Me;const en=bn("master-loading",()=>{const o=G(!1),e=G("default"),t=G(!1),a=G(!1),n=G(""),i=G(""),s=G("");return{isShowMasterLoading:o,masterLoadingCategory:e,isShowMasterLoadingCancelBtn:t,isMasterLoadingCanceled:a,masterLoadingText:n,masterLoadingBackgroundColor:i,aiTemplateLoadingThumbnail:s,setMasterLoadingCanceled:r=>{a.value=r}}});function Kt(){const o=en(),{isShowMasterLoading:e,masterLoadingCategory:t,isShowMasterLoadingCancelBtn:a,isMasterLoadingCanceled:n,masterLoadingText:i,masterLoadingBackgroundColor:s,aiTemplateLoadingThumbnail:l}=Cn(o),{setMasterLoadingCanceled:r}=o,p=()=>{Me&&(clearTimeout(Me),Me=null)},u=()=>{a.value=!1,s.value="",i.value=""},g=m=>{if(e.value){Bt.warn("showMasterLoading ignored because it is already shown with category:",t.value);return}const h=(m==null?void 0:m.category)||"default";r(!1),u(),e.value=!0,p(),m!=null&&m.isShowCancelBtn&&(Me=setTimeout(()=>{a.value=!0,m.loadingTextWhenRequestCanceled&&(i.value=m.loadingTextWhenRequestCanceled)},(m==null?void 0:m.showCancelBtnDelay)??0)),i.value=(m==null?void 0:m.loadingText)||d("Loading..."),s.value=(m==null?void 0:m.backgroundColor)||"",l.value=(m==null?void 0:m.aiTemplateLoadingThumbnail)||"",t.value=h},w=()=>{r(!1),a.value=!0},v=()=>{a.value=!1},A=m=>{const h=(m==null?void 0:m.scope)??"all";if(h!=="all"&&t.value!==h){Bt.debug(`hideMasterLoading ignored due to category mismatch: expected ${h}, actual ${t.value}`);return}e.value=!1,u(),p()},C=m=>{const h=ge([n,e],([b,V])=>{(m({isCanceled:b,isLoading:V,loadingCategory:t.value})||b||!V)&&(h==null||h())});return h};return{isShowMasterLoading:me(e),masterLoadingCategory:me(t),isShowMasterLoadingCancelBtn:me(a),isMasterLoadingCanceled:me(n),masterLoadingText:me(i),masterLoadingBackgroundColor:me(s),aiTemplateLoadingThumbnail:me(l),showMasterLoading:g,hideMasterLoading:A,showCancelBtn:w,hideCancelBtn:v,setMasterLoadingCanceled:r,watchMasterLoadingStatus:C}}const pr=async o=>{const{showMasterLoading:e,isMasterLoadingCanceled:t,hideMasterLoading:a}=Kt();e({isShowCancelBtn:!0,showCancelBtnDelay:6e3});let n,i;try{return n=new AbortController,i=ge(t,s=>s&&(n==null?void 0:n.abort())),await o(n)}catch(s){throw Bt.error(s),s}finally{n=null,i==null||i(),a()}},du=Object.freeze(Object.defineProperty({__proto__:null,loadingWith:pr,useMasterLoading:Kt,useMasterLoadingStore:en},Symbol.toStringTag,{value:"Module"})),hr={class:"master-loading fixed inset-0 z-master-loading flex items-center justify-center"},mr=["src"],fr={class:"template-image-shell mb-2 rounded-[10px] sm:mb-4 sm:rounded-[20px]"},_r=["src"],gr=Ae({__name:"master-loading",setup(o){const e=y(()=>c(()=>import("./master-ai-loading.chunk.DRd6AzUu.js"),__vite__mapDeps([0,1,64]))),{isShowMasterLoading:t,masterLoadingCategory:a,isShowMasterLoadingCancelBtn:n,masterLoadingText:i,hideMasterLoading:s,setMasterLoadingCanceled:l,masterLoadingBackgroundColor:r,aiTemplateLoadingThumbnail:p}=Kt(),u=()=>{l(!0),Kn(()=>{requestAnimationFrame(()=>{s()})})};return(g,w)=>{const v=$t("fw-loading");return M(),te(zn,{to:"body"},[x("span",null,[Rt(x("div",hr,[B(a)==="default"?(M(),te(v,{key:0,"background-color":B(r),"show-cancel-btn":B(n),text:B(i),onCancel:u},{default:Z(()=>[x("img",{class:"loading-image h-auto w-[64px]",src:g.$toResourceURL("/assets/static/images/loading-animation.gif")},null,8,mr)]),_:1},8,["background-color","show-cancel-btn","text"])):B(a)==="ai-copilot"?(M(),te(B(e),{key:1,"background-color":B(r),"show-cancel-btn":B(n),onCancel:u},null,8,["background-color","show-cancel-btn"])):B(a)==="ai-template"?(M(),te(B(e),{key:2,"background-color":B(r),"show-cancel-btn":B(n),onCancel:u},{"first-line":Z(()=>[x("div",fr,[x("img",{src:B(p),class:"template-image-wrapper h-[120px] w-[200px] rounded-lg object-cover sm:h-[180px] sm:w-[300px] sm:rounded-2xl",alt:"app.xmind.com"},null,8,_r)])]),_:1},8,["background-color","show-cancel-btn"])):ue("",!0)],512),[[Pt,B(t)]])])])}}}),fa=["xmind-ai","pricing","markdown-editor"],wr=()=>{const o=O(()=>fa.includes(Fe().router.value.currentRoute.value.name));window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{j().setMediaPreferColorScheme(t.matches?"dark":"default")}),ge(()=>j().mediaPreferColorScheme,t=>{!Ke().isInAnyEditor&&!o.value&&j().setAppearance(t)},{immediate:!0});const e=Ht(()=>{Ke().isInAnyEditor||j().setAppearance(j().mediaPreferColorScheme)},200);Fe().router.value.afterEach(t=>{const a=t.name;if(fa.includes(a)){j().setAppearance("default");return}e()})},Er=()=>{const o=Ht(()=>{var t,a,n,i,s,l,r,p,u,g,w,v,A,C;const e=Ke().contexts;e.isInHome&&((a=(t=T().services)==null?void 0:t.action)==null||a.preloadHomeDialogAction(),(i=(n=T().services)==null?void 0:n.action)==null||i.preloadCommonDialogAction()),(e.isInBrainstormEditor||e.isInCloudDriveEditor||e.isInSharingEditor)&&((l=(s=T().services)==null?void 0:s.action)==null||l.preloadFrameUIAction(),(p=(r=T().services)==null?void 0:r.action)==null||p.preloadEditorNextAction(),(g=(u=T().services)==null?void 0:u.action)==null||g.preloadCommonDialogAction(),(v=(w=T().services)==null?void 0:w.action)==null||v.preloadEditorDialogAction(),(C=(A=T().services)==null?void 0:A.action)==null||C.preloadCommonAction())},300);ge(Ke().contexts,o)},vr={class:"relative h-full w-full font-app-body"},Ar=Ae({name:"MainApp",__name:"app",setup(o){return Po(),wr(),no(),window.isNewSpaceUI=localStorage.getItem("isNewSpaceUI")!=="false",Er(),qa(()=>{document.body.classList.add("font-app-body")}),(e,t)=>{const a=$t("router-view");return M(),z("div",vr,[_e(a),_e(gr)])}}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function tn(o,e,t,a){return new(t||(t=Promise))(function(n,i){function s(p){try{r(a.next(p))}catch(u){i(u)}}function l(p){try{r(a.throw(p))}catch(u){i(u)}}function r(p){var u;p.done?n(p.value):(u=p.value,u instanceof t?u:new t(function(g){g(u)})).then(s,l)}r((a=a.apply(o,[])).next())})}function an(o,e){var t,a,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(r){return function(p){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,a&&(n=2&u[0]?a.return:u[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,u[1])).done)return n;switch(a=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,a=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(n=s.trys,!((n=n.length>0&&n[n.length-1])||u[0]!==6&&u[0]!==2)){s=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){s.label=u[1];break}if(u[0]===6&&s.label<n[1]){s.label=n[1],n=u;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(u);break}n[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(o,s)}catch(g){u=[6,g],a=0}finally{t=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([r,p])}}}(function(){(console.warn||console.log).apply(console,arguments)}).bind("[clipboard-polyfill]");var Et,vt,At,yt,_a=typeof navigator>"u"?void 0:navigator,Q=_a==null?void 0:_a.clipboard;(Et=Q==null?void 0:Q.read)===null||Et===void 0||Et.bind(Q);(vt=Q==null?void 0:Q.readText)===null||vt===void 0||vt.bind(Q);(At=Q==null?void 0:Q.write)===null||At===void 0||At.bind(Q);var ga=(yt=Q==null?void 0:Q.writeText)===null||yt===void 0?void 0:yt.bind(Q),Mt=typeof window>"u"?void 0:window;Mt==null||Mt.ClipboardItem;var Ut=Mt;function yr(){return typeof ClipboardEvent>"u"&&Ut.clipboardData!==void 0&&Ut.clipboardData.setData!==void 0}var Ir=function(){this.success=!1};function Cr(o,e,t){for(var a in o.success=!0,e){var n=e[a],i=t.clipboardData;i.setData(a,n),a==="text/plain"&&i.getData(a)!==n&&(o.success=!1)}t.preventDefault()}function nn(o){var e=new Ir,t=Cr.bind(this,e,o);document.addEventListener("copy",t);try{document.execCommand("copy")}finally{document.removeEventListener("copy",t)}return e.success}function wa(o,e){on(o);var t=nn(e);return rn(),t}function on(o){var e=document.getSelection();if(e){var t=document.createRange();t.selectNodeContents(o),e.removeAllRanges(),e.addRange(t)}}function rn(){var o=document.getSelection();o&&o.removeAllRanges()}function br(o){return tn(this,void 0,void 0,function(){var e;return an(this,function(t){if(e="text/plain"in o,yr()){if(!e)throw new Error("No `text/plain` value was specified.");if(a=o["text/plain"],Ut.clipboardData.setData("Text",a))return[2,!0];throw new Error("Copying failed, possibly because the user rejected it.")}var a;return nn(o)?[2,!0]:navigator.userAgent.indexOf("Edge")>-1?[2,!0]:wa(document.body,o)?[2,!0]:function(n){var i=document.createElement("div");i.setAttribute("style","-webkit-user-select: text !important"),i.textContent="temporary element",document.body.appendChild(i);var s=wa(i,n);return document.body.removeChild(i),s}(o)?[2,!0]:function(n){var i=document.createElement("div");i.setAttribute("style","-webkit-user-select: text !important");var s=i;i.attachShadow&&(s=i.attachShadow({mode:"open"}));var l=document.createElement("span");l.innerText=n,s.appendChild(l),document.body.appendChild(i),on(l);var r=document.execCommand("copy");return rn(),document.body.removeChild(i),r}(o["text/plain"])?[2,!0]:[2,!1]})})}function Dr(o){return tn(this,void 0,void 0,function(){return an(this,function(e){if(ga)return[2,ga(o)];if(!br(function(t){var a={};return a["text/plain"]=t,a}(o)))throw new Error("writeText() failed");return[2]})})}const sn=o=>Dr(o),Ea=(o,e,t)=>{URL.revokeObjectURL(D.fwClipboardImageBlobUrl),D.fwClipboardImageBlobUrl="",D.fwClipboardText=o??"",D.fwClipboardHTML=e??"",t&&(D.fwClipboardImageBlobUrl=URL.createObjectURL(t))},Tr=async function(o){var e;if(Object.keys(o).length===1&&o["text/plain"]){navigator.userAgent.toLowerCase().includes("safari")&&!navigator.userAgent.toLowerCase().includes("chrome")?await navigator.clipboard.write([new ClipboardItem({"text/plain":Ge(o["text/plain"])})]):await sn(await Ge(o["text/plain"]));return}(e=navigator==null?void 0:navigator.clipboard)==null||e.write([new ClipboardItem(o)]).catch(t=>{throw Rr(o),!navigator.clipboard||!navigator.clipboard.write?new Fr:new xr(t)})},Sr=async function(){var e;let o={};if($a())await new Promise(t=>setTimeout(t,200)),o=await Pr();else if((e=navigator==null?void 0:navigator.clipboard)!=null&&e.read)try{const t=await navigator.clipboard.read();for(const n of t)for(const i of n.types)o[i]=await n.getType(i);Object.entries(o).find(([n])=>n.startsWith("image/"))||(await new Promise(n=>setTimeout(n,100)),o["image/png"]=await We(D.clipboardPastedImageBlobUrl))}catch(t){logger.error(new Lr(t)),o=await va()}else o=await va();return Or(),o},va=async()=>{const o={};return D.clipboardPastedText?o["text/plain"]=new Blob([D.clipboardPastedText],{type:"text/plain"}):D.fwClipboardText&&Qe()&&(o["text/plain"]=new Blob([D.fwClipboardText],{type:"text/plain"})),D.fwClipboardHTML&&D.fwClipboardText===D.clipboardPastedText&&(o["text/html"]=new Blob([D.fwClipboardHTML],{type:"text/html"})),D.clipboardPastedHTML&&(o["text/html"]=new Blob([D.clipboardPastedHTML],{type:"text/html"})),D.fwClipboardImageBlobUrl&&D.fwClipboardText===D.clipboardPastedText&&(o["image/png"]=await We(D.fwClipboardImageBlobUrl)),D.clipboardPastedImageBlobUrl&&(o["image/png"]=await We(D.clipboardPastedImageBlobUrl)),D.fwClipboardImageBlobUrl&&Qe()&&(o["image/png"]=await We(D.fwClipboardImageBlobUrl)),o};async function Rr(o){Object.keys(o).length!==0&&(o["text/plain"]&&(D.clipboardPastedText=await Ge(o["text/plain"])),o["text/html"]&&(D.clipboardPastedHTML=await Ge(o["text/html"])),o["image/png"]&&(D.clipboardPastedImageBlobUrl=URL.createObjectURL(o["image/png"])))}const Pr=async()=>{var n;const o={},e=await navigator.clipboard.read();for(const i of e)for(const s of i.types)o[s]=await i.getType(s);const t=await((n=o["text/plain"])==null?void 0:n.text()),a=(t==null?void 0:t.replace(/[\r\n]+/gm,""))===D.fwClipboardText.replace(/[\r\n]+/gm,"");return D.fwClipboardHTML&&a&&(o["text/html"]=new Blob([D.fwClipboardHTML],{type:"text/html"})),o},We=async o=>{if(oo()&&await new Promise(e=>setTimeout(e,200)),o)return await(await fetch(o)).blob()},Or=()=>{D.clipboardPastedText="",D.clipboardPastedHTML="",D.clipboardPastedImageBlobUrl&&(URL.revokeObjectURL(D.clipboardPastedImageBlobUrl),D.clipboardPastedImageBlobUrl="")};class Fr extends I{constructor(){super("Unsupported Browser!")}}class xr extends I{constructor(e){super(`Write to Clipboard failed: ${e}`)}}class Lr extends I{constructor(e){super(`Read from Clipboard failed: ${e}`)}}var Aa={NODE_ENV:"production",MODE:"production",DEPLOY_ENV:"production",SNOWBIRD_VERSION:"0.5.7",SNOWBIRD_RESOURCE_VERSION:"0.0.2",VIEWER_KIT_VERSION:"1.10.10",DOCUMENT_KIT_VERSION:"1.7.6",SNOWMONSTER_VERSION:"@xmindltd/snowmonster-1.2.0-flatwhite.202511302233",BUILT_VERSION:"2026-01-07T10:27:01.356Z",BUILT_RELEASE_MODE:"test",SNOWBIRD_RESOURCE_URL:"snowbird-resource/0.0.2",PUBLIC_URL:"/",FLATWHITE_OAUTH_GOOGLE_APP_SCOPED_CLIENT_ID:"1005176877528-hfiduc51fqg8p7bivkbqqd9iiddq29sj.apps.googleusercontent.com",FLATWHITE_OAUTH_DROPBOX_APP_SCOPED_CLIENT_ID:"i1lwirzaxps3roo",FLATWHITE_OAUTH_ONEDRIVE_APP_SCOPED_CLIENT_ID:"aa23ca5d-bbe2-4240-856e-7c359f8c93e2",FLATWHITE_OAUTH_DROPBOX_CLIENT_ID:"3g5qm3ahijwjkh4",FLATWHITE_OAUTH_ONEDRIVE_CLIENT_ID:"aa23ca5d-bbe2-4240-856e-7c359f8c93e2",FLATWHITE_OAUTH_GOOGLE_CLIENT_ID:"550120331944-h8a96vi0ek4ka595vt89b1osv1kaf9kg.apps.googleusercontent.com",FLATWHITE_HOCUSPOCUS_SERVER_URL:"",STRIPE_PUBLIC_KEY:"pk_live_51LXcXIJqSx8ABpt8UnJszM3rcmal4rVSJuEXEAlQo0iSbo5xVbxJnROujuT9BaI3wbWhWJCzH7lRYmjGFZq0QQDt00oZ2dzcDp",STRIPE_PUBLIC_KEY_XMIND_PRO:"pk_live_QGIYsKfxf8HwfftPKCtxyUxE",GOOGLE_LOGIN_CLIENT_ID:"550120331944-h8a96vi0ek4ka595vt89b1osv1kaf9kg.apps.googleusercontent.com",APPLE_LOGIN_CLIENT_ID:"net.xmind.thirdparty.sign.in",RESPONSE_SIGN_PUBLIC_KEY:"-----ORTVA EFN CHOYVP XRL-----ZVVOPtXPNDRNm8raQtqGkytpZ+r0Y7bhRtiNQFOUmfVzIIel/m76Xn3kDeUYk1RubjM9Bo5doeJSvmnbyYIZgpcizyFgN4YpOC006Rkul0yeAYSvS0qBRFW8nJIf072vzJTRuzxjtUZiASyXRTVRcoHIeHZIbDfwfZekMK9DDSc/zniDBdRnMGd8rnXk6C2FLDNdOgdTvDu/slgd8wvy1vHgi6cTCKrj6ObRiJ0/qiTWiZChds8zEScEjQZJ3GtAeB0UEn8HQbX/UEerkkArdh8u3dVc+w5/VwhUMkyEkLAKOjeBv5oWplNjxDQxRUv8xxrkyUXjtKgqXcv9BOOom1fAAO3Sljs9MDVQNDNO-----RAQ EFN CHOYVP XRL-----",DOMAIN_NAME:"app.xmind.com",REGION:"global",XMIND_APP_ENDPOINT:"https://xmind.app",IS_HARMONY_RUNTIME:"0",DEV_MOCK_MAIN_API_ENDPOINT:"",ASSETS_PREFIX:"/assets",MIXPANEL_PROJECT_TOKEN:"08a129b7f0b9ca269482195db09123a2",MIXPANEL_PROJECT_TOKEN_CN:"8d11a72b258c5f39f588fe7327f7dc00",ZOOM_APP_AUTHORIZATION_URL:"https://zoom.us/oauth/authorize?response_type=code&client_id=pRqofyZfQSO0ziKOhSDENg&redirect_uri=https://app.xmind.com/api/integration/zoom/oauth-redirect",FORCE_FRONTEND_LOG:"0"};const kr=Aa.ASSETS_PREFIX+"/"+Aa.SNOWBIRD_RESOURCE_URL+"/";var Nr={NODE_ENV:"production",MODE:"production",DEPLOY_ENV:"production",SNOWBIRD_VERSION:"0.5.7",SNOWBIRD_RESOURCE_VERSION:"0.0.2",VIEWER_KIT_VERSION:"1.10.10",DOCUMENT_KIT_VERSION:"1.7.6",SNOWMONSTER_VERSION:"@xmindltd/snowmonster-1.2.0-flatwhite.202511302233",BUILT_VERSION:"2026-01-07T10:27:01.356Z",BUILT_RELEASE_MODE:"test",SNOWBIRD_RESOURCE_URL:"snowbird-resource/0.0.2",PUBLIC_URL:"/",FLATWHITE_OAUTH_GOOGLE_APP_SCOPED_CLIENT_ID:"1005176877528-hfiduc51fqg8p7bivkbqqd9iiddq29sj.apps.googleusercontent.com",FLATWHITE_OAUTH_DROPBOX_APP_SCOPED_CLIENT_ID:"i1lwirzaxps3roo",FLATWHITE_OAUTH_ONEDRIVE_APP_SCOPED_CLIENT_ID:"aa23ca5d-bbe2-4240-856e-7c359f8c93e2",FLATWHITE_OAUTH_DROPBOX_CLIENT_ID:"3g5qm3ahijwjkh4",FLATWHITE_OAUTH_ONEDRIVE_CLIENT_ID:"aa23ca5d-bbe2-4240-856e-7c359f8c93e2",FLATWHITE_OAUTH_GOOGLE_CLIENT_ID:"550120331944-h8a96vi0ek4ka595vt89b1osv1kaf9kg.apps.googleusercontent.com",FLATWHITE_HOCUSPOCUS_SERVER_URL:"",STRIPE_PUBLIC_KEY:"pk_live_51LXcXIJqSx8ABpt8UnJszM3rcmal4rVSJuEXEAlQo0iSbo5xVbxJnROujuT9BaI3wbWhWJCzH7lRYmjGFZq0QQDt00oZ2dzcDp",STRIPE_PUBLIC_KEY_XMIND_PRO:"pk_live_QGIYsKfxf8HwfftPKCtxyUxE",GOOGLE_LOGIN_CLIENT_ID:"550120331944-h8a96vi0ek4ka595vt89b1osv1kaf9kg.apps.googleusercontent.com",APPLE_LOGIN_CLIENT_ID:"net.xmind.thirdparty.sign.in",RESPONSE_SIGN_PUBLIC_KEY:"-----ORTVA EFN CHOYVP XRL-----ZVVOPtXPNDRNm8raQtqGkytpZ+r0Y7bhRtiNQFOUmfVzIIel/m76Xn3kDeUYk1RubjM9Bo5doeJSvmnbyYIZgpcizyFgN4YpOC006Rkul0yeAYSvS0qBRFW8nJIf072vzJTRuzxjtUZiASyXRTVRcoHIeHZIbDfwfZekMK9DDSc/zniDBdRnMGd8rnXk6C2FLDNdOgdTvDu/slgd8wvy1vHgi6cTCKrj6ObRiJ0/qiTWiZChds8zEScEjQZJ3GtAeB0UEn8HQbX/UEerkkArdh8u3dVc+w5/VwhUMkyEkLAKOjeBv5oWplNjxDQxRUv8xxrkyUXjtKgqXcv9BOOom1fAAO3Sljs9MDVQNDNO-----RAQ EFN CHOYVP XRL-----",DOMAIN_NAME:"app.xmind.com",REGION:"global",XMIND_APP_ENDPOINT:"https://xmind.app",IS_HARMONY_RUNTIME:"0",DEV_MOCK_MAIN_API_ENDPOINT:"",ASSETS_PREFIX:"/assets",MIXPANEL_PROJECT_TOKEN:"08a129b7f0b9ca269482195db09123a2",MIXPANEL_PROJECT_TOKEN_CN:"8d11a72b258c5f39f588fe7327f7dc00",ZOOM_APP_AUTHORIZATION_URL:"https://zoom.us/oauth/authorize?response_type=code&client_id=pRqofyZfQSO0ziKOhSDENg&redirect_uri=https://app.xmind.com/api/integration/zoom/oauth-redirect",FORCE_FRONTEND_LOG:"0"};function Vr(o){const e=navigator.userAgent.toLowerCase().includes("safari")&&!navigator.userAgent.toLowerCase().includes("chrome"),t=window.navigator.userAgent.toLowerCase(),a=["mobile","android","ios","ipad"].some(n=>t.includes(n));io.globalConfigSetup({revealDebouncedTime:60,platformMapper:n=>n==="shouldShiftKeyFlipScrollDirection"?!0:n==="preventAutoFocusInputElement"?a:void 0,guidedPayment:async n=>{var i;return!await((i=o.guidedPayment)==null?void 0:i.call(o,n))},featureIsCurrentlyRestricted:o.featureIsCurrentlyRestricted,assetsBaseURL:"",toAssetsUrl:n=>`${kr+n}?v=${Nr.SNOWBIRD_VERSION}`,builtinImageUrls:{[ro.BuiltinImageSource.ImageLoadingPlaceholder]:Y("/assets/static/images/loading.svg")},clipboard:{read:async()=>{var n,i;try{const s=await Sr(),l=Object.entries(s).find(([u])=>u.startsWith("image/")),r=l!=null&&l[1]?new File([l[1]],"Untitled.png",{type:"image/png"}):void 0,p={text:r?"":await((n=s["text/plain"])==null?void 0:n.text()),html:await((i=s["text/html"])==null?void 0:i.text()),image:r};return typeof o.clipboardDataReadingInterpreter<"u"&&!o.clipboardDataReadingInterpreter(p)?{text:"",html:""}:p}catch(s){logger.error(s)}},write:async n=>{const i={};let s;if(n.text&&(i["text/plain"]=new Blob([n.text],{type:"text/plain"})),n.html&&(i["text/html"]=new Blob([n.html],{type:"text/html"})),n.image)if(n.image.type==="image/svg+xml")try{const l=await so(n.image),r=await co(l,1,"blob");r&&(i["image/png"]=r),s="image/png"}catch(l){logger.error("Convert & write svg file to clipboard failed!",l)}else i[n.image.type]=n.image,s=n.image.type;try{$a()&&Ea(n.text,n.html,i[s]),await Tr(i)}catch(l){await sn(n.text),Ea(n.text,n.html,i[s]),logger.error(l)}},...e?{writeAsyncedData:n=>{const i={};n.text&&(i["text/plain"]=n.text),n.html&&(i["text/html"]=n.html),navigator.clipboard.write([new ClipboardItem(i)])}}:{}},collaborativeActionHandler:{handleInsertCommentThreadAction:n=>{var p,u;const{newCommentThread:i}=dt(),{parentTopicId:s,position:l}=n,r=(u=(p=xt().workbook)==null?void 0:p.workbookEditor)==null?void 0:u.activeSheetId.value;return i({anchor:{sheetId:r,topicId:s,position:l}})},handleOpenCommentThreadAction:n=>{const{commentThreads:i}=dt(),s=i.find(l=>l.id===n.threadId);s&&s.comments.length>0&&lo.commentPopShow("FromMapBubbleClick")},handleMoveCommentThreadAction:n=>{const{updateCommentThreadPosition:i}=dt(),{threadId:s,newPosition:l,parentTopidId:r}=n;i({threadId:s,delta:{position:l,topicId:r}})}},importMarkdown:Oo(TextEncoder),...(o==null?void 0:o.snowmonsterGlobalConfig)??{}})}class Br extends I{}class ya extends I{}const Mr=async function(o){const e=await this.request.put("/api/drive/folder",{folderName:o.folderName,parentFolderId:o.parentFolderId});if(!e)throw new f;if(e.status===400)throw e.data==="invalid_folder_name"?new Br:new ya;if(e.status>=500)throw new ya;const{metadata:t}=e.data;return{metadata:t}};class Oe extends I{}class cn extends I{}const Ur=async function(o){const{parentFolderId:e,includeSharingState:t=!0}=o||{},a=await this.request.post(e?`/api/drive/${e}/children`:"/api/drive/children",{includeSharingState:t});if(!a)throw new f;if(a.status>=400&&a.status<500)throw new Oe;if(a.status>500)throw new cn;const{items:n,parents:i}=a.data;return{parents:i,items:n}},qr=async function(o){const{spaceId:e}=o,t=await this.request.get(`/api/drive/${e}/all-folders`);if(!t)throw new f;if(t.status>=400&&t.status<500)throw new Oe;if(t.status>500)throw new cn;return t.data};class tt extends I{}class ln extends I{}const Hr=async function(o){const{parentFolderId:e}=o||{},t=await this.request.get(e&&e!==P().userXmindId?`/api/drive/trash/${e}/children`:"/api/drive/trash/children");if(!t||!t.status)throw new f;if(t.status===404)throw new tt;if(t.status===400&&t.data==="destination_are_not_in_trash")throw new tt;if(t.status!==200)throw new ln;const{items:a,parents:n}=t.data;return{items:a,parents:n}},$r=async function(o){const{folderId:e,teamId:t}=o||{},a=await this.request.post("/api/drive/trash/by-team",{folderId:e,teamId:t});if(!a||!a.status)throw new f;if(a.status===404)throw new tt;if(a.status===400&&a.data==="destination_are_not_in_trash")throw new tt;if(a.status!==200)throw new ln;const{items:n,parents:i}=a.data;return{items:n,parents:i}};class Yt extends I{}const Wr=async function(){const o=await this.request.get("/api/drive/sharing?brainstorm=1");if((o==null?void 0:o.status)!==200)throw new Yt;const{files:e}=o.data;return{files:e}},Xr=async function(){const o=await this.request.get("/api/drive/shared-with-me");if((o==null?void 0:o.status)!==200)throw new Yt;const{files:e}=o.data;return{files:e}},Gr=async function(o){const e=await this.request.post("/api/drive/shared-with-me-by-team",{teamId:o});if((e==null?void 0:e.status)!==200)throw new Yt;const{files:t}=e.data;return{files:t}};class jr extends I{}class zr extends I{}class Kr extends I{}class Yr extends I{}class Zr extends I{}class Qr extends I{}class Ia extends I{constructor(e){super(),this.limit=e}}class Jr extends I{}const un=async function(o){const{fileIds:e,folderIds:t,toParentFolderId:a,endpoint:n,contextualRequirements:i}=o,s=await this.request.post(n,{toParentFolderId:a,fileIds:e,folderIds:t,contextualRequirements:i});if(!s)throw new f;if(s.data==="free_user_files_amount_exceed_limit")throw new Ia(null);if(s.status===402&&s.data.message==="exceed_files_limit")throw new Ia(s.data.limit);if(s.status===400)switch(!0){case s.data==="insufficient_space":throw new jr;case s.data==="access_denied":throw new zr;case s.data==="destination_folder_not_found":throw new Kr;case s.data==="source_folder_not_found":throw new Yr;case s.data==="source_folder_are_root":throw new Zr;case s.data.endsWith("contextual_requirements_error"):throw new Qr;default:throw new Jr}const{items:l}=s.data;return{items:l}},es=async function(o){return un.call(this,{...o,endpoint:"/api/drive/copy"})},ts=async function(o){return un.call(this,{...o,endpoint:"/api/drive/duplicate"})};class as extends I{}class ns extends I{}class os extends I{}class is extends I{}class rs extends I{}class ss extends I{}class cs extends I{}class ls extends I{}class Ca extends I{constructor(e){super(),this.limit=e}}class dn extends I{}const us=async function(o){const{fileIds:e,folderIds:t,toParentFolderId:a,contextualRequirements:n}=o,i=await this.request.post("/api/drive/move",{toParentFolderId:a,fileIds:e,folderIds:t,contextualRequirements:n});if(!i.data)throw new f;if(i.data==="free_user_files_amount_exceed_limit")throw new Ca(null);if(i.status===402){if(i.data.message==="exceed_files_limit")throw new Ca(i.data.limit)}else if(i.status===400)switch(!0){case i.data==="insufficient_space":throw new as;case i.data==="access_denied":throw new ns;case i.data==="destination_folder_not_found":throw new os;case i.data==="source_file_not_found":throw new is;case i.data==="source_folder_not_found":throw new rs;case i.data==="source_are_not_movable":throw new ss;case i.data==="destination_are_subdirectory":throw new cs;case i.data.endsWith("contextual_requirements_error"):throw new ls;default:throw new dn}},ds=async function(o){const{spaceId:e,targetSpaceId:t}=o,a=await this.request.post(`/api/drive/space/${e}/migrate-files`,{targetSpaceId:t});if(!a.data)throw new f;if(a.status===200)return!0;throw new dn};async function ps(o,e){const t=o.getReader();let a;for(;!(a=await t.read()).done;)e(a.value)}function hs(o){let e,t,a,n=!1;return function(s){e===void 0?(e=s,t=0,a=-1):e=fs(e,s);const l=e.length;let r=0;for(;t<l;){n&&(e[t]===10&&(r=++t),n=!1);let p=-1;for(;t<l&&p===-1;++t)switch(e[t]){case 58:a===-1&&(a=t-r);break;case 13:n=!0;case 10:p=t;break}if(p===-1)break;o(e.subarray(r,p),a),r=t,a=-1}r===l?e=void 0:r!==0&&(e=e.subarray(r),t-=r)}}function ms(o,e,t){let a=ba();const n=new TextDecoder;return function(s,l){if(s.length===0)t==null||t(a),a=ba();else if(l>0){const r=n.decode(s.subarray(0,l)),p=l+(s[l+1]===32?2:1),u=n.decode(s.subarray(p));switch(r){case"data":a.data=a.data?a.data+`
`+u:u;break;case"event":a.event=u;break;case"id":o(a.id=u);break;case"retry":const g=parseInt(u,10);isNaN(g)||e(a.retry=g);break}}}}function fs(o,e){const t=new Uint8Array(o.length+e.length);return t.set(o),t.set(e,o.length),t}function ba(){return{data:"",event:"",id:"",retry:void 0}}var _s=function(o,e){var t={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(t[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(o);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(o,a[n])&&(t[a[n]]=o[a[n]]);return t};const qt="text/event-stream",gs=1e3,Da="last-event-id";function ws(o,e){var{signal:t,headers:a,onopen:n,onmessage:i,onclose:s,onerror:l,openWhenHidden:r,fetch:p}=e,u=_s(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((g,w)=>{const v=Object.assign({},a);v.accept||(v.accept=qt);let A;function C(){A.abort(),document.hidden||_()}r||document.addEventListener("visibilitychange",C);let m=gs,h=0;function b(){document.removeEventListener("visibilitychange",C),window.clearTimeout(h),A.abort()}t==null||t.addEventListener("abort",()=>{b(),g()});const V=p??window.fetch,S=n??Es;async function _(){var E;A=new AbortController;try{const R=await V(o,Object.assign(Object.assign({},u),{headers:v,signal:A.signal}));await S(R),await ps(R.body,hs(ms(L=>{L?v[Da]=L:delete v[Da]},L=>{m=L},i))),s==null||s(),b(),g()}catch(R){if(!A.signal.aborted)try{const L=(E=l==null?void 0:l(R))!==null&&E!==void 0?E:m;window.clearTimeout(h),h=window.setTimeout(_,L)}catch(L){b(),w(L)}}}_()})}function Es(o){const e=o.headers.get("content-type");if(!(e!=null&&e.startsWith(qt)))throw new Error(`Expected content-type to be ${qt}, Actual: ${e}`)}const vs=async function(o){const{teamId:e,filename:t,file:a,signal:n}=o,i=new FormData;i.append("teamId",e),i.append("file",a,t);const s=await this.request.post("/api/drive/xai/remove-image-bg",i,{signal:n,responseType:"blob"});if(!s)throw new f;if(s.status>=500)throw new Error("Server error");if(s.status===403)throw new oe;return s.isCanceled?null:s.data};function pu(o){const{method:e,url:t,body:a}=o,n=new AbortController;return{start:()=>new Promise((l,r)=>{let p="";ws(t,{method:e,headers:{[Ua]:P().authToken,"Content-Type":"application/json","X-Bypass-SW":"true",...Wa()},body:a,signal:n.signal,async onopen(u){var w;if(u.ok||(u.status===413?r(new Ye):r(new Error("Failed to arrange content"))),!((w=u.headers.get("content-type"))!=null&&w.includes("application/json")))return;const g=await u.json();if(g.code===402||g.code===403)r(new Lt);else throw new Error},onmessage(u){var w;let g=u.data;(w=g==null?void 0:g.toUpperCase())!=null&&w.includes("[DONE]")||(u.data===""&&(g=`
`),p+=g)},onclose(){l(p)},onerror(u){r(u)},openWhenHidden:!0})}),abort:()=>{n.abort()}}}function hu(o){const{method:e,url:t,body:a,headers:n={}}=o,i=new AbortController;return{start:async()=>{try{const r={[Ua]:P().authToken,"X-Bypass-SW":"true",...Wa(),...n};a&&!(a instanceof FormData)&&!r["Content-Type"]&&(r["Content-Type"]="application/json");const p=await fetch(t,{method:e,headers:r,body:a,signal:i.signal}),g=(p.headers.get("content-type")||"").includes("application/json"),w=g?await p.json().catch(()=>null):null;if(p.status===400)throw new K((w==null?void 0:w.message)||"Bad Request");if(p.status===413)throw new Ye;if(p.status===402||p.status===403||(w==null?void 0:w.code)===402||(w==null?void 0:w.code)===403)throw new Lt;if(!p.ok)throw new Error((w==null?void 0:w.message)||(w==null?void 0:w.msg)||"Request failed");return g?w:await p.text()}catch(r){if((r==null?void 0:r.name)==="AbortError")return null;throw r instanceof oe||r instanceof f||r instanceof Ye||r instanceof Lt?r:(r==null?void 0:r.message)==="Failed to fetch"?new f:r}},abort:()=>i.abort()}}async function As(){const o=await this.request.post("/api/xai/copilot?dry-run=true");return!(o.status===403&&o.data==="region_unsupported")}class ys{constructor(e){this.createFile=gi.bind(this),this.createFileByTemplate=wi.bind(this),this.createFileByNewTemplate=Ei.bind(this),this.createFolder=Mr.bind(this),this.imageCutout=vs.bind(this),this.regionSupportedCheckForAiFeature=As.bind(this),this.list=Ur.bind(this),this.listAllFolders=qr.bind(this),this.listTrash=Hr.bind(this),this.listTrashByTeam=$r.bind(this),this.listSharing=Wr.bind(this),this.listSharedWithMe=Xr.bind(this),this.listSharedWithMeByTeam=Gr.bind(this),this.migrateSpaceFiles=ds.bind(this),this.move=us.bind(this),this.copy=es.bind(this),this.duplicate=ts.bind(this),this.request=new Wt({endpoint:(e==null?void 0:e.endpoint)||"",authToken:(e==null?void 0:e.authToken)||"",imRef:e==null?void 0:e.imRef})}async moveToTrash(e){const{fileIds:t,folderIds:a}=e,n=await this.request.put("/api/drive/trash",{fileIds:t,folderIds:a});if((n==null?void 0:n.status)===403&&(n==null?void 0:n.data)==="exceeds_limit")throw new Error("exceeds_limit");if((n==null?void 0:n.status)!==200)throw new Error("Move to trash failed");const{removedFileIdsInRemovedFolders:i}=n.data;return{removedFileIdsInRemovedFolders:i}}async moveFromTrash(e){const{fileIds:t,folderIds:a}=e,n=await this.request.post("/api/drive/trash",{fileIds:t,folderIds:a});if(n.data==="free_user_files_amount_exceed_limit")throw new X("Exceed files limit",null);if(n.status===402&&n.data.message==="exceed_files_limit")throw new X("Exceed files limit",n.data.limit);if((n==null?void 0:n.status)!==200)throw new Error("Move from trash failed");return(n==null?void 0:n.status)===200}async remove(e){const{fileIds:t=[],folderIds:a=[]}=e,n=await this.request.post("/api/drive/remove",{fileIds:t,folderIds:a});if((n==null?void 0:n.status)!==200)throw new Error("Remove file failed");return(n==null?void 0:n.status)===200}async emptyTrash(){const e=await this.request.delete("/api/drive/trash");if((e==null?void 0:e.status)!==200)throw new Error("empty trash failed");return(e==null?void 0:e.status)===200}async uploadThumbnail(e){const{data:t,fileId:a}=e,n=new FormData;n.append("file",new Blob([t]));const i=await this.request.put(`/api/drive/file/${a}/Thumbnails/thumbnail.png`,n);return(i==null?void 0:i.status)===200?(logger.log(`Thumbnail uploaded byteLength in ${t.byteLength}`),!0):!1}async uploadAnonymousThumbnail(e){const{data:t}=e,a=new FormData;a.append("file",new Blob([t]));const n=await this.request.put("/api/drive/thumbnails/thumbnail.png",a);if((n==null?void 0:n.status)===200&&n.data.thumbnailId)return n.data.thumbnailId}async uploadResource(e){var l;const{data:t,filename:a,fileId:n}=e,i=new FormData;i.append("file",t instanceof Blob?t:new Blob([t])),i.append("filename",a);const s=await this.request.put(`/api/drive/file/${n}/resources/${a}`,i,{timeout:1e5});if(!s)throw new f;if((s==null?void 0:s.status)!==200&&(s==null?void 0:s.status)!==304)throw new oa;return{isSuccess:(s==null?void 0:s.status)===200||(s==null?void 0:s.status)===304,isModified:(l=s.data)==null?void 0:l.isModified}}async listResources(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/file/${t}/resources`);if(!a)throw new f;return a==null?void 0:a.data}async downloadResource(e){const{fileId:t,filename:a}=e,n=await this.request.get(`/api/drive/file/${t}/resources/${a}`,{responseType:"arraybuffer",timeout:6e4});if(!n)throw new f;if((n==null?void 0:n.status)===404)throw new ae;if((n==null?void 0:n.status)!==200&&(n==null?void 0:n.status)!==304)throw new pt;return n.data}async download(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/file/${t}`,{responseType:"arraybuffer"});if(!a)throw new f;return a.data}async getDisposableDownloadLink(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/file/${t}/disposable-link`);if(!a)throw new f;return a.data}async renameFile(e){const{fileId:t,name:a}=e,n=await this.request.post(`/api/drive/file/${t}/name`,{name:a});if(!n)throw new f;return n.status===200}async renameFolder(e){const{folderId:t,name:a}=e,n=await this.request.post(`/api/drive/folder/${t}/name`,{name:a});if(!n)throw new f;return n.status===200}async getFileMetadata(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/file/${t}/metadata`);if(!a)throw new f;if((a==null?void 0:a.status)===404)throw new ae;return a.data}async changeFileAccessMode(e){const{fileId:t,accessMode:a,password:n}=e,i=await this.request.post(`/api/drive/file/${t}/metadata/access-mode`,{accessMode:a,password:n});if(!i)throw new f;return i.status===200}async requestFileAccess(e){const{fileId:t,password:a,clientId:n}=e,i=await this.request.post(`/api/drive/file/${t}/metadata/authorization`,{password:a,clientId:n});if(!i)throw new f;return i.status===200}async listUserForFile(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/file/${t}/access`);if(!a)throw new f;if(a.status===200)return{accessAwaiting:a.data.accessAwaiting,accessGranted:a.data.accessGranted}}async addUserAccessForFile(e){const{fileId:t,xmindId:a}=e,n=await this.request.put(`/api/drive/file/${t}/access/${a}`);if(!n)throw new f;return n.status===200}async removeUserAccessForFile(e){const{fileId:t,xmindId:a}=e,n=await this.request.delete(a?`/api/drive/file/${t}/access/${a}`:`/api/drive/file/${t}/access`);if(!n)throw new f;return n.status===200}async getSpaceCapacity(){const e=await this.request.get("/api/drive/capacity");if(!e)throw new f;return e.data}async getTeamCapacity(e){const{teamId:t}=e,a=await this.request.get(`/api/drive/team/${t}/capacity`);if(!a)throw new f;return a.data}async authorizeCollaboratorAccess(e){const{fileId:t,password:a}=e,n=await this.request.post(`/api/drive/file/${t}/authorize`,{password:a});if(!n)throw new f;return n.status===200}async changeFileInviteRole(e){const{fileId:t,inviteRole:a}=e,n=await this.request.post(`/api/drive/file/${t}/metadata/invite-role`,{inviteRole:a});if(!n)throw new f;return n.status===200}async changeFileAccessRole(e){const{fileId:t,accessRole:a}=e,n=await this.request.post(`/api/drive/file/${t}/metadata/access-role`,{accessRole:a});if(!n)throw new f;return n.status===200}async changeFileTeammateRole(e){const{fileId:t,teammateRole:a}=e,n=await this.request.post(`/api/drive/file/${t}/metadata/teammate-role`,{teammateRole:a});if(!n)throw new f;return n.status===200}async sendEmailInvitations(e){const{fileId:t,role:a,emails:n,inviteMessage:i}=e,s=await this.request.put(`/api/drive/file/${t}/invite/email`,{role:a,emails:n,inviteMessage:i});if(s){if(s.status===429)throw new ia}else throw new f;return s.status===200}async sendFileInvitationsCN(e){const{fileId:t,role:a,emails:n,phones:i,inviteMessage:s}=e,l=await this.request.post(`/api/drive/file/${t}/invite`,{role:a,emails:n,phones:i,inviteMessage:s});if(l){if(l.status===429)throw new ia}else throw new f;if(l.status===400)throw new K;return l.status===200?l.data:!1}async listFileInvitees(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/v2/file/${t}/invite`);if(!a)throw new f;return a.data}async listFileAccessRequests(e){const{fileId:t}=e,a=`/api/drive/file/${t}/access-request`,n=await this.request.get(a);if(!n)throw new f;return n.data}async changeInviteeRole(e){const{fileId:t,role:a,accountId:n}=e,i=await this.request.post(`/api/drive/file/${t}/invitee-role`,{role:a,accountId:n});if(!i)throw new f;return i.status===200}async removeInvitee(e){const{fileId:t,accountId:a}=e,n=await this.request.post(`/api/drive/file/${t}/invitee`,{accountId:a});if(!n)throw new f;return n.status===200}async removeCurrentUserAsInvitee(e){const{fileId:t}=e,a=await this.request.delete(`/api/drive/file/${t}/invitee`);if(!a)throw new f;return a.status===200||a.status===202}async getInviteeRole(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/file/${t}/invitee-role`);if(!a)throw new f;return a.data}async addFavorite(e){const{favoritesOrder:t}=e,a=await this.request.post("/api/drive/favorite",{favoritesOrder:t});if(!a)throw new f;if(a.status===200){const{favorites:n}=a.data;return n}else throw new Error("Add favorite failed")}async removeFavorites(e){const{favoritesOrder:t}=e,a=await this.request.put("/api/drive/favorite",{favoritesOrder:t});if(!a)throw new f;if(a.status===200){const{favorites:n}=a.data;return n}else throw new Error("remove favorite failed")}async getFavorites(){const e=await this.request.get("/api/drive/favorites");if(!e)throw new f;const{favorites:t}=e.data;return t}async updateFavorites(e){const{favoritesOrder:t}=e,a=await this.request.post("/api/drive/favorites",{favoritesOrder:t});if(!a)throw new f;return a.status===200}async putPitchContent(e){const{pitchId:t,content:a}=e,n=await this.request.post(`/api/drive/pitch/content/${t}`,{content:a});if(!n)throw new f;return n.status===200}async getPitchContent(e){const{pitchId:t}=e,a=await this.request.get(`/api/drive/pitch/content/${t}`);if(!a)throw new f;if(a.status===404)throw new ae;return a.data}async deletePitchContent(e){const{pitchId:t}=e,a=await this.request.delete(`/api/drive/pitch/content/${t}`);if(!a)throw new f;return a.status===200}async listFileSnapshots(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/file/${t}/snapshot`);if(!a)throw new f;const{snapshots:n}=a.data;return{snapshots:n}}async restoreSnapshot(e){const{fileId:t,snapshotId:a}=e,n=await this.request.post(`/api/drive/file/${t}/snapshot/${a}`);if(!n)throw new f;return n.status===200}async downloadSnapshotContentJSON(e){const{fileId:t,snapshotId:a}=e,n=await this.request.get(`/api/drive/file/${t}/snapshot/${a}/content.json`,{responseType:"json"});if(!n)throw new f;return n.data}async downloadSnapshotResource(e){const{fileId:t,snapshotId:a,filename:n}=e,i=await this.request.get(`/api/drive/file/${t}/snapshot/${a}/resources/${n}`,{responseType:"arraybuffer"});if(!i)throw new f;if((i==null?void 0:i.status)===404)throw new ae;return i.data}async checkIsPlusPlanSubscribed(e){var a;const t=await this.request.get(`/api/account/verify-subscription/${e}`);if(!t)throw new f;return(a=t.data)==null?void 0:a.isPlusPlanSubscribed}async newOnelinerFile(e){var l,r;const{title:t,isTodo:a,teamId:n,parentFolderId:i}=e,s=await this.request.post("/api/drive/new-oneliner-file",{title:t,isTodo:a,teamId:n,parentFolderId:i});if(!s)throw new f;if(s.status>=500)throw new Error("Server error");if(s.data==="free_user_files_amount_exceed_limit")throw new X("Exceed files limit",null);if(s.status===402){if(s.data.message==="exceed_files_limit")throw new X("Exceed files limit",s.data.limit)}else if(s.status>=400)switch(!0){case s.data==="insufficient_space":throw new xe("Insufficient space");case s.status===400:throw new K("parameter_error");default:throw new re("Create file error")}if(!((l=s==null?void 0:s.data)!=null&&l.metadata))throw new re("Create file error");return{metadata:(r=s==null?void 0:s.data)==null?void 0:r.metadata}}async newBrainstormFile(e){var s,l;const{title:t,teamId:a,parentFolderId:n}=e,i=await this.request.post("/api/drive/new-brainstorm-file",{title:t,teamId:a,parentFolderId:n});if(!i)throw new f;if(i.status>=500)throw new Error("Server error");if(i.data==="free_user_files_amount_exceed_limit")throw new X("Exceed files limit",null);if(i.status===402){if(i.data.message==="exceed_files_limit")throw new X("Exceed files limit",i.data.limit)}else if(i.status>=400)switch(!0){case i.data==="insufficient_space":throw new xe("Insufficient space");case i.status===400:throw new K("parameter_error");default:throw new re("Create file error")}if(!((s=i==null?void 0:i.data)!=null&&s.metadata))throw new re("Create file error");return{metadata:(l=i==null?void 0:i.data)==null?void 0:l.metadata}}async shareGetContentJSON(e){const{fileId:t,password:a}=e,n=await this.request.post(`/api/drive/share/${t}/content`,{password:a??""},{responseType:"json"});if(!n)throw new f;if(n.status===404)throw new ae;if(n.status===403)throw n.data==="private_access"?new uo:n.data==="password_incorrect"?new po:new oe;if(n.status!==200&&n.status!==304)throw new pt;return n.data}async shareGetMetadataJSON(e){const{fileId:t}=e,a=await this.request.get(`/api/drive/share/${t}/metadatajson`,{responseType:"json"});if(!a)throw new f;if(a.status===404)throw new ae;if(a.status===403)throw new oe;if(a.status!==200&&a.status!==304)throw new pt;return a.data}async listFilesPagination(e){const{folderId:t,limit:a,lastKey:n,order:i,sortBy:s,itemIdToFind:l,teamOrMyWorksId:r,type:p}=e,u=await this.request.post("/api/drive/list-folder",{folderId:t,type:p??"file",limit:a,lastKey:n,order:i,sortBy:s,itemIdToFind:l,teamOrMyWorksId:r});if(!u)throw new f;if(u.status===403)throw new oe;if(u.status===400)throw new K;if(u.status===404)throw new Oe;if(u.status>=500)throw new le;if(u.status===200)return u.data;throw new Error("List files failed")}async listBrainstormFilesPagination(e){return await this.listFilesPagination({...e,type:"brainstorm"})}async listFoldersPagination(e){const{folderId:t,limit:a,lastKey:n,order:i,sortBy:s,itemIdToFind:l,teamOrMyWorksId:r}=e,p=await this.request.post("/api/drive/list-folder",{folderId:t,type:"folder",limit:a,lastKey:n,order:i,sortBy:s,itemIdToFind:l,teamOrMyWorksId:r});if(!p)throw new f;if(p.status===403)throw new oe;if(p.status===400)throw new K;if(p.status===404)throw new Oe;if(p.status>=500)throw new le;if(p.status===200)return p.data;throw new Error("List files failed")}async searchInFolder(e){const{folderId:t,searchPhrase:a,order:n}=e,i=await this.request.post("/api/drive/search-in-folder",{folderId:t,searchPhrase:a,order:n});if(!i)throw new f;if(i.status===400)throw new K;if(i.status===404)throw new Oe;if(i.status===429)throw new ho;if(i.status>=500)throw new le;if(i.status===200)return i.data;throw new Error("Search in folder failed")}async getFolderPaths(e){const{folderId:t}=e,a=await this.request.get(`/api/drive/${t}/paths`);if(!a)throw new f;if(a.status===404)throw new ae;if(a.status===403)throw new oe;if(a.status>=500)throw new le;if(a.status!==200)throw new Error("Get folder path failed");return a.data}async sentTeamDeletionFeedback(e){const{teamId:t,feedbackData:a}=e,n=await this.request.post("/api/drive/feedback/team-deletion-feedback",{teamId:t,feedbackData:a});if(!n)throw new f;if(n.status===400)throw new K;return n.status===200}async retentionSurveyFeedback(e){const{teamId:t,feedbackData:a}=e,n=await this.request.post("/api/drive/feedback/retention-survey-feedback",{teamId:t,feedbackData:a});if(!n)throw new f;if(n.status===400)throw new K;return n.status===200}async claimIntegrationMarkdown2PngFileOwnership(e){const{fileId:t}=e;return this.request.post(`/api/drive/integrations/markdown2png-claims/${t}`,{}).then(a=>{if((a==null?void 0:a.status)===403&&(a==null?void 0:a.data)==="free_user_files_amount_exceed_limit")throw new X("Exceed files limit",Tn);if((a==null?void 0:a.status)===403)throw new oe;if((a==null?void 0:a.status)!==200)throw new Error("Failed to transfer file ownership");return a.data})}async readUrl(e){const{url:t}=e,a=await this.request.post("/api/drive/url-reader",{url:t});if(!a)throw new f;return a.data}async readUrlPreview(e){const{url:t,cancel:a}=e,n=await this.request.post("/api/drive/url-preivew",{url:t},{cancel:a});if(!n)throw new f;return n.data}async readYoutubeVideo(e){const{videoId:t,teamId:a,language:n}=e,i=await this.request.post("/api/drive/ytb-reader",{videoId:t,teamId:a,language:n});if(!i)throw new f;if((i==null?void 0:i.status)===400&&(i==null?void 0:i.data)==="video_not_found")throw new mo;if((i==null?void 0:i.status)===400&&(i==null?void 0:i.data)==="transcript_not_found")throw new fo;return i.data}async readFile(e){var l;const{mimetype:t,file:a,signal:n}=e,i=new FormData;i.append("mimetype",t),i.append("file",a);const s=await this.request.post("/api/drive/v2/file-reader",i,{timeout:15e4,signal:n});if(!s)throw new f;if((s==null?void 0:s.status)===403&&((l=s==null?void 0:s.data)==null?void 0:l.message)==="file_too_large")throw new X("File too large",Sn);if((s==null?void 0:s.status)===413)throw new Ye;if((s==null?void 0:s.status)===400&&(s==null?void 0:s.data)==="convert_failed")throw new _o;if(!(s!=null&&s.status)&&(s!=null&&s.isCanceled))throw new go;if((s==null?void 0:s.status)!==200)throw new oa;return s.data}async listFileTemplates(e){const{lang:t}=e,a=await this.request.post("/api/drive/list-templates",{lang:t});if(!a)throw new f;if(a.status===403)throw new oe;if(a.status===400)throw new K;if(a.status>=500)throw new le;return a.data}async mainSiteMapShareIntegration(e){var s;const{shareId:t,mapifyShareId:a,filename:n}=e,i=await this.request.post("/api/integration/main-site-map-share",{shareId:t,mapifyShareId:a,filename:n},{timeout:1e5});if(!i)throw new f;if(i.status===403)throw new oe;if(i.status===400)throw new K;if(i.status===402&&((s=i.data)==null?void 0:s.message)==="exceed_files_limit")throw new X("Exceed files limit",i.data.limit);if(i.status===404)throw new ae;if(i.status!==200)throw new le;return i.data}async sendFileAccessRequest(e){var n;const{fileId:t}=e,a=await this.request.put(`/api/drive/file/${t}/access-request`);if(!a)throw new f;if(a.status===404&&a.data==="file_not_found")throw new ae;if(a.status>=500)throw new le;return(n=a==null?void 0:a.data)==null?void 0:n.request}async getRecentRecords(e){const{teamId:t}=e,a=await this.request.get(`/api/drive/v2/recent-files-records?brainstorm=1${t?"&teamId="+t:""}`);if(!a)throw new f;if(a.status>=500)throw new le;if(a.status===200)return a.data;throw new Error("Get recent records failed")}async getFileAccessRequest(e){var n;const{fileId:t}=e,a=await this.request.get(`/api/drive/file/${t}/access-request/exists`);if(!a)throw new f;if((a==null?void 0:a.status)===404&&(a==null?void 0:a.data)==="file_not_found")throw new ae;return(a==null?void 0:a.status)===404&&(a==null?void 0:a.data)==="request_not_found"?null:(n=a==null?void 0:a.data)==null?void 0:n.request}async approveFileAccessRequest(e){const{fileId:t,requester:a}=e,n=await this.request.post(`/api/drive/file/${t}/access-request/status`,{requester:a,requestStatus:"approved"});if(!n)throw new f;if((n==null?void 0:n.status)===400&&(n==null?void 0:n.data)==="access_request_already_approved")throw new ra;if((n==null?void 0:n.status)===400&&(n==null?void 0:n.data)==="access_request_already_denied")throw new sa;return(n==null?void 0:n.status)===200}async denyFileAccessRequest(e){const{fileId:t,requester:a}=e,n=await this.request.post(`/api/drive/file/${t}/access-request/status`,{requester:a,requestStatus:"denied"});if(!n)throw new f;if((n==null?void 0:n.status)===400&&(n==null?void 0:n.data)==="access_request_already_approved")throw new ra;if((n==null?void 0:n.status)===400&&(n==null?void 0:n.data)==="access_request_already_denied")throw new sa;return(n==null?void 0:n.status)===200}async changeFileAccessRequestRole(e){const{fileId:t,requester:a,role:n}=e,i=await this.request.post(`/api/drive/file/${t}/access-request/role`,{requester:a,role:n});if(!i)throw new f;return(i==null?void 0:i.status)===200}async removeFileAccessRequest(e){const{fileId:t,requester:a}=e,n=await this.request.delete(`/api/drive/file/${t}/access-request/${a}`);if(!n)throw new f;return n.status===200||n.status===202}async checkTeamFileLimitStatus(e){const{teamId:t,targetLimit:a}=e,n=await this.request.post("/api/drive/file-limit-status",{teamId:t,targetLimit:a});if(!n)throw new f;return n.data}}var pn="https://js.stripe.com/v3",Is=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ta="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Cs=function(){for(var e=document.querySelectorAll('script[src^="'.concat(pn,'"]')),t=0;t<e.length;t++){var a=e[t];if(Is.test(a.src))return a}return null},Sa=function(e){var t="",a=document.createElement("script");a.src="".concat(pn).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(a),a},bs=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:t})},be=null,Ue=null,qe=null,Ds=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Ts=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Ss=function(e){return be!==null?be:(be=new Promise(function(t,a){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(Ta),window.Stripe){t(window.Stripe);return}try{var n=Cs();if(n&&e)console.warn(Ta);else if(!n)n=Sa(e);else if(n&&qe!==null&&Ue!==null){var i;n.removeEventListener("load",qe),n.removeEventListener("error",Ue),(i=n.parentNode)===null||i===void 0||i.removeChild(n),n=Sa(e)}qe=Ts(t,a),Ue=Ds(a),n.addEventListener("load",qe),n.addEventListener("error",Ue)}catch(s){a(s);return}}),be.catch(function(t){return be=null,Promise.reject(t)}))},Rs=function(e,t,a){if(e===null)return null;var n=e.apply(void 0,t);return bs(n,a),n},De,hn=!1,mn=function(){return De||(De=Ss(null).catch(function(e){return De=null,Promise.reject(e)}),De)};Promise.resolve().then(function(){return mn()}).catch(function(o){hn||console.warn(o)});var Ra=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];hn=!0;var n=Date.now();return mn().then(function(i){return Rs(i,t,n)})};function Ps(o){return o>64&&o<91?o-65:o>96&&o<123?o-71:o>47&&o<58?o+4:o===43?62:o===47?63:0}function Os(o,e){const t=o.replace(/[^A-Za-z0-9\+\/]/g,""),a=t.length,n=a*3+1>>>2,i=new Uint8Array(n);for(var s,l,r=0,p=0,u=0;u<a;u++)if(l=u&3,r|=Ps(t.charCodeAt(u))<<18-6*l,l===3||a-u===1){for(s=0;s<3&&p<n;s++,p++)i[p]=r>>>(16>>>s&24)&255;r=0}return i}function He(o){return o<26?o+65:o<52?o+71:o<62?o-4:o===62?43:o===63?47:65}function Fs(o){let e=(3-o.length%3)%3,t="";for(var a,n=o.length,i=0,s=0;s<n;s++)a=s%3,i|=o[s]<<(16>>>a&24),(a===2||o.length-s===1)&&(t+=String.fromCharCode(He(i>>>18&63),He(i>>>12&63),He(i>>>6&63),He(i&63)),i=0);return e===0?t:t.substring(0,t.length-e)+(e===1?"=":"==")}function xs(o){let e="";for(var t,a=o.length,n=0;n<a;n++)t=o[n],e+=String.fromCharCode(t>251&&t<254&&n+5<a?(t-252)*1073741824+(o[++n]-128<<24)+(o[++n]-128<<18)+(o[++n]-128<<12)+(o[++n]-128<<6)+o[++n]-128:t>247&&t<252&&n+4<a?(t-248<<24)+(o[++n]-128<<18)+(o[++n]-128<<12)+(o[++n]-128<<6)+o[++n]-128:t>239&&t<248&&n+3<a?(t-240<<18)+(o[++n]-128<<12)+(o[++n]-128<<6)+o[++n]-128:t>223&&t<240&&n+2<a?(t-224<<12)+(o[++n]-128<<6)+o[++n]-128:t>191&&t<224&&n+1<a?(t-192<<6)+o[++n]-128:t);return e}function Ls(o){let e,t,a=o.length,n=0;for(let i=0;i<a;i++)t=o.charCodeAt(i),n+=t<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;e=new Uint8Array(n);for(let i=0,s=0;i<n;s++)t=o.charCodeAt(s),t<128?e[i++]=t:t<2048?(e[i++]=192+(t>>>6),e[i++]=128+(t&63)):t<65536?(e[i++]=224+(t>>>12),e[i++]=128+(t>>>6&63),e[i++]=128+(t&63)):t<2097152?(e[i++]=240+(t>>>18),e[i++]=128+(t>>>12&63),e[i++]=128+(t>>>6&63),e[i++]=128+(t&63)):t<67108864?(e[i++]=248+(t>>>24),e[i++]=128+(t>>>18&63),e[i++]=128+(t>>>12&63),e[i++]=128+(t>>>6&63),e[i++]=128+(t&63)):(e[i++]=252+(t>>>30),e[i++]=128+(t>>>24&63),e[i++]=128+(t>>>18&63),e[i++]=128+(t>>>12&63),e[i++]=128+(t>>>6&63),e[i++]=128+(t&63));return e}const Pa=o=>Fs(Ls(o)),ks=o=>xs(Os(o)),It="action",Ns=new URL(window.location.href);var fn=(o=>(o.openFile="openFile",o.saveToCloud="saveToCloud",o.openCollaborateDialog="openCollaborateDialog",o.openPaymentResultDialog="openPaymentResultDialog",o.openPaymentPlanDialog="openPaymentPlanDialog",o.changeSeatsRedirect="changeSeatsRedirect",o.newDriveFile="newDriveFile",o.newLocalFile="newLocalFile",o.newCloudFile="newCloudFile",o.openProfileSettingsDialogWithExternalStorageTab="openProfileSettingsDialogWithExternalStorageTab",o))(fn||{});const at=class at{constructor(){this.handlers={}}static appendActionURL(e){const t=ze(),a={name:e.name,args:e.args};window.sessionStorage.setItem(t,Pa(JSON.stringify(a))),Ee({action:t})}static getActionURL(e){const t=ze(),a={name:e.name,args:e.args},n=new URL(e.url);return n.searchParams.append(It,t),window.sessionStorage.setItem(t,Pa(JSON.stringify(a))),logger.log("Action URL Generated: ",n.toString(),a),n.toString()}static cleanActionFromURL(){Ee({[It]:""})}async executeActionFromURL(){const e=Ns.searchParams.get(It),t=e&&window.sessionStorage.getItem(e);if(at.cleanActionFromURL(),!e)return;if(!t){logger.error("Action from url are rejected due to invalid actions");return}const a=ks(t||""),n=JSON.parse(a);logger.log("Action Loaded",n),await this.dispatch(n.name,n.args),window.sessionStorage.removeItem(e)}register(e,t){if(this.handlers[e]||(this.handlers[e]=[]),!this.handlers[e].includes(t))return this.handlers[e].push(t),this}async dispatch(e,t){this.handlers[e]&&await Promise.all(this.handlers[e].map(a=>a&&a(t)))}};at.ActionNames=fn;let ve=at;function Vs(){async function o(t={}){const a=y(()=>c(()=>import("./confetti-explosion.chunk.CbJn7oU1.js"),__vite__mapDeps([0,1])));await ke(a,{flags:[Le.PromiseHook],propsData:t})}async function e(t={}){return o({fromTop:!0,particleCount:120,force:.5,stageWidth:1600,stageHeight:1600,duration:3500,...t})}return{showConfetti:o,showRainingConfetti:e}}const Bs=Ae({name:"BaseOverlay",props:{isActivated:{type:Boolean,default:!1},escClose:{type:Boolean,default:!0},zIndex:{type:Number,default:2001}},emits:["overlay-close"],setup(o,e){const t=G(null),a=G({zIndex:o.zIndex.toString()}),n=()=>{e.emit("overlay-close")},i=u=>{var g;u.defaultPrevented||((g=u==null?void 0:u.key)==null?void 0:g.toLowerCase())==="escape"&&o.escClose&&(n(),u.preventDefault())};Yn(()=>{l(),p()});const s=()=>{l(),t.value=document.createElement("div"),t.value.classList.add("overlay"),t.value.style.position="fixed",t.value.style.width="100vw",t.value.style.height="100vh",t.value.style.left="0",t.value.style.top="0",t.value.style.zIndex=(o.zIndex-1).toString(),t.value.style.backgroundColor="transparent",t.value.addEventListener("click",n),a.value.zIndex=o.zIndex.toString(),document.body.appendChild(t.value)},l=()=>{t.value&&(document.body.removeChild(t.value),t.value=null)},r=()=>{document.addEventListener("keydown",i)},p=()=>{document.removeEventListener("keydown",i)};return ge(()=>o.isActivated,u=>{u?(s(),r()):(l(),p())}),{containerStyle:a,emitClose:n}}});function Ms(o,e,t,a,n,i){return M(),z("div",{style:he([{position:"fixed",left:"0",top:"0"},o.containerStyle]),onKeydown:e[0]||(e[0]=Zn(Ha((...s)=>o.emitClose&&o.emitClose(...s),["stop","prevent"]),["esc"]))},[ce(o.$slots,"default")],36)}const Us=nt(Bs,[["render",Ms]]),qs={key:0},Hs={key:0,class:"w-full"},$s={key:0,class:"flex w-full justify-end gap-2"},Ws=Ae({__name:"new-base-modal-dialog",props:{height:{default:null},maxHeight:{default:null},minHeight:{default:200},width:{default:604},maxWidth:{default:null},minWidth:{default:null},dialogClass:{default:""},dialogHeaderClass:{default:""},dialogBodyClass:{default:""},dialogFooterClass:{default:""},dialogOverlayClass:{},dialogStyles:{type:[Boolean,null,String,Object,Array],default:()=>({})},dialogHeaderStyles:{type:[Boolean,null,String,Object,Array],default:()=>({})},dialogHeaderTitleStyles:{type:[Boolean,null,String,Object,Array],default:()=>({})},dialogBodyStyles:{type:[Boolean,null,String,Object,Array],default:()=>({})},dialogFooterStyles:{type:[Boolean,null,String,Object,Array],default:()=>({})},title:{default:""},isOpened:{type:Boolean,default:!1},escClose:{type:Boolean,default:!0},closeButton:{type:Boolean,default:!1},buttons:{default:()=>[]},isModalDialogCloseDisabled:{type:Boolean,default:!1},overlayClasses:{default:""},modalClasses:{default:""},isMobileDrawer:{type:Boolean,default:null},customDialogAnimation:{default:""}},emits:["modal-dialog-close"],setup(o,{expose:e,emit:t}){const a=o,n=t,i=G(!1),s=G(),l=G(!1),r=Ht(h=>{l.value=h},10),{isPhoneSizeViewportWidth:p}=wo(),u=O(()=>typeof a.isMobileDrawer=="boolean"?a.isMobileDrawer:p.value),g=O(()=>u.value?"slide-in-out":a.customDialogAnimation||"slide-in-out-half"),w=h=>typeof h=="number"?h+"px":typeof h=="string"?h:"",v=O(()=>{const h={width:u.value?"100%":w(a.width),height:w(a.height),"max-height":u.value?"100%":`${w(a.maxHeight)||"90%"}`,"min-height":"none","--modal-dialog-max-height":w(a.maxHeight),"max-width":u.value?"100%":`${w(a.maxWidth)||"90%"}`,"min-width":"none"};return a.minHeight&&(h["min-height"]=w(a.minHeight)),a.minWidth&&(h["min-width"]=w(a.minWidth)),h}),A=()=>{n("modal-dialog-close")},C=async()=>{var h,b;if(await new Promise(V=>setTimeout(V)),!!s.value&&(!document.activeElement||!((h=s.value)!=null&&h.contains(document.activeElement)))){const V=(b=s.value)==null?void 0:b.querySelector(".modal-dialog__body");V==null||V.focus()}},m=async()=>{l.value!==!1&&(l.value=!1,await Jt(()=>i.value).toBe(!0,{timeout:100,throwOnTimeout:!1}),await Jt(()=>i.value).toBe(!1,{timeout:300,throwOnTimeout:!1}))};return ge(()=>a.isOpened,h=>{h?r(!0):l.value=!1}),ge(()=>a.isOpened,(h,b)=>{h&&h!==b&&C()}),qa(()=>{C(),Fe().listenRouterPathChange(A),r(!!a.isOpened)}),e({dialog:s,closeDialogWithAnimation:m}),(h,b)=>{const V=$t("fw-divider");return Rt((M(),te(Us,{"is-activated":h.isOpened,class:ne(["flex h-full w-full flex-col items-center",h.twMerge(h.overlayClasses,u.value?"justify-end":"justify-center")]),onOverlayClose:A},{default:Z(()=>[_e(ta,{name:g.value,onBeforeEnter:b[0]||(b[0]=S=>i.value=!0),onAfterLeave:b[1]||(b[1]=S=>i.value=!1)},{default:Z(()=>[Rt(x("div",{ref_key:"dialog",ref:s,class:ne(["modal-dialog uk-fw-modal-dialog",h.twMerge("relative flex flex-col outline-none",h.modalClasses)]),style:he(v.value)},[b[2]||(b[2]=x("div",{class:"modal-dialog__background pointer-events-none absolute left-0 top-0 h-full w-full"},null,-1)),x("div",{class:ne(["modal-dialog__entity",h.twMerge("flex h-full flex-col overflow-hidden rounded-xl bg-fill-surfaceBright-light shadow-elevation-l4-light dark:bg-fill-surfaceBright-dark dark:shadow-elevation-l4-dark",u.value?"!rounded-b-none !rounded-t-3xl":"",h.dialogClass)]),style:he(h.dialogStyles)},[x("div",{class:ne(h.twMerge("no-shrink relative flex items-center justify-between px-6 pt-6",h.dialogHeaderClass)),style:he(h.dialogHeaderStyles)},[ce(h.$slots,"header",{},()=>[x("div",{class:"w-full break-words text-mobile-headline-small sm:text-desktop-headline-small",style:he(h.dialogHeaderTitleStyles)},[ce(h.$slots,"header-title",{},()=>[h.title?(M(),z("span",qs,$(h.title),1)):ue("",!0)],!0)],4)],!0),h.closeButton?(M(),te(No,{key:0,class:ne(["z-10 self-baseline",[h.isModalDialogCloseDisabled?"cursor-not-allowed":""]]),disabled:h.isModalDialogCloseDisabled,onClick:A},null,8,["class","disabled"])):ue("",!0)],6),ce(h.$slots,"separator",{},void 0,!0),_e(Rn,{class:"h-full"},{default:Z(()=>[ce(h.$slots,"outer-body",{},()=>[x("div",{tabindex:"-1",style:he(h.dialogBodyStyles),class:ne(h.twMerge("modal-dialog__body relative h-full w-full max-w-full px-6 py-4 text-desktop-body-1 outline-none sm:py-6",h.dialogBodyClass))},[ce(h.$slots,"default",{},void 0,!0)],6)],!0)]),_:3}),ce(h.$slots,"between-body-footer",{},()=>[h.buttons.length?(M(),z("div",Hs,[_e(V)])):ue("",!0)],!0),x("div",{class:ne(["modal-dialog__footer",h.twMerge("no-shrink px-6 pb-8 pt-4 sm:pb-[18px]",h.dialogFooterClass)]),style:he(h.dialogFooterStyles)},[ce(h.$slots,"footer",{},()=>[h.buttons.length?(M(),z("div",$s,[(M(!0),z(Ot,null,Qn(h.buttons,(S,_)=>(M(),te(Ze,{key:`modal-dialog-btn#${_}`,class:ne(h.twMerge("flex-1 sm:flex-none",S.class)),theme:S.type,style:he((S==null?void 0:S.style)??null),size:(S==null?void 0:S.size)||(B(p)?"large":"small"),disabled:!!(S!=null&&S.isDisabled),"data-focus":"not-allow",onClick:Ha(E=>{var R;return(R=S==null?void 0:S.onClick)==null?void 0:R.call(S)},["stop"])},{default:Z(()=>[je($(S.text),1)]),_:2},1032,["class","theme","style","size","disabled","onClick"]))),128))])):ue("",!0)],!0),ce(h.$slots,"footer-notification",{},void 0,!0)],6)],6)],6),[[Pt,l.value]])]),_:3},8,["name"]),_e(ta,{name:"fade"},{default:Z(()=>[l.value?(M(),z("div",{key:0,class:ne(h.twMerge("absolute h-full w-full bg-[rgba(0,0,0,0.5)] dark:bg-[rgba(0,0,0,0.7)]",h.dialogOverlayClass)),style:{"z-index":"-1"},onClick:A},null,2)):ue("",!0)]),_:1})]),_:3},8,["is-activated","class"])),[[Pt,h.isOpened]])}}}),_n=nt(Ws,[["__scopeId","data-v-b822f590"]]),Xs=o=>{const{xmindId:e}=o??{};let t;e?t=parseInt(ot(e).toString(),16)%st.length:t=Math.floor(Math.random()*st.length);const a=st[t];return{foregroundColor:Pn,backgroundColor:a}},Gs=o=>{var v,A;const{avatarAbbreviation:e,minFontSize:t="12",backgroundColor:a,foregroundColor:n,minFontWeight:i="500",minWidth:s=32,minHeight:l=32}=o,r=/(?<size>\d+)(?<unit>\w+)/.exec(t),p=Number(((v=r==null?void 0:r.groups)==null?void 0:v.size)||"12"),u=((A=r==null?void 0:r.groups)==null?void 0:A.unit)||"",g=s||32,w=l||32;return`
<svg width="${g}" height="${w}" viewBox="0 0 ${g} ${w}" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="${g}" height="${w}" x="0"  y="0" rx="4" fill="${a}" fill-opacity="1" />
  <text x="${g/2}" y="${(w-p)/2}" fill="${n}" text-anchor="middle" dominant-baseline="central" font-weight="${i}" font-size="${p}${u}" font-family="system-ui, sans-serif">
     ${e.toUpperCase()}
  </text>
</svg>
`},Oa=o=>{const{firstname:e,lastname:t,name:a,style:n={}}=o,i=Xs({xmindId:o.xmindId}),s=o.xmindId?i.foregroundColor:o.foregroundColor||i.foregroundColor,l=o.xmindId?i.backgroundColor:o.backgroundColor||i.backgroundColor;let r=[e==null?void 0:e[0],t==null?void 0:t[0]].filter(Boolean).join("")||(a==null?void 0:a[0])||"A";r=r.replace(/&/g,"").replace(/</g,"").replace(/>/g,"").replace(/"/g,"").replace(/'/g,"")||"A";const p=Gs({backgroundColor:l,foregroundColor:s,avatarAbbreviation:r,minWidth:n.width??32,minHeight:n.height??32,minFontSize:n.fontSize??"14",minFontWeight:n.fontWeight??"500"});return`data:image/svg+xml;utf8,${encodeURIComponent(p)}`},js={class:"flex flex-col items-center"},zs={class:"dialog-container"},Ks={key:0},Ys={class:"text-desktop-subhead-large"},Zs={class:"text-desktop-headline-large"},Qs=["data-src"],Js={key:1,class:"!text-[24px]"},ec={class:"flex flex-col gap-3 text-desktop-body-large"},tc={key:0,class:"text-desktop-body-large"},ac={key:0,class:"text-desktop-body-3"},nc={class:"text-desktop-body-large"},oc=Ae({__name:"payment-success",props:{orderVersion:{},isTrialOrder:{type:Boolean},team:{}},setup(o){const e=o,{profile:t}=P(),a=O(()=>e.orderVersion==="duo"||e.orderVersion==="plus"||e.orderVersion==="xmbund"||e.orderVersion==="premium"),n=O(()=>a.value?(t==null?void 0:t.avatar_url)||Oa({name:t==null?void 0:t.full_name,xmindId:t==null?void 0:t.user})||Y("/assets/static/images/home-top-bar/avatar2.svg"):e.team.imageUrl||Oa({name:e.team.name,xmindId:e.team.teamId,style:{fontWeight:"600"}})),{resolve:i}=Xa(),s=()=>{i(!0)},l=O(()=>["plus","premium","essential","business","duo","xmbund"].includes(e.orderVersion)),r=O(()=>Ic(e.orderVersion)),p=d("Payment Successful"),{showRainingConfetti:u}=Vs();return u(),(g,w)=>(M(),te(_n,{"is-opened":!0,width:360,class:"payment-success-dialog",onModalDialogClose:s},{default:Z(()=>[x("div",js,[x("div",zs,[l.value?(M(),z("div",Ks,[x("h2",Ys,$(B(d)("Welcome to")),1),x("h1",Zs,$(B(ct)==="cn"?`Xmind ${r.value}`:r.value),1)])):ue("",!0),x("div",{class:ne(["h-20 w-20 bg-contain bg-no-repeat",a.value?"rounded-full":"rounded-2xl"]),"uk-img":"","data-src":n.value},null,10,Qs),g.orderVersion==="addon"?(M(),z("h1",Js,$(B(p)),1)):ue("",!0),x("div",ec,[l.value?(M(),z("p",tc,[x("span",null,$(B(d)("Your journey starts here!")),1),x("span",null,$(B(d)("Enjoy and happy mind mapping!")),1)])):g.orderVersion==="addon"?(M(),z(Ot,{key:1},[B(ct)==="cn"?(M(),z("p",ac,w[2]||(w[2]=[x("span",null,$("欢迎购买 AI 加量包，"),-1),x("span",null,$("本次已成功为你增加 AI 使用次数。"),-1),x("span",null,$("尽情享受 AI 加持的思维导图新体验。"),-1)]))):(M(),z(Ot,{key:1},[x("p",nc,$(B(d)("Thank you for purchasing Credits Add-on. An additional 500 credits has been successfully added to your balance.")),1),x("p",null,$(B(d)("Enjoy and happy mind mapping!")),1)],64))],64)):ue("",!0)]),B(ct)==="cn"&&g.orderVersion==="addon"?(M(),te(Ze,{key:2,size:"medium",theme:"ai",onClick:w[0]||(w[0]=v=>s())},{default:Z(()=>w[3]||(w[3]=[je($("立即使用"))])),_:1})):(M(),te(Ze,{key:3,size:"medium",theme:"secondary",onClick:w[1]||(w[1]=v=>s())},{default:Z(()=>[je($(B(d)("Start Now")),1)]),_:1}))])])]),_:1}))}}),gn=nt(oc,[["__scopeId","data-v-d6018d8e"]]),mu=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),ic={class:"flex flex-col items-center gap-[16px]"},rc={class:"text-desktop-display-4"},sc=["data-src"],cc={class:"text-center text-desktop-body-3"},lc=Ae({__name:"renew-success",setup(o){const{resolve:e}=Xa(),t=()=>e(!0);return(a,n)=>(M(),te(_n,{class:"renew-success-dialog","is-opened":!0,width:360,onModalDialogClose:t},{default:Z(()=>[x("div",ic,[x("span",rc,$(a.$T("Renew Successfully")),1),x("img",{"uk-img":"",class:"w-[120px]","data-src":a.toURL("/assets/static/images/dialog-payment/renew-successful.png")},null,8,sc),x("span",cc,$(a.$T("Your subscription has been successfully renewed. Thank you for continuing to be part of the Xmind AI community!")),1),_e(Ze,{theme:"secondary",size:"medium",class:"mt-[24px] self-stretch",onClick:t},{default:Z(()=>[je($(a.$T("Start Now")),1)]),_:1})])]),_:1}))}}),uc=nt(lc,[["__scopeId","data-v-8045612e"]]),Ct=new Set,Re=()=>{const o=O(()=>{var m;return T().services.router.vueRouter.currentRoute.value.name==="home-sections"?((m=T().services.router.vueRouter.currentRoute.value.params)==null?void 0:m.section)??"recents":null}),e=O(()=>{var m;return(m=T().services.router.vueRouter.currentRoute.value)==null?void 0:m.path}),t=O(()=>{var m;return(m=T().services.router.vueRouter.currentRoute.value)==null?void 0:m.hash}),a=O(()=>{var h;const m=T().services.router.vueRouter.currentRoute.value.name==="home-sections"?(h=T().services.router.vueRouter.currentRoute.value.params)==null?void 0:h.pathMatch:[];return Array.isArray(m)?m:m?[m]:[]}),n=O(()=>["recents","sharing","trash"].includes(o.value)?o.value:null),i=O(()=>v(o.value)?C(a.value[0]??"").teamId??"":""),s=O(()=>v(o.value)?C(a.value[0]??"").spaceId??"":""),l=O(()=>{const m={team:1,"my-works":0},h=a.value[m[o.value]]??null;return h&&Pe(h)}),r=async m=>{const{section:h,isReplaceRoute:b,extraPaths:V,teamId:S,spaceId:_,isNewTab:E}=m,R=v(h)?A(S,_):"";T().services.router.changeHomeSectionPath({section:h,isReplaceRoute:b,paths:[R,...V??[]].filter(Boolean),isNewTab:E}),await new Promise(L=>setTimeout(L,50))},p=m=>m===""||m===P().userXmindId?`${window.location.origin}/home/my-works`:`${window.location.origin}/home/team/${m?Pe(m):""}`,u=async m=>{const{isReplaceRoute:h,folderId:b,teamId:V,spaceId:S,isNewTab:_}=m,E=V??i.value,R=S??s.value,L=E===""||E===P().userXmindId;await r({section:L?"my-works":"team",teamId:L?"":E,spaceId:L?"":R,isReplaceRoute:h,extraPaths:[`${Pe(b)}`],isNewTab:_})},g=()=>{T().services.router.backAndReplace()},w=({hash:m,onEnter:h,onLeave:b})=>{let V;if(Ct.has(m)){logger.warn(`Hash ${m} has already been registered`);return}const S=[];return S.push(T().services.router.vueRouter.afterEach(_=>{const E=history.state.position;_.hash!==m&&E<V?(b==null||b(),V=E):_.hash===m&&E>V&&(h==null||h(),V=E)})),Ct.add(m),{unregister:()=>{S.forEach(_=>_()),S.length=0,Ct.delete(m),T().services.router.vueRouter.currentRoute.value.hash===m&&T().services.router.vueRouter.back()},enter:()=>{V=history.state.position,T().services.router.vueRouter.push({hash:m,query:{...T().services.router.vueRouter.currentRoute.value.query}})},leave:()=>T().services.router.vueRouter.back()}};function v(m){return m==="team"||m==="recents"||m==="sharing"||m==="trash"}function A(m,h){const b=m?Fa(m):"",V=h?Fa(h):"";return[b,V].filter(Boolean).join("-")}function C(m){const[h,b]=m.split("-");return{teamId:h?xa(h):"",spaceId:b?xa(b):""}}return{currentHomeSection:o,homeSectionSpaceId:s,selectedRecentsTab:n,currentRouterPath:e,currentRouterHash:t,homeSectionTeamId:i,homeDriveFolderId:l,registerHash:w,isTeamScopedSection:v,changeHomeSectionRouter:r,changeHomeDriveFolderRouter:u,revertToLastHomeRouter:g,getHomeSectionUrlForTeam:p}};function Fa(o){return Pe(encodeURIComponent(o).replace(/-/g,"%2D"))}function xa(o){return decodeURIComponent(Pe(o)).replace(/%2D/g,"-")}const dc=(o,e)=>{ke(gn,{flags:[Le.PromiseHook],propsData:{orderVersion:o,team:e}})},pc=()=>{qn(),ke(uc,{flags:[Le.PromiseHook]})},Zt=()=>{T().services.action.dialog.confirm({title:d("Upgrade Not Supported"),description:d("The current account type does not support upgrading the plan. Please contact customer service, and we will assist you as soon as possible."),confirmButtonText:d("Contact Now"),cancelButtonText:d("Cancel"),onConfirm:()=>(T().services.action.dialog.openFeedbackDialog(),!0)})},La=(o,e)=>{var t,a;if((o==null?void 0:o.status)!==200&&((a=(t=Ga)[e])==null||a.call(t,`${o.status} ${o.data}`)),!o||!o.status)H.show({message:d("No Internet connection, please check your network settings."),topic:"failed"});else{if(o.status===200)return;if(o.status===400)switch(o.data){case"not_plus_account":{H.show({message:d("Upgrade to buy more credits"),topic:"failed"});break}case"invalid_card":H.show({message:d("Payment declined, please provide a valid card number."),topic:"failed"})}else if(o.status===401)switch(o.data){case"invalid_account":H.show({message:d("Login session has expired, please sign in again."),topic:"failed"})}else if(o.status===403)switch(o.data){case"operation_too_fast":{H.show({message:d("Perform too fast, please try again later."),topic:"failed"});break}case"invalid_team_role":{H.show({message:d("Please contact team admin for the purchase."),topic:"failed"});break}case 4001:{H.show({message:d("Purchase failed. You are already $1 subscriber, can not purchase this bundle","Xmind Pro"),topic:"failed"});break}case 4002:{H.show({message:d("Purchase failed. You are already $1 subscriber, can not purchase this bundle","Xmind AI"),topic:"failed"});break}default:Zt()}else if(o.status===404)switch(o.data){case"invalid_order":H.show({message:d("Cannot purchase, please create a new order."),topic:"failed"})}else if(o.status===406)switch(o.data){case"trial_access_unavailable":H.show({message:d("Trial access is not available for this account."),topic:"failed"})}else o.status>=500?H.show({message:d("Server error, please try again later."),topic:"failed"}):logger.error(o)}},ka=o=>({status:o.status,userInfo:o.user_info,orderId:o.order_num,version:o.version,autoRenewMonth:o.autorenew_month,currency:o.currency,total:o.amount??o.total,singlePrice:o.single_price,discount:o.discount,trial:o.trial,trialDay:o.trial_day,trialCredits:o.trial_credits,trialEndDiscount:o.trial_end_discount,trialEndAmount:o.trial_end_amount,teamId:o.team_id,quantity:o.quantity,upgradeDiscount:o.upgrade_discount,couponDiscount:o.coupon_discount_amount,freeMonth:o.free_month,stripeAccount:o.st_ac,taxEstimated:o._tax_estimated});let bt;const hc=1e3*60*60*24,fu=async()=>bt&&Date.now()-bt<hc?!0:(bt=Date.now(),await P().validateAccount({isForce:!0}).catch(e=>{e instanceof Ft&&(P().clearLoginState(),T().services.action.dialog.openLoginDialog({isClosable:!1,afterLogin:async()=>(window.location.reload(),await new Promise(t=>setTimeout(t,5e3)),!0)}))})),_u=o=>{const{isUserProSubscribed:e,isUserProMobileSubscribed:t,isUserProZenSubscribed:a,userProAutoRenewMonth:n}=P();return["team","essential"].includes(o.currentPlan)||o.orderVersion==="premium"&&e&&(a||t||n>12)?(Zt(),!1):!0},gu=async o=>{const{isUserProSubscribedFromAppStore:e,isUserProAutoRenewable:t,xmindProSubDetails:a}=P(),n=async()=>{let i;return a.appstore.some(l=>l.status==="sub")?i=d("App Store"):a.google.some(l=>l.status==="sub")?i=d("Google Play"):i=d("other store"),await T().services.action.dialog.confirm({title:d("Duplicate Subscription"),description:d("The current account already has an active auto-renewal plan from $1. If you continue with the purchase, multiple subscriptions will renew simultaneously, but only the latest subscription plan will remain active.",i),cancelButtonText:d("Manage Subscription"),confirmButtonText:d("Continue to Purchase"),onCancel:()=>(window.open("https://xmind.app/account/","_blank"),!1),onConfirm:()=>!0})};return o.orderVersion==="premium"&&e&&t?await n():!0};class W{constructor(e){this.cloudKitRequest=new Wt({authToken:(e==null?void 0:e.authToken)||"",endpoint:(e==null?void 0:e.endpoint)||"",imRef:e==null?void 0:e.imRef})}async initStripe(e=!1){try{W.stripe=W.stripe?W.stripe:await Ra(On,{locale:"en"}),W.stripeXmindPro=W.stripeXmindPro?W.stripeXmindPro:await Ra(Fn,{locale:"en"})}catch(t){logger.error(t)}return e?W.stripeXmindPro:W.stripe}async createOrder(e){const{version:t,invoiceEmail:a,month:n,isTrialOrder:i,teamId:s,seats:l,coupon:r,currency:p}=e,u=await this.cloudKitRequest.post("/api/account/order",{version:t,invoiceEmail:a,currency:(p||"usd").toLocaleLowerCase(),isTrialOrder:i,teamId:s,...n&&{month:n},...l&&{seats:l},...r&&{coupon:r}});if(La(u,"createOrderError"),u&&u.status===200&&u.data){const{orderHash:g}=u.data;return g}}async getOrder(e){const t=await this.cloudKitRequest.get(`/api/account/order/${e}`);if(t&&t.status===200&&t.data&&t.data.order){const a=t.data.order;return ka(a)}}async stripePay(e,t,a,n=!1){var p;const i=((p=T().services.router.vueRouter.currentRoute.value)==null?void 0:p.name)==="payment",s=Re().currentHomeSection.value||i?Re().getHomeSectionUrlForTeam(a.teamId):window.location.href,l=ve.getActionURL({url:s,name:ve.ActionNames.openPaymentResultDialog,args:{orderHash:e,team:a}}),r=await this.cloudKitRequest.put(`/api/account/order/${e}`,{stripeToken:t,returnUrl:l,isXmindAppStripeOrder:n});if(La(r,"payOrderError"),r&&r.status===200&&r.data){const u=r.data.result;switch(u._code){case 200:return{status:"success",url:l};case 410:return{status:"redirect",url:u.redirect_url};default:return{status:"fail",msg:u.msg}}}}async getOrdersStatus(e){var n,i;const{teamId:t}=e,a=await this.cloudKitRequest.get(`/api/account/order/status/${t}`);return((i=(n=a==null?void 0:a.data)==null?void 0:n.result)==null?void 0:i._code)===200?a.data.result:{plans:[],payments:[]}}async cancelOrder(e){const{id:t,teamId:a}=e,n=await this.cloudKitRequest.delete(`/api/account/order/${a}/${t}`);if(n&&n.status===200&&n.data)switch(n.data.result._code){case 200:return!0;default:return!1}}async renewOrder(e){const{id:t,teamId:a}=e,n=await this.cloudKitRequest.post(`/api/account/order/${a}/${t}`);if(n&&n.status===200&&n.data)switch(n.data.result._code){case 200:return pc(),!0;default:return!1}}async getInvoiceSetting(){const e=await this.cloudKitRequest.get("/api/account/invoice-setting");if(e&&e.status===200&&e.data)return e.data.invoice}async updateInvoiceSetting(e){const t=await this.cloudKitRequest.post("/api/account/invoice-setting",e);if(t&&t.status===200&&t.data)return t.data}async changePaymentMethod(e){const{id:t,teamId:a,newStripeToken:n}=e,i=await this.cloudKitRequest.post(`/api/account/order/${a}/${t}/update-card`,{newStripeToken:n});if(i&&i.status===200&&i.data)switch(i.data.result._code){case 200:return!0;default:return!1}}async redeemCode(e,t){if(e=e.trim(),!/^[A-Za-z0-9]+$/.test(e))throw new ht;const a=await this.cloudKitRequest.post(`/api/account/${t.teamId}/redeem`,{code:e});if((a==null?void 0:a.data)==="exceed-redeem-attempts-threshold")throw new Eo;if((a==null?void 0:a.data)==="invalid_redeem_code")throw new ht;if(!a||!a.data)throw new Ne;const n=a.data.result;switch(n._code){case 200:return dc(n.version,t),!0;default:throw new ht}}async checkUserHasPaymentHistory(){if(!P().isSignedIn){W.isUserHasPaymentHistory=null;return}const e=await this.cloudKitRequest.get("/api/account/has-payments");e&&e.status===200&&e.data?W.isUserHasPaymentHistory=e.data.hasPaymentHistory:W.isUserHasPaymentHistory=null}async isUserEligibleForTrial(){return(W.isUserHasPaymentHistory===null||typeof W.isUserHasPaymentHistory>"u")&&await this.checkUserHasPaymentHistory(),W.isUserHasPaymentHistory===!1}async getSeatFees(e){const{teamId:t,newSeats:a}=e,n=await this.cloudKitRequest.post(`/api/drive/team/${t}/seat-fees`,{newSeats:a});if(n&&n.status===200&&n.data)return{amountDueToday:n.data.amount,nextBillingDate:n.data.next_bill_date,currentCharges:n.data.current_bill_amount,updatedCharges:n.data.new_bill_amount,autoRenewMonth:n.data.autorenew_month}}async changeTeamSeats(e){const{teamId:t,newSeats:a,invoiceEmail:n,allowRedirect:i=!0}=e;let s;if(i){const r=Re().currentHomeSection.value?Re().getHomeSectionUrlForTeam(t):window.location.href;s=ve.getActionURL({url:r,name:ve.ActionNames.changeSeatsRedirect,args:{teamId:t,newSeats:a,invoiceEmail:n}})}const l=await this.cloudKitRequest.post(`/api/drive/team/${t}/seats`,{newSeats:a,invoiceEmail:n,returnUrl:s});return l&&l.status===200?"success":l.status===410&&l.data&&i?(window.open(l.data,"_self"),"redirect"):"fail"}async validateCoupon(e){var i;const{version:t,coupon:a}=e;if(!/^[A-Za-z0-9]+$/.test(a))throw new mt;const n=await this.cloudKitRequest.post("/api/account/coupon",{coupon:a,version:t});if(!n||!n.data)throw new Ne;if(n.data==="exceed-redeem-attempts-threshold")throw new vo;if(((i=n.data.coupon)==null?void 0:i._code)===200)return!0;throw new mt}async calculatePaymentPrice(e){var u;const{version:t,teamId:a,seats:n,coupon:i,month:s,isTrialOrder:l,invoiceEmail:r}=e,p=await this.cloudKitRequest.post("/api/account/order/calculate-price",{version:t,teamId:a,invoiceEmail:r,seats:n,coupon:i,month:s,isTrialOrder:l});if(p&&p.status===403)Zt();else{if(((p==null?void 0:p.data)===4002||(p==null?void 0:p.data)===4001)&&i)throw new Ao;if((p==null?void 0:p.status)===404&&(p==null?void 0:p.data)==="not match"&&i)throw new mt}if(p&&p.status===200&&((u=p.data)!=null&&u.order)){const g=p.data.order;return ka(g)}}async getXaiAddonCn(){const e=await this.cloudKitRequest.get("/api/drive/xai/addon");if(!e||!e.data)throw new Ne;return e.data}async createXaiAddonOrderCn(e){const{payMethod:t,addon:a}=e,{key_version:n,type:i,version:s,extend:l,currency:r,price:p}=a,u=await this.cloudKitRequest.post("/api/drive/xai/addon",{pay_method:t,key_version:n,type:i,version:s,extend:l,currency:r,amount:p});if(!u||!u.data)throw new Ne;return u.data}}const mc=O(()=>({name:d("Free"),plan:"basic",description:d("For anyone to explore classic and essential mind mapping features"),detailsHeader:d("What's included"),details:[{text:d("Create up to $1 maps","10")},{text:d("Get $1 Xmind AI credits for trial","10"),aiTag:!0},{text:d("3-day version history")},{text:d("Use basic themes & stickers")},{text:d("Publish maps with links")},{text:d("Up to $1 Slides in Pitch","5")}],descriptionClass:"!min-h-[18px]"})),wu=O(()=>({name:d("Free"),plan:"basic",description:d("Discover what Xmind can do for you."),detailsHeader:d("What's included"),details:[{text:d("$1 Maps","3")},{text:d("$1 Credits for Trial","10"),aiTag:!0},{text:d("$1-Day Version History","3")},{text:d("$1 Slides for Trial in Pitch","5")}]})),fc=O(()=>({...mc.value,description:d("Discover what Xmind can do for you."),nameClass:"!text-[20px] !font-[600] !leading-[30px]",descriptionClass:"!text-[12px] !font-[400] !leading-[18px] !text-[#6E757C] dark:!text-[#AEB5BD]",detailsHeaderClass:"!text-[14px] !font-[600] !leading-[21px] !text-[#6E757C]",detailsClass:"!text-[14px] !font-[400] !leading-[21px] !text-transparent-dark-9"}));O(()=>({...fc.value,description:d("Discover what Xmind can do for you."),details:[{text:d("$1 Maps","3")},{text:d("$1 Credits for Trial","10"),aiTag:!0},{text:d("$1-Day Version History","3")},{text:d("$1 Slides for Trial in Pitch","5")}],descriptionClass:"!text-[12px] !font-[400] !leading-[18px] !text-[#6E757C] dark:!text-[#AEB5BD]",detailsHeaderClass:"!text-[14px] !font-[600] !leading-[21px] !text-[#6E757C]",detailsClass:"!text-[14px] !font-[400] !leading-[21px] !text-transparent-dark-9"}));const _c=O(()=>({name:d("Premium"),plan:"premium",description:d("For power professional achieving more with AI and collaboration"),detailsHeader:d("Everything in $1, and","Free"),details:[{text:d("Xmind Pro Plan"),icon:Y("/assets/static/icons/app.png"),iconClass:"w-[18px]"},{text:d("Create unlimited collaborative maps")},{text:d("Get $1 credits per month","500"),aiTag:!0},{text:d("AI summarizes long texts, files, links"),aiTag:!0},{text:d("AI breaks down a project into tasks"),aiTag:!0},{text:d("Gantt chart for visual project management ")}],descriptionClass:"!min-h-[18px]"}));O(()=>({..._c.value,name:d("Personal"),plan:"personal"}));O(()=>({name:d("Xmind Duo Suite"),description:d("Xmind Al Personal Plan + Xmind Pro Plan"),details:[{text:d("Xmind Al Personal Plan"),icon:Y("/assets/static/icons/icon_72.png"),iconClass:"w-[18px]"},{text:"",separator:!0},{text:d("Xmind Pro Plan"),icon:Y("/assets/static/icons/app.png"),iconClass:"w-[18px]"},{text:d("Local Storage, Offline Access"),icon:Y("/assets/static/icons/shield.svg"),isIconSvg:!0,iconClass:"text-dark-grey-1"},{text:d("Native Mac App"),icon:Y("/assets/static/icons/apple.svg"),isIconSvg:!0,iconClass:"text-dark-grey-1"},{text:d("Native Windows App"),icon:Y("/assets/static/icons/windows.svg"),isIconSvg:!0,iconClass:"text-dark-grey-1"},{text:d("Linux App"),icon:Y("/assets/static/icons/linux.svg"),isIconSvg:!0,iconClass:"text-dark-grey-1"},{text:d("Native iPhone + iPad App"),icon:Y("/assets/static/icons/apple.svg"),isIconSvg:!0,iconClass:"text-dark-grey-1"},{text:d("Native Android App"),icon:Y("/assets/static/icons/android.svg"),isIconSvg:!0,iconClass:"text-dark-grey-1"}]}));const gc=O(()=>({name:d("Premium"),plan:"premium",description:d("For individuals."),detailsHeader:d("Everything in $1, and","Free"),details:[{text:d("Xmind Pro Plan"),icon:Y("/assets/static/icons/app.png"),iconClass:"w-[18px]"},{text:d("Unlimited Maps")},{text:d("$1 Credits / Month","500"),aiTag:!0},{text:d("Generate To-Do Lists Using AI"),aiTag:!0},{text:d("$1-Day Version History","30")}],nameClass:"!text-[20px] !font-[600] !leading-[30px]",descriptionClass:"!text-[12px] !font-[400] !leading-[18px] !text-[#6E757C] dark:!text-[#AEB5BD]",detailsHeaderClass:"!text-[14px] !font-[600] !leading-[21px] !text-[#6E757C]",detailsClass:"!text-[14px] !font-[400] !leading-[21px] !text-transparent-dark-9"}));O(()=>({...gc.value,name:d("Personal"),plan:"personal",description:d("For Individuals."),details:[{text:d("Unlimited Maps")},{text:d("$1 Credits / Month","500"),aiTag:!0},{text:d("$1-Day Version History",`${xn}`)},{text:d("Unlimited Storage Space")},{text:d("Unlimited Slides in Pitch")},{text:d("Add Tasks, Equations and Attachments")},{text:d("SVG, Markdown, and More Export Formats")}]}));const wc=O(()=>({name:d("Essential"),plan:"essential",description:d("For collaborative teams and startups."),detailsHeader:d("Everything in $1, and","Free"),details:[{text:d("Unlimited Maps")},{text:d("$1 Credits/Seat/Month","500"),aiTag:!0},{text:d("$1-Day Version History","7")},{text:d("Unlimited Storage Space")}]}));O(()=>({...wc.value,nameClass:"!text-[20px] !font-[600] !leading-[30px]",descriptionClass:"!text-[12px] !font-[400] !leading-[18px] !text-[#6E757C] dark:!text-[#AEB5BD]",detailsHeaderClass:"!text-[12px] !font-[600] !leading-[18px] !text-[#6E757C] dark:!text-[#AEB5BD]",detailsClass:"!text-[12px] !font-[400] !leading-[18px] !text-light-grey-1"}));const Ec=O(()=>({name:d("Business"),plan:"business",description:d("Empower co-creation among team members in one workspace."),detailsHeader:d("Everything in $1, and","Free"),details:[{text:d("Unlimited Maps")},{text:d("$1 Credits / Seat / Month","800"),aiTag:!0},{text:d("$1-Day Version History","30")},{text:d("Priority Support")}]}));O(()=>({...Ec.value,nameClass:"!text-[20px] !font-[600] !leading-[30px]",descriptionClass:"!text-[12px] !font-[400] !leading-[18px] !text-[#6E757C] dark:!text-[#AEB5BD]",detailsHeaderClass:"!text-[14px] !font-[600] !leading-[21px] !text-[#6E757C]",detailsClass:"!text-[14px] !font-[400] !leading-[21px] !text-transparent-dark-9"}));const vc=O(()=>({name:d("Enterprise"),plan:"enterprise",description:d("Work across your entire institution, with advanced security."),detailsHeader:d("Everything in $1, and","Business"),details:[{text:d("Custom Credits & Pricing"),aiTag:!0},{text:d("Unlimited Version History")},{text:d("SAML SSO")},{text:d("User Provisioning (SCIM)"),tips:d("(Coming Soon)")},{text:d("Advanced Security & Controls"),tips:d("(Coming Soon)")}]}));O(()=>({...vc.value,nameClass:"!text-[20px] !font-[600] !leading-[30px]",descriptionClass:"!text-[12px] !font-[400] !leading-[18px] !text-[#6E757C] dark:!text-[#AEB5BD]",detailsHeaderClass:"!text-[14px] !font-[600] !leading-[21px] !text-[#6E757C]",detailsClass:"!text-[14px] !font-[400] !leading-[21px] !text-transparent-dark-9"}));var Dt={},Te={},Na;function Ac(){if(Na)return Te;Na=1,Te.remove=i;for(var o=[{base:" ",chars:" "},{base:"0",chars:"߀"},{base:"A",chars:"ⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",chars:"Ꜳ"},{base:"AE",chars:"ÆǼǢ"},{base:"AO",chars:"Ꜵ"},{base:"AU",chars:"Ꜷ"},{base:"AV",chars:"ꜸꜺ"},{base:"AY",chars:"Ꜽ"},{base:"B",chars:"ⒷＢḂḄḆɃƁ"},{base:"C",chars:"ⒸＣꜾḈĆCĈĊČÇƇȻ"},{base:"D",chars:"ⒹＤḊĎḌḐḒḎĐƊƉᴅꝹ"},{base:"Dh",chars:"Ð"},{base:"DZ",chars:"ǱǄ"},{base:"Dz",chars:"ǲǅ"},{base:"E",chars:"ɛⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎᴇ"},{base:"F",chars:"ꝼⒻＦḞƑꝻ"},{base:"G",chars:"ⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾɢ"},{base:"H",chars:"ⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",chars:"ⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",chars:"ⒿＪĴɈȷ"},{base:"K",chars:"ⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",chars:"ⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",chars:"Ǉ"},{base:"Lj",chars:"ǈ"},{base:"M",chars:"ⓂＭḾṀṂⱮƜϻ"},{base:"N",chars:"ꞤȠⓃＮǸŃÑṄŇṆŅṊṈƝꞐᴎ"},{base:"NJ",chars:"Ǌ"},{base:"Nj",chars:"ǋ"},{base:"O",chars:"ⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OE",chars:"Œ"},{base:"OI",chars:"Ƣ"},{base:"OO",chars:"Ꝏ"},{base:"OU",chars:"Ȣ"},{base:"P",chars:"ⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",chars:"ⓆＱꝖꝘɊ"},{base:"R",chars:"ⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",chars:"ⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",chars:"ⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"Th",chars:"Þ"},{base:"TZ",chars:"Ꜩ"},{base:"U",chars:"ⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",chars:"ⓋＶṼṾƲꝞɅ"},{base:"VY",chars:"Ꝡ"},{base:"W",chars:"ⓌＷẀẂŴẆẄẈⱲ"},{base:"X",chars:"ⓍＸẊẌ"},{base:"Y",chars:"ⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",chars:"ⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",chars:"ⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑ"},{base:"aa",chars:"ꜳ"},{base:"ae",chars:"æǽǣ"},{base:"ao",chars:"ꜵ"},{base:"au",chars:"ꜷ"},{base:"av",chars:"ꜹꜻ"},{base:"ay",chars:"ꜽ"},{base:"b",chars:"ⓑｂḃḅḇƀƃɓƂ"},{base:"c",chars:"ｃⓒćĉċčçḉƈȼꜿↄ"},{base:"d",chars:"ⓓｄḋďḍḑḓḏđƌɖɗƋᏧԁꞪ"},{base:"dh",chars:"ð"},{base:"dz",chars:"ǳǆ"},{base:"e",chars:"ⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇǝ"},{base:"f",chars:"ⓕｆḟƒ"},{base:"ff",chars:"ﬀ"},{base:"fi",chars:"ﬁ"},{base:"fl",chars:"ﬂ"},{base:"ffi",chars:"ﬃ"},{base:"ffl",chars:"ﬄ"},{base:"g",chars:"ⓖｇǵĝḡğġǧģǥɠꞡꝿᵹ"},{base:"h",chars:"ⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",chars:"ƕ"},{base:"i",chars:"ⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",chars:"ⓙｊĵǰɉ"},{base:"k",chars:"ⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",chars:"ⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇɭ"},{base:"lj",chars:"ǉ"},{base:"m",chars:"ⓜｍḿṁṃɱɯ"},{base:"n",chars:"ⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥлԉ"},{base:"nj",chars:"ǌ"},{base:"o",chars:"ⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿꝋꝍɵɔᴑ"},{base:"oe",chars:"œ"},{base:"oi",chars:"ƣ"},{base:"oo",chars:"ꝏ"},{base:"ou",chars:"ȣ"},{base:"p",chars:"ⓟｐṕṗƥᵽꝑꝓꝕρ"},{base:"q",chars:"ⓠｑɋꝗꝙ"},{base:"r",chars:"ⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",chars:"ⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛʂ"},{base:"ss",chars:"ß"},{base:"t",chars:"ⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"th",chars:"þ"},{base:"tz",chars:"ꜩ"},{base:"u",chars:"ⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",chars:"ⓥｖṽṿʋꝟʌ"},{base:"vy",chars:"ꝡ"},{base:"w",chars:"ⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",chars:"ⓧｘẋẍ"},{base:"y",chars:"ⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",chars:"ⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],e={},t=0;t<o.length;t+=1)for(var a=o[t].chars,n=0;n<a.length;n+=1)e[a[n]]=o[t].base;function i(s){return s.replace(/[^\u0000-\u007e]/g,function(l){return e[l]||l})}return Te.replacementList=o,Te.diacriticsMap=e,Te}var Va;function yc(){return Va||(Va=1,function(o){const e=Lo,t=ko,a=Ac().remove,n={},i={},s={},l={},r={};e.forEach(function(_){const E=_;i[E[0]]=E[1],s[E[1]]=E[0],l[E[2]]=E[0],r[E[0]]=E[2]});function p(_){return("000"+(_||"")).slice(-3)}function u(_,E){return Object.prototype.hasOwnProperty.call(_,E)}function g(_,E){return Object.keys(_).reduce(function(R,L){const N=_[L];return R[L]=E(N,L),R},{})}function w(_,E){switch(_){case"official":return Array.isArray(E)?E[0]:E;case"all":return typeof E=="string"?[E]:E;case"alias":return Array.isArray(E)?E[1]||E[0]:E;default:throw new TypeError("LocaleNameType must be one of these: all, official, alias!")}}o.registerLocale=function(_){if(!_.locale)throw new TypeError("Missing localeData.locale");if(!_.countries)throw new TypeError("Missing localeData.countries");n[_.locale]=_.countries};function v(_){return s[_]}o.alpha3ToAlpha2=v;function A(_){return i[_]}o.alpha2ToAlpha3=A;function C(_){return r[v(_)]}o.alpha3ToNumeric=C;function m(_){return r[_]}o.alpha2ToNumeric=m;function h(_){const E=p(_);return A(l[E])}o.numericToAlpha3=h;function b(_){const E=p(_);return l[E]}o.numericToAlpha2=b;function V(_){if(typeof _=="string"){if(/^[0-9]*$/.test(_))return h(_);if(_.length===2)return A(_.toUpperCase());if(_.length===3)return _.toUpperCase()}if(typeof _=="number")return h(_)}o.toAlpha3=V;function S(_){if(typeof _=="string"){if(/^[0-9]*$/.test(_))return b(_);if(_.length===2)return _.toUpperCase();if(_.length===3)return v(_.toUpperCase())}if(typeof _=="number")return b(_)}o.toAlpha2=S,o.getName=function(_,E,R={}){"select"in R||(R.select="official");try{const N=n[E.toLowerCase()][S(_)];return w(R.select,N)}catch{return}},o.getNames=function(_,E={}){"select"in E||(E.select="official");const R=n[_.toLowerCase()];return R===void 0?{}:g(R,function(L){return w(E.select,L)})},o.getAlpha2Code=function(_,E){const R=N=>N.toLowerCase(),L=(N,q)=>R(N)===R(q);try{const N=n[E.toLowerCase()];for(const q in N)if(u(N,q)){if(typeof N[q]=="string"&&L(N[q],_))return q;if(Array.isArray(N[q])){for(const it of N[q])if(L(it,_))return q}}return}catch{return}},o.getSimpleAlpha2Code=function(_,E){const R=N=>a(N.toLowerCase()),L=(N,q)=>R(N)===R(q);try{const N=n[E.toLowerCase()];for(const q in N)if(u(N,q)){if(typeof N[q]=="string"&&L(N[q],_))return q;if(Array.isArray(N[q])){for(const it of N[q])if(L(it,_))return q}}return}catch{return}},o.getAlpha2Codes=function(){return i},o.getAlpha3Code=function(_,E){const R=o.getAlpha2Code(_,E);if(R)return o.toAlpha3(R)},o.getSimpleAlpha3Code=function(_,E){const R=o.getSimpleAlpha2Code(_,E);if(R)return o.toAlpha3(R)},o.getAlpha3Codes=function(){return s},o.getNumericCodes=function(){return l},o.langs=function(){return Object.keys(n)},o.getSupportedLanguages=function(){return t},o.isValid=function(_){if(!_)return!1;const E=_.toString().toUpperCase();return u(s,E)||u(i,E)||u(l,E)}}(Dt)),Dt}var Ba=yc();const Eu=(o,e)=>{switch(o){case"plus":return e==="monthly"?7.99:79;case"premium":return e==="monthly"?15:99;case"essential":return e==="monthly"?10:8;case"business":return e==="monthly"?18:10;case"duo":return 99;default:return null}},Ic=(o,e=!0)=>{switch(o){case"basic":return e?d("Free Plan"):d("Free");case"pro":return e?d("Pro Plan"):d("Pro");case"plus":case"duo":case"personal":return e?d("Personal Plan"):d("Personal");case"team":return e?d("Team Plan"):d("Team");case"premium":case"xmbund":return e?d("Premium Plan"):d("Premium");case"essential":return e?d("Essential Plan"):d("Essential");case"business":return e?d("Business Plan"):d("Business");case"enterprise":return e?d("Enterprise Plan"):d("Enterprise");default:return""}},vu=async()=>{var s;const o={en:()=>c(()=>import("./json-en-json.chunk.J5hLkoA1.js"),[]),fr:()=>c(()=>import("./json-fr-json.chunk.Dsgl-VUw.js"),[]),de:()=>c(()=>import("./json-de-json.chunk.wcxdWzs2.js"),[]),vi:()=>c(()=>import("./json-vi-json.chunk.Z-msynVe.js"),[]),zh:()=>c(()=>import("./json-zh-json.chunk.B3uGDHhF.js"),[]),ja:()=>c(()=>import("./json-ja-json.chunk.DVJ1Yr9N.js"),[]),ru:()=>c(()=>import("./json-ru-json.chunk.kZYP5q2_.js"),[])},e=Xe().split("-")[0]||"en",t=((s=(navigator.language||navigator.languages[0]).split("-"))==null?void 0:s[1])||"US",a=(await o[e]()).default;Ba.registerLocale(a);const n=Ba.getNames(e);return{options:Object.entries(n).map(([l,r])=>({key:l,label:r})),country:t}};function wn(){return new ys({authToken:P().authToken,imRef:Xt().getImpactConversionRef()})}const Au=Object.freeze(Object.defineProperty({__proto__:null,useCloudKitClient:wn},Symbol.toStringTag,{value:"Module"}));function Cc(){return new W({authToken:P().authToken,imRef:Xt().getImpactConversionRef()})}const bc=`https://assets.churnkey.co/js/app.js?appId=${St}`;let $e=null;const Dc=()=>{const o="live",e=async()=>{var s;return $e||(s=window.churnkey)!=null&&s.created?await $e:(window.churnkey={created:!0},$e=Hn(bc,"churnkey"),logger.log("💰 [Churnkey] Load"),await $e)};return{load:e,showCancelFlow:async s=>{await e();const{subscriptionId:l,customerId:r,teamId:p,errorFallback:u,onAfterCanceled:g}=s;try{const w=await et().getChurnkeyUserHash(r),v=await ee().getUnexpiredTeamPlanAsync(p);window.churnkey.init("restart",{subscriptionId:l,customerId:r,authHash:w,appId:St,mode:o,provider:"stripe",record:!1,customerAttributes:{plan:v},onPause:(A,{pauseDuration:C})=>{logger.log("💰 [Churnkey] onPause",A,C)},onTrialExtension:(A,{trialExtensionDays:C})=>{logger.log("💰 [Churnkey] onTrialExtension",A,C)},onDiscount:(A,C)=>{logger.log("💰 [Churnkey] onDiscount",A,C)},onCancel:(A,C,m)=>{logger.log("💰 [Churnkey] Show On Cancel",A,C,m),Tc(p,C,m),g==null||g()},onError:A=>{logger.log("💰 [Churnkey] On Error",A),u&&u()},handleSupportRequest:A=>{logger.log("💰 [Churnkey] Support Request",A);try{const C=encodeURIComponent("Budget Discussion Inquiry");window.open(`mailto:business@xmind.ai?subject=${C}`)}catch(C){logger.error("Failed to open email client",C),H.show({message:d("We could not open your email client. Please send an email to business@xmind.ai."),topic:"normal"})}},handleRedirect:async(A,{redirectLabel:C,redirectUrl:m})=>{logger.log("💰 [Churnkey] Redirect",A,C,m),m===Ln?(window.churnkey.hide(),await Rc({teamId:p,plan:v})):m&&Fe().router.value.push(m)}})}catch(w){logger.error("💰 [Churnkey] init error",w),u&&u()}},hide:()=>{try{window.churnkey.hide()}catch(s){logger.error("💰 [Churnkey] hide error",s)}},pauseWall:async s=>{await e();const{subscriptionId:l,customerId:r,teamId:p,errorFallback:u}=s;try{const g=await et().getChurnkeyUserHash(r);logger.log("💰 [Churnkey] Pause Wall"),window.churnkey.check("pause",{subscriptionId:l,customerId:r,authHash:g,appId:St,mode:o,provider:"stripe",softWall:!1,forceCheck:!1,handleResume:(w,v,A)=>(logger.log("💰 [Churnkey] Resume",w,v,A),Sc({subscriptionId:l,teamId:p})),onError:(w,v)=>{kn&&logger.error("💰 [Churnkey] pause wall onError",w,v),u&&u()},onPauseWallActivated:()=>{logger.log("💰 [Churnkey] pause wall activated")},onPauseWallClose:()=>{logger.log("💰 [Churnkey] pause wall close")}})}catch(g){logger.error("💰 [Churnkey] pause wall error",g),u&&u()}},clear:()=>{try{window.churnkey.clearState()}catch(s){logger.error("💰 [Churnkey] clearState error",s)}}}},Tc=async(o,e,t="")=>{try{if(!e&&!t)return;const{fetchTeamMetadata:a,getTeamPlanProfileAsync:n,getTeamOwner:i,defaultTeamId:s}=ee(),l=await a({teamId:o}),r=await i(o);if(!(r!=null&&r.userId))return"";const p=await yo().getUserBaseProfile(r.userId),u=p==null?void 0:p.email,g=await n(o),w={isMyWorksOrTeam:o===s.value?"myWorks":"team",teamName:(l==null?void 0:l.name)??"",teamOwnerEmail:u,plan:(g==null?void 0:g.plan)??"",status:(g==null?void 0:g.status)??"",cancelReason:[e],other:t||""};await wn().retentionSurveyFeedback({teamId:o,feedbackData:w})}catch(a){logger.error("Failed to send cancel feedback",a)}},Sc=o=>{const{subscriptionId:e,teamId:t}=o;return new Promise(async(a,n)=>{await Cc().renewOrder({id:e,teamId:t})&&(logger.log("💰 [Churnkey] Resume Success"),a({message:d("Your subscription has been resumed. You will be billed again")})),logger.warn("💰 [Churnkey] Failed to resume account"),n({message:d("Failed to renew the subscription. Please try again later.")})})},Rc=async o=>{const{teamId:e,plan:t}=o,a=Io().joinedTeamList.find(i=>i.teamId===e);if(!["team","business","essential"].includes(t)){H.show({message:d("Only team, business, and essential plans can change team seats"),topic:"failed"}),logger.warn("Only team, business, and essential plans can change team seats");return}if(!helpers.isManagementRole(a)){H.show({message:d("Only the team owner or admin can change the team seats."),topic:"failed"}),logger.warn("Only the team owner or admin can change the team seats.");return}const n=await Co().getTeamMemberCountLimit({teamId:e});await T().services.action.dialog.openChangeTeamSeatsDialog({teamId:e,teamMemberCount:n})},Pc=()=>{const o=()=>{if(!P().userXmindId||!P().eventData){pe().setUserInfo(null);return}const s={userXmindId:P().userXmindId,anonymousId:P().eventData.anonymousId,sessionId:P().eventData.sessionId,startTime:P().eventData.startTime};pe().setUserInfo(s)},e=()=>P().isUserPremiumSubscribed||ee().getIsTeamSubscribedSync(P().userXmindId)?"PremiumMyWorks":P().isUserProSubscribed?"ProMyWorks":"FreeMyWorks",t=s=>{const l=ee().getUnexpiredTeamPlanSync(s);return l==="enterprise"?"EnterpriseTeam":l==="business"?"BusinessTeam":"FreeTeam"};return{setUserInfo:o,setHomeTeamInfo:s=>{const l=s===ee().defaultTeamId.value,r={teamId:s,isMyWorks:s===ee().defaultTeamId.value,teamRole:ee().hasTeamManagementPermission(s)?"owner":"member",workSpaceRole:ee().hasTeamManagementPermission(s)?"owner":"member",workspaceId:Re().homeSectionSpaceId.value||s,userPlan:l?e():t(s)};pe().setTeamInfo(r)},setEditorFileInfo:()=>{const{sharingMetadata:s}=bo();if(!(s!=null&&s.fileId)){pe().setFileInfo(null);return}const l=(s==null?void 0:s.teamId)===ee().defaultTeamId.value,r={teamId:s==null?void 0:s.teamId,isMyWorks:l,teamRole:ee().hasTeamManagementPermission(s==null?void 0:s.teamId)?"owner":"member",workSpaceRole:ee().hasTeamManagementPermission(s==null?void 0:s.teamId)?"owner":"member",workspaceId:(s==null?void 0:s.spaceId)||(s==null?void 0:s.teamId)||"",userPlan:l?e():t(s==null?void 0:s.teamId)};pe().setTeamInfo(r);const p={fileId:s==null?void 0:s.fileId,fileType:(s==null?void 0:s.fileType)==="brainstorm"?"brainstorming":"mindmap",size:s==null?void 0:s.size,createdTime:s==null?void 0:s.createdTime,ownerId:s==null?void 0:s.xmindId,teamId:s==null?void 0:s.teamId,spaceId:s==null?void 0:s.spaceId,parentFolderId:s==null?void 0:s.parentFolderId,accessMode:s==null?void 0:s.accessMode};pe().setFileInfo(p)},setHomeFileInfo:s=>{if(!s.fileId){pe().setFileInfo(null);return}const l={fileId:s.fileId,fileType:s.fileType==="brainstorm"?"brainstorming":"mindmap",size:s.size,createdTime:s.createdTime,ownerId:s.xmindId,teamId:s.teamId,spaceId:s.spaceId,parentFolderId:s.parentFolderId,accessMode:s.accessMode};pe().setFileInfo(l)}}};var Se={NODE_ENV:"production",MODE:"production",DEPLOY_ENV:"production",SNOWBIRD_VERSION:"0.5.7",SNOWBIRD_RESOURCE_VERSION:"0.0.2",VIEWER_KIT_VERSION:"1.10.10",DOCUMENT_KIT_VERSION:"1.7.6",SNOWMONSTER_VERSION:"@xmindltd/snowmonster-1.2.0-flatwhite.202511302233",BUILT_VERSION:"2026-01-07T10:27:01.356Z",BUILT_RELEASE_MODE:"test",SNOWBIRD_RESOURCE_URL:"snowbird-resource/0.0.2",PUBLIC_URL:"/",FLATWHITE_OAUTH_GOOGLE_APP_SCOPED_CLIENT_ID:"1005176877528-hfiduc51fqg8p7bivkbqqd9iiddq29sj.apps.googleusercontent.com",FLATWHITE_OAUTH_DROPBOX_APP_SCOPED_CLIENT_ID:"i1lwirzaxps3roo",FLATWHITE_OAUTH_ONEDRIVE_APP_SCOPED_CLIENT_ID:"aa23ca5d-bbe2-4240-856e-7c359f8c93e2",FLATWHITE_OAUTH_DROPBOX_CLIENT_ID:"3g5qm3ahijwjkh4",FLATWHITE_OAUTH_ONEDRIVE_CLIENT_ID:"aa23ca5d-bbe2-4240-856e-7c359f8c93e2",FLATWHITE_OAUTH_GOOGLE_CLIENT_ID:"550120331944-h8a96vi0ek4ka595vt89b1osv1kaf9kg.apps.googleusercontent.com",FLATWHITE_HOCUSPOCUS_SERVER_URL:"",STRIPE_PUBLIC_KEY:"pk_live_51LXcXIJqSx8ABpt8UnJszM3rcmal4rVSJuEXEAlQo0iSbo5xVbxJnROujuT9BaI3wbWhWJCzH7lRYmjGFZq0QQDt00oZ2dzcDp",STRIPE_PUBLIC_KEY_XMIND_PRO:"pk_live_QGIYsKfxf8HwfftPKCtxyUxE",GOOGLE_LOGIN_CLIENT_ID:"550120331944-h8a96vi0ek4ka595vt89b1osv1kaf9kg.apps.googleusercontent.com",APPLE_LOGIN_CLIENT_ID:"net.xmind.thirdparty.sign.in",RESPONSE_SIGN_PUBLIC_KEY:"-----ORTVA EFN CHOYVP XRL-----ZVVOPtXPNDRNm8raQtqGkytpZ+r0Y7bhRtiNQFOUmfVzIIel/m76Xn3kDeUYk1RubjM9Bo5doeJSvmnbyYIZgpcizyFgN4YpOC006Rkul0yeAYSvS0qBRFW8nJIf072vzJTRuzxjtUZiASyXRTVRcoHIeHZIbDfwfZekMK9DDSc/zniDBdRnMGd8rnXk6C2FLDNdOgdTvDu/slgd8wvy1vHgi6cTCKrj6ObRiJ0/qiTWiZChds8zEScEjQZJ3GtAeB0UEn8HQbX/UEerkkArdh8u3dVc+w5/VwhUMkyEkLAKOjeBv5oWplNjxDQxRUv8xxrkyUXjtKgqXcv9BOOom1fAAO3Sljs9MDVQNDNO-----RAQ EFN CHOYVP XRL-----",DOMAIN_NAME:"app.xmind.com",REGION:"global",XMIND_APP_ENDPOINT:"https://xmind.app",IS_HARMONY_RUNTIME:"0",DEV_MOCK_MAIN_API_ENDPOINT:"",ASSETS_PREFIX:"/assets",MIXPANEL_PROJECT_TOKEN:"08a129b7f0b9ca269482195db09123a2",MIXPANEL_PROJECT_TOKEN_CN:"8d11a72b258c5f39f588fe7327f7dc00",ZOOM_APP_AUTHORIZATION_URL:"https://zoom.us/oauth/authorize?response_type=code&client_id=pRqofyZfQSO0ziKOhSDENg&redirect_uri=https://app.xmind.com/api/integration/zoom/oauth-redirect",FORCE_FRONTEND_LOG:"0"};logger.log({vk:Se.VIEWER_KIT_VERSION,dk:Se.DOCUMENT_KIT_VERSION,sm:Se.SNOWMONSTER_VERSION,snowbird:Se.SNOWBIRD_VERSION,version:Se.BUILT_VERSION});Jn();const Oc=async()=>{const{isEditorCommonPaidFeatureEnabled:o}=Do();Vr({guidedPayment:async e=>{var i,s,l;const t=!!Nn[e]||!!Vn[e];e==="dndFile"&&Ga.upgradeDialog("fromAttachment");const a=o.value,n=((l=(s=(i=xt().editor)==null?void 0:i.meta)==null?void 0:s.extension)==null?void 0:l.name)==="xmind-sharing";return!t||a?e==="dndLargeFile"&&n?(H.show({message:d("The attachment size cannot exceed $1.",lt(Bn)),topic:"failed"}),!1):e==="dndLargeImage"&&n?(H.show({message:d("The image size cannot exceed $1.",lt(ut)),topic:"failed"}),!1):!0:(await T().services.action.dialog.openActivateDialog({innerFeatureName:e}),!1)},featureIsCurrentlyRestricted:e=>{const t=!o.value;return t&&T().services.action.dialog.openActivateDialog({innerFeatureName:e}),t},clipboardDataReadingInterpreter:e=>{var t,a,n,i;return((n=(a=(t=xt().editor)==null?void 0:t.meta)==null?void 0:a.extension)==null?void 0:n.name)==="xmind-sharing"&&((i=e.image)==null?void 0:i.size)>ut?(H.show({message:d("The image size cannot exceed $1.",lt(ut)),topic:"failed"}),!1):!0}}),dr(),Gt(Ar,{el:document.querySelector("#app"),provides:{$T:d},plugins:[T().services.router.vueRouter,Qa],middleware:e=>{Fo(["https://.*?xmind.ai","https://.*?xmind.com"],e,T().services.router.vueRouter)}}),navigator.userAgent.toLowerCase().includes("android")&&c(async()=>{const{polyfill:e}=await import("./index.min.chunk.BIj1Z90z.js").then(t=>t.i);return{polyfill:e}},[]).then(({polyfill:e})=>{e({holdToDrag:500})}),Xn(),xo().init(),Gn().init(),Dc().load(),xc(),Lc()},Fc=async()=>{const o=await P().fetchEventSession();o&&(P().setEventSession(o),Pc().setUserInfo())};$n();Wn({fontDisplay:"swap"});Oc();Fc();function xc(){document.addEventListener("contextmenu",o=>{o.target instanceof Element&&(jn(o.target,"sheet-viewer")||(o.target instanceof HTMLImageElement||o.target.tagName==="SVG"||o.target.closest("svg"))&&o.preventDefault())})}function Lc(){if(!document){logger.warn("window.document not found");return}document.addEventListener("contextmenu",o=>{o.target.closest(`.${To}`)||o.preventDefault()})}export{mu as $,Us as A,et as B,pi as C,Oe as D,tt as E,mc as F,_c as G,wu as H,Ec as I,vc as J,qt as K,Yt as L,Je as M,jr as N,Ia as O,as as P,Ca as Q,Pc as R,kr as S,jt as T,ve as U,Ea as V,sn as W,Vo as X,Dc as Y,pu as Z,du as _,Cc as a,Au as a0,Re as b,hi as c,xe as d,X as e,fu as f,_u as g,gu as h,vu as i,Kt as j,_n as k,pr as l,ke as m,Oa as n,Za as o,fi as p,ys as q,hu as r,Ie as s,ws as t,wn as u,Ii as v,Tr as w,Eu as x,Ic as y,Vs as z};
